// Generated by CoffeeScript 1.6.3
var StarDate;

module.exports = StarDate = (function() {
  function StarDate(d) {
    var t, t0, t1, y;
    if (d == null) {
      d = new Date();
    }
    switch (typeof d) {
      case 'number':
        this.stardate = d;
        y = Math.floor(d);
        t0 = Date.UTC(y, 0, 1, 0, 0, 0, 0);
        t1 = Date.UTC(y + 1, 0, 1, 0, 0, 0, 0);
        this.date = new Date(t0 + (t1 - t0) * (d - y));
        break;
      case 'object':
        if (d instanceof Date) {
          this.date = new Date(d);
          y = this.date.getUTCFullYear();
          t0 = Date.UTC(y, 0, 1, 0, 0, 0, 0);
          t1 = Date.UTC(y + 1, 0, 1, 0, 0, 0, 0);
          t = Date.UTC(y, this.date.getUTCMonth(), this.date.getUTCDate(), this.date.getUTCHours(), this.date.getUTCMinutes(), this.date.getUTCSeconds(), this.date.getUTCMilliseconds());
          this.stardate = y + (t - t0) / (t1 - t0);
        } else if (d instanceof StarDate) {
          this.stardate = d.stardate;
          this.date = new Date(d.date);
        } else {
          throw "Unable to convert " + d + " to StarDate";
        }
        break;
      default:
        throw "Unable to convert " + d + " to StarDate";
    }
  }

  StarDate.prototype.canonical = function() {
    return this.stardate.toFixed(15);
  };

  StarDate.prototype.short = function() {
    return this.stardate.toFixed(3);
  };

  return StarDate;

})();
