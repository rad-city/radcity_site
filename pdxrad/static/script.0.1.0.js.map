{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/browsernizr/index.js","node_modules/browsernizr/lib/Modernizr.js","node_modules/browsernizr/lib/ModernizrProto.js","node_modules/browsernizr/lib/classes.js","node_modules/browsernizr/lib/computedStyle.js","node_modules/browsernizr/lib/contains.js","node_modules/browsernizr/lib/createElement.js","node_modules/browsernizr/lib/cssToDOM.js","node_modules/browsernizr/lib/cssomPrefixes.js","node_modules/browsernizr/lib/docElement.js","node_modules/browsernizr/lib/domPrefixes.js","node_modules/browsernizr/lib/domToCSS.js","node_modules/browsernizr/lib/fnBind.js","node_modules/browsernizr/lib/getBody.js","node_modules/browsernizr/lib/html5shiv.js","node_modules/browsernizr/lib/injectElementWithStyles.js","node_modules/browsernizr/lib/is.js","node_modules/browsernizr/lib/isSVG.js","node_modules/browsernizr/lib/mStyle.js","node_modules/browsernizr/lib/modElem.js","node_modules/browsernizr/lib/nativeTestProps.js","node_modules/browsernizr/lib/omPrefixes.js","node_modules/browsernizr/lib/prefixes.js","node_modules/browsernizr/lib/setClasses.js","node_modules/browsernizr/lib/testAllProps.js","node_modules/browsernizr/lib/testDOMProps.js","node_modules/browsernizr/lib/testProps.js","node_modules/browsernizr/lib/testPropsAll.js","node_modules/browsernizr/lib/testRunner.js","node_modules/browsernizr/lib/testStyles.js","node_modules/browsernizr/lib/tests.js","node_modules/browsernizr/test/css/flexbox.js","node_modules/browsernizr/test/css/transforms3d.js","node_modules/browsernizr/test/css/transitions.js","node_modules/browsernizr/test/css/vwunit.js","node_modules/browsernizr/test/touchevents.js","node_modules/dom-helpers/class/addClass.js","node_modules/dom-helpers/class/hasClass.js","node_modules/dom-helpers/class/removeClass.js","node_modules/performance-now/lib/performance-now.js","node_modules/process/browser.js","node_modules/raf/index.js","src/script/drawer.js","src/script/hero.js","src/script/script.js","src/script/utils/custom-event-polyfill.js","src/script/utils/modernizr.js","src/script/utils/ready.js","src/script/utils/scroll-listener.js","src/script/utils/scroll-to.js","src/script/utils/spring.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9DA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACxEA;;;;AAEA;;;;AACA;;;;AACA;;;;;;AAGA;AACA,qBAAM,YAAM;AACX,KAAI,SAAS,SAAS,sBAAT,CAAgC,QAAhC,CAAb;AAAA,KACC,SAAS,SAAS,sBAAT,CAAgC,QAAhC,CADV;AAAA,KAEC,SAAS,SAAS,sBAAT,CAAgC,oBAAhC,CAFV;;AAIA,KAAI,UAAU,OAAO,CAAP,CAAV,IAAuB,MAAvB,IAAiC,OAAO,CAAP,CAAjC,IAA8C,MAA9C,IAAwD,OAAO,CAAP,CAA5D,EAAuE;AACtE,WAAS,OAAO,CAAP,CAAT;AACA,WAAS,OAAO,CAAP,CAAT;AACA,WAAS,OAAO,CAAP,CAAT;;AAEA,SAAO,gBAAP,CAAwB,OAAxB,EAAiC,iBAAS;AACzC,SAAM,cAAN;;AAEA,OAAI,wBAAS,MAAT,EAA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","file":"script.0.1.0.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var Modernizr = require('./lib/Modernizr'),\n    ModernizrProto = require('./lib/ModernizrProto'),\n    classes = require('./lib/classes'),\n    testRunner = require('./lib/testRunner'),\n    setClasses = require('./lib/setClasses');\n\n// Run each test\ntestRunner();\n\n// Remove the \"no-js\" class if it exists\nsetClasses(classes);\n\ndelete ModernizrProto.addTest;\ndelete ModernizrProto.addAsyncTest;\n\n// Run the things that are supposed to run after the tests\nfor (var i = 0; i < Modernizr._q.length; i++) {\n  Modernizr._q[i]();\n}\n\nmodule.exports = Modernizr;\n","var ModernizrProto = require('./ModernizrProto.js');\n  // Fake some of Object.create so we can force non test results to be non \"own\" properties.\n  var Modernizr = function() {};\n  Modernizr.prototype = ModernizrProto;\n\n  // Leak modernizr globally when you `require` it rather than force it here.\n  // Overwrite name so constructor name is nicer :D\n  Modernizr = new Modernizr();\n\n  module.exports = Modernizr;\n\n","var tests = require('./tests.js');\n  /**\n   *\n   * ModernizrProto is the constructor for Modernizr\n   *\n   * @class\n   * @access public\n   */\n\n  var ModernizrProto = {\n    // The current version, dummy\n    _version: '3.4.0 (browsernizr 2.2.0)',\n\n    // Any settings that don't work as separate modules\n    // can go in here as configuration.\n    _config: {\n      'classPrefix': '',\n      'enableClasses': true,\n      'enableJSClass': true,\n      'usePrefixes': true\n    },\n\n    // Queue of tests\n    _q: [],\n\n    // Stub these for people who are listening\n    on: function(test, cb) {\n      // I don't really think people should do this, but we can\n      // safe guard it a bit.\n      // -- NOTE:: this gets WAY overridden in src/addTest for actual async tests.\n      // This is in case people listen to synchronous tests. I would leave it out,\n      // but the code to *disallow* sync tests in the real version of this\n      // function is actually larger than this.\n      var self = this;\n      setTimeout(function() {\n        cb(self[test]);\n      }, 0);\n    },\n\n    addTest: function(name, fn, options) {\n      tests.push({name: name, fn: fn, options: options});\n    },\n\n    addAsyncTest: function(fn) {\n      tests.push({name: null, fn: fn});\n    }\n  };\n\n  module.exports = ModernizrProto;\n\n","\n  var classes = [];\n  module.exports = classes;\n\n","\n\n  /**\n   * wrapper around getComputedStyle, to fix issues with Firefox returning null when\n   * called inside of a hidden iframe\n   *\n   * @access private\n   * @function computedStyle\n   * @param {HTMLElement|SVGElement} - The element we want to find the computed styles of\n   * @param {string|null} [pseudoSelector]- An optional pseudo element selector (e.g. :before), of null if none\n   * @returns {CSSStyleDeclaration}\n   */\n\n  function computedStyle(elem, pseudo, prop) {\n    var result;\n\n    if ('getComputedStyle' in window) {\n      result = getComputedStyle.call(window, elem, pseudo);\n      var console = window.console;\n\n      if (result !== null) {\n        if (prop) {\n          result = result.getPropertyValue(prop);\n        }\n      } else {\n        if (console) {\n          var method = console.error ? 'error' : 'log';\n          console[method].call(console, 'getComputedStyle returning null, its possible modernizr test results are inaccurate');\n        }\n      }\n    } else {\n      result = !pseudo && elem.currentStyle && elem.currentStyle[prop];\n    }\n\n    return result;\n  }\n\n  module.exports = computedStyle;\n\n","\n\n  /**\n   * contains checks to see if a string contains another string\n   *\n   * @access private\n   * @function contains\n   * @param {string} str - The string we want to check for substrings\n   * @param {string} substr - The substring we want to search the first string for\n   * @returns {boolean}\n   */\n\n  function contains(str, substr) {\n    return !!~('' + str).indexOf(substr);\n  }\n\n  module.exports = contains;\n\n","var isSVG = require('./isSVG.js');\n  /**\n   * createElement is a convenience wrapper around document.createElement. Since we\n   * use createElement all over the place, this allows for (slightly) smaller code\n   * as well as abstracting away issues with creating elements in contexts other than\n   * HTML documents (e.g. SVG documents).\n   *\n   * @access private\n   * @function createElement\n   * @returns {HTMLElement|SVGElement} An HTML or SVG element\n   */\n\n  function createElement() {\n    if (typeof document.createElement !== 'function') {\n      // This is the case in IE7, where the type of createElement is \"object\".\n      // For this reason, we cannot call apply() as Object is not a Function.\n      return document.createElement(arguments[0]);\n    } else if (isSVG) {\n      return document.createElementNS.call(document, 'http://www.w3.org/2000/svg', arguments[0]);\n    } else {\n      return document.createElement.apply(document, arguments);\n    }\n  }\n\n  module.exports = createElement;\n\n","\n  /**\n   * cssToDOM takes a kebab-case string and converts it to camelCase\n   * e.g. box-sizing -> boxSizing\n   *\n   * @access private\n   * @function cssToDOM\n   * @param {string} name - String name of kebab-case prop we want to convert\n   * @returns {string} The camelCase version of the supplied name\n   */\n\n  function cssToDOM(name) {\n    return name.replace(/([a-z])-([a-z])/g, function(str, m1, m2) {\n      return m1 + m2.toUpperCase();\n    }).replace(/^-/, '');\n  }\n  module.exports = cssToDOM;\n\n","var ModernizrProto = require('./ModernizrProto.js');\nvar omPrefixes = require('./omPrefixes.js');\n  var cssomPrefixes = (ModernizrProto._config.usePrefixes ? omPrefixes.split(' ') : []);\n  ModernizrProto._cssomPrefixes = cssomPrefixes;\n  module.exports = cssomPrefixes;\n\n","\n  /**\n   * docElement is a convenience wrapper to grab the root element of the document\n   *\n   * @access private\n   * @returns {HTMLElement|SVGElement} The root element of the document\n   */\n\n  var docElement = document.documentElement;\n  module.exports = docElement;\n\n","var ModernizrProto = require('./ModernizrProto.js');\nvar omPrefixes = require('./omPrefixes.js');\n  /**\n   * List of JavaScript DOM values used for tests\n   *\n   * @memberof Modernizr\n   * @name Modernizr._domPrefixes\n   * @optionName Modernizr._domPrefixes\n   * @optionProp domPrefixes\n   * @access public\n   * @example\n   *\n   * Modernizr._domPrefixes is exactly the same as [_prefixes](#modernizr-_prefixes), but rather\n   * than kebab-case properties, all properties are their Capitalized variant\n   *\n   * ```js\n   * Modernizr._domPrefixes === [ \"Moz\", \"O\", \"ms\", \"Webkit\" ];\n   * ```\n   */\n\n  var domPrefixes = (ModernizrProto._config.usePrefixes ? omPrefixes.toLowerCase().split(' ') : []);\n  ModernizrProto._domPrefixes = domPrefixes;\n  module.exports = domPrefixes;\n\n","\n  /**\n   * domToCSS takes a camelCase string and converts it to kebab-case\n   * e.g. boxSizing -> box-sizing\n   *\n   * @access private\n   * @function domToCSS\n   * @param {string} name - String name of camelCase prop we want to convert\n   * @returns {string} The kebab-case version of the supplied name\n   */\n\n  function domToCSS(name) {\n    return name.replace(/([A-Z])/g, function(str, m1) {\n      return '-' + m1.toLowerCase();\n    }).replace(/^ms-/, '-ms-');\n  }\n  module.exports = domToCSS;\n\n","\n  /**\n   * fnBind is a super small [bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind) polyfill.\n   *\n   * @access private\n   * @function fnBind\n   * @param {function} fn - a function you want to change `this` reference to\n   * @param {object} that - the `this` you want to call the function with\n   * @returns {function} The wrapped version of the supplied function\n   */\n\n  function fnBind(fn, that) {\n    return function() {\n      return fn.apply(that, arguments);\n    };\n  }\n\n  module.exports = fnBind;\n\n","var createElement = require('./createElement.js');\nvar isSVG = require('./isSVG.js');\n  /**\n   * getBody returns the body of a document, or an element that can stand in for\n   * the body if a real body does not exist\n   *\n   * @access private\n   * @function getBody\n   * @returns {HTMLElement|SVGElement} Returns the real body of a document, or an\n   * artificially created element that stands in for the body\n   */\n\n  function getBody() {\n    // After page load injecting a fake body doesn't work so check if body exists\n    var body = document.body;\n\n    if (!body) {\n      // Can't use the real body create a fake one.\n      body = createElement(isSVG ? 'svg' : 'body');\n      body.fake = true;\n    }\n\n    return body;\n  }\n\n  module.exports = getBody;\n\n","var isSVG = require('./isSVG.js');\n/**\n  * @optionName html5shiv\n  * @optionProp html5shiv\n  */\n\n  // Take the html5 variable out of the html5shiv scope so we can return it.\n  var html5;\n  if (!isSVG) {\n    /**\n     * @preserve HTML5 Shiv 3.7.3 | @afarkas @jdalton @jon_neal @rem | MIT/GPL2 Licensed\n     */\n    ;(function(window, document) {\n      /** version */\n      var version = '3.7.3';\n\n      /** Preset options */\n      var options = window.html5 || {};\n\n      /** Used to skip problem elements */\n      var reSkip = /^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;\n\n      /** Not all elements can be cloned in IE **/\n      var saveClones = /^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;\n\n      /** Detect whether the browser supports default html5 styles */\n      var supportsHtml5Styles;\n\n      /** Name of the expando, to work with multiple documents or to re-shiv one document */\n      var expando = '_html5shiv';\n\n      /** The id for the the documents expando */\n      var expanID = 0;\n\n      /** Cached data for each document */\n      var expandoData = {};\n\n      /** Detect whether the browser supports unknown elements */\n      var supportsUnknownElements;\n\n      (function() {\n        try {\n          var a = document.createElement('a');\n          a.innerHTML = '<xyz></xyz>';\n          //if the hidden property is implemented we can assume, that the browser supports basic HTML5 Styles\n          supportsHtml5Styles = ('hidden' in a);\n\n          supportsUnknownElements = a.childNodes.length == 1 || (function() {\n            // assign a false positive if unable to shiv\n            (document.createElement)('a');\n            var frag = document.createDocumentFragment();\n            return (\n              typeof frag.cloneNode == 'undefined' ||\n                typeof frag.createDocumentFragment == 'undefined' ||\n                typeof frag.createElement == 'undefined'\n            );\n          }());\n        } catch(e) {\n          // assign a false positive if detection fails => unable to shiv\n          supportsHtml5Styles = true;\n          supportsUnknownElements = true;\n        }\n\n      }());\n\n      /*--------------------------------------------------------------------------*/\n\n      /**\n       * Creates a style sheet with the given CSS text and adds it to the document.\n       * @private\n       * @param {Document} ownerDocument The document.\n       * @param {String} cssText The CSS text.\n       * @returns {StyleSheet} The style element.\n       */\n      function addStyleSheet(ownerDocument, cssText) {\n        var p = ownerDocument.createElement('p'),\n          parent = ownerDocument.getElementsByTagName('head')[0] || ownerDocument.documentElement;\n\n        p.innerHTML = 'x<style>' + cssText + '</style>';\n        return parent.insertBefore(p.lastChild, parent.firstChild);\n      }\n\n      /**\n       * Returns the value of `html5.elements` as an array.\n       * @private\n       * @returns {Array} An array of shived element node names.\n       */\n      function getElements() {\n        var elements = html5.elements;\n        return typeof elements == 'string' ? elements.split(' ') : elements;\n      }\n\n      /**\n       * Extends the built-in list of html5 elements\n       * @memberOf html5\n       * @param {String|Array} newElements whitespace separated list or array of new element names to shiv\n       * @param {Document} ownerDocument The context document.\n       */\n      function addElements(newElements, ownerDocument) {\n        var elements = html5.elements;\n        if(typeof elements != 'string'){\n          elements = elements.join(' ');\n        }\n        if(typeof newElements != 'string'){\n          newElements = newElements.join(' ');\n        }\n        html5.elements = elements +' '+ newElements;\n        shivDocument(ownerDocument);\n      }\n\n      /**\n       * Returns the data associated to the given document\n       * @private\n       * @param {Document} ownerDocument The document.\n       * @returns {Object} An object of data.\n       */\n      function getExpandoData(ownerDocument) {\n        var data = expandoData[ownerDocument[expando]];\n        if (!data) {\n          data = {};\n          expanID++;\n          ownerDocument[expando] = expanID;\n          expandoData[expanID] = data;\n        }\n        return data;\n      }\n\n      /**\n       * returns a shived element for the given nodeName and document\n       * @memberOf html5\n       * @param {String} nodeName name of the element\n       * @param {Document|DocumentFragment} ownerDocument The context document.\n       * @returns {Object} The shived element.\n       */\n      function createElement(nodeName, ownerDocument, data){\n        if (!ownerDocument) {\n          ownerDocument = document;\n        }\n        if(supportsUnknownElements){\n          return ownerDocument.createElement(nodeName);\n        }\n        if (!data) {\n          data = getExpandoData(ownerDocument);\n        }\n        var node;\n\n        if (data.cache[nodeName]) {\n          node = data.cache[nodeName].cloneNode();\n        } else if (saveClones.test(nodeName)) {\n          node = (data.cache[nodeName] = data.createElem(nodeName)).cloneNode();\n        } else {\n          node = data.createElem(nodeName);\n        }\n\n        // Avoid adding some elements to fragments in IE < 9 because\n        // * Attributes like `name` or `type` cannot be set/changed once an element\n        //   is inserted into a document/fragment\n        // * Link elements with `src` attributes that are inaccessible, as with\n        //   a 403 response, will cause the tab/window to crash\n        // * Script elements appended to fragments will execute when their `src`\n        //   or `text` property is set\n        return node.canHaveChildren && !reSkip.test(nodeName) && !node.tagUrn ? data.frag.appendChild(node) : node;\n      }\n\n      /**\n       * returns a shived DocumentFragment for the given document\n       * @memberOf html5\n       * @param {Document} ownerDocument The context document.\n       * @returns {Object} The shived DocumentFragment.\n       */\n      function createDocumentFragment(ownerDocument, data){\n        if (!ownerDocument) {\n          ownerDocument = document;\n        }\n        if(supportsUnknownElements){\n          return ownerDocument.createDocumentFragment();\n        }\n        data = data || getExpandoData(ownerDocument);\n        var clone = data.frag.cloneNode(),\n          i = 0,\n          elems = getElements(),\n          l = elems.length;\n        for(;i<l;i++){\n          clone.createElement(elems[i]);\n        }\n        return clone;\n      }\n\n      /**\n       * Shivs the `createElement` and `createDocumentFragment` methods of the document.\n       * @private\n       * @param {Document|DocumentFragment} ownerDocument The document.\n       * @param {Object} data of the document.\n       */\n      function shivMethods(ownerDocument, data) {\n        if (!data.cache) {\n          data.cache = {};\n          data.createElem = ownerDocument.createElement;\n          data.createFrag = ownerDocument.createDocumentFragment;\n          data.frag = data.createFrag();\n        }\n\n\n        ownerDocument.createElement = function(nodeName) {\n          //abort shiv\n          if (!html5.shivMethods) {\n            return data.createElem(nodeName);\n          }\n          return createElement(nodeName, ownerDocument, data);\n        };\n\n        ownerDocument.createDocumentFragment = Function('h,f', 'return function(){' +\n                                                        'var n=f.cloneNode(),c=n.createElement;' +\n                                                        'h.shivMethods&&(' +\n                                                        // unroll the `createElement` calls\n                                                        getElements().join().replace(/[\\w\\-:]+/g, function(nodeName) {\n                                                          data.createElem(nodeName);\n                                                          data.frag.createElement(nodeName);\n                                                          return 'c(\"' + nodeName + '\")';\n                                                        }) +\n          ');return n}'\n                                                       )(html5, data.frag);\n      }\n\n      /*--------------------------------------------------------------------------*/\n\n      /**\n       * Shivs the given document.\n       * @memberOf html5\n       * @param {Document} ownerDocument The document to shiv.\n       * @returns {Document} The shived document.\n       */\n      function shivDocument(ownerDocument) {\n        if (!ownerDocument) {\n          ownerDocument = document;\n        }\n        var data = getExpandoData(ownerDocument);\n\n        if (html5.shivCSS && !supportsHtml5Styles && !data.hasCSS) {\n          data.hasCSS = !!addStyleSheet(ownerDocument,\n                                        // corrects block display not defined in IE6/7/8/9\n                                        'article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}' +\n                                        // adds styling not present in IE6/7/8/9\n                                        'mark{background:#FF0;color:#000}' +\n                                        // hides non-rendered elements\n                                        'template{display:none}'\n                                       );\n        }\n        if (!supportsUnknownElements) {\n          shivMethods(ownerDocument, data);\n        }\n        return ownerDocument;\n      }\n\n      /*--------------------------------------------------------------------------*/\n\n      /**\n       * The `html5` object is exposed so that more elements can be shived and\n       * existing shiving can be detected on iframes.\n       * @type Object\n       * @example\n       *\n       * // options can be changed before the script is included\n       * html5 = { 'elements': 'mark section', 'shivCSS': false, 'shivMethods': false };\n       */\n      var html5 = {\n\n        /**\n         * An array or space separated string of node names of the elements to shiv.\n         * @memberOf html5\n         * @type Array|String\n         */\n        'elements': options.elements || 'abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video',\n\n        /**\n         * current version of html5shiv\n         */\n        'version': version,\n\n        /**\n         * A flag to indicate that the HTML5 style sheet should be inserted.\n         * @memberOf html5\n         * @type Boolean\n         */\n        'shivCSS': (options.shivCSS !== false),\n\n        /**\n         * Is equal to true if a browser supports creating unknown/HTML5 elements\n         * @memberOf html5\n         * @type boolean\n         */\n        'supportsUnknownElements': supportsUnknownElements,\n\n        /**\n         * A flag to indicate that the document's `createElement` and `createDocumentFragment`\n         * methods should be overwritten.\n         * @memberOf html5\n         * @type Boolean\n         */\n        'shivMethods': (options.shivMethods !== false),\n\n        /**\n         * A string to describe the type of `html5` object (\"default\" or \"default print\").\n         * @memberOf html5\n         * @type String\n         */\n        'type': 'default',\n\n        // shivs the document according to the specified `html5` object options\n        'shivDocument': shivDocument,\n\n        //creates a shived element\n        createElement: createElement,\n\n        //creates a shived documentFragment\n        createDocumentFragment: createDocumentFragment,\n\n        //extends list of elements\n        addElements: addElements\n      };\n\n      /*--------------------------------------------------------------------------*/\n\n      // expose html5\n      window.html5 = html5;\n\n      // shiv the document\n      shivDocument(document);\n\n      if(typeof module == 'object' && module.exports){\n        module.exports = html5;\n      }\n\n    }(typeof window !== 'undefined' ? window : this, document));\n  }\n  module.exports = html5;\n\n","var ModernizrProto = require('./ModernizrProto.js');\nvar docElement = require('./docElement.js');\nvar createElement = require('./createElement.js');\nvar getBody = require('./getBody.js');\n  /**\n   * injectElementWithStyles injects an element with style element and some CSS rules\n   *\n   * @access private\n   * @function injectElementWithStyles\n   * @param {string} rule - String representing a css rule\n   * @param {function} callback - A function that is used to test the injected element\n   * @param {number} [nodes] - An integer representing the number of additional nodes you want injected\n   * @param {string[]} [testnames] - An array of strings that are used as ids for the additional nodes\n   * @returns {boolean}\n   */\n\n  function injectElementWithStyles(rule, callback, nodes, testnames) {\n    var mod = 'modernizr';\n    var style;\n    var ret;\n    var node;\n    var docOverflow;\n    var div = createElement('div');\n    var body = getBody();\n\n    if (parseInt(nodes, 10)) {\n      // In order not to give false positives we create a node for each test\n      // This also allows the method to scale for unspecified uses\n      while (nodes--) {\n        node = createElement('div');\n        node.id = testnames ? testnames[nodes] : mod + (nodes + 1);\n        div.appendChild(node);\n      }\n    }\n\n    style = createElement('style');\n    style.type = 'text/css';\n    style.id = 's' + mod;\n\n    // IE6 will false positive on some tests due to the style element inside the test div somehow interfering offsetHeight, so insert it into body or fakebody.\n    // Opera will act all quirky when injecting elements in documentElement when page is served as xml, needs fakebody too. #270\n    (!body.fake ? div : body).appendChild(style);\n    body.appendChild(div);\n\n    if (style.styleSheet) {\n      style.styleSheet.cssText = rule;\n    } else {\n      style.appendChild(document.createTextNode(rule));\n    }\n    div.id = mod;\n\n    if (body.fake) {\n      //avoid crashing IE8, if background image is used\n      body.style.background = '';\n      //Safari 5.13/5.1.4 OSX stops loading if ::-webkit-scrollbar is used and scrollbars are visible\n      body.style.overflow = 'hidden';\n      docOverflow = docElement.style.overflow;\n      docElement.style.overflow = 'hidden';\n      docElement.appendChild(body);\n    }\n\n    ret = callback(div, rule);\n    // If this is done after page load we don't want to remove the body so check if body exists\n    if (body.fake) {\n      body.parentNode.removeChild(body);\n      docElement.style.overflow = docOverflow;\n      // Trigger layout so kinetic scrolling isn't disabled in iOS6+\n      // eslint-disable-next-line\n      docElement.offsetHeight;\n    } else {\n      div.parentNode.removeChild(div);\n    }\n\n    return !!ret;\n\n  }\n\n  module.exports = injectElementWithStyles;\n\n","\n  /**\n   * is returns a boolean if the typeof an obj is exactly type.\n   *\n   * @access private\n   * @function is\n   * @param {*} obj - A thing we want to check the type of\n   * @param {string} type - A string to compare the typeof against\n   * @returns {boolean}\n   */\n\n  function is(obj, type) {\n    return typeof obj === type;\n  }\n  module.exports = is;\n\n","var docElement = require('./docElement.js');\n  /**\n   * A convenience helper to check if the document we are running in is an SVG document\n   *\n   * @access private\n   * @returns {boolean}\n   */\n\n  var isSVG = docElement.nodeName.toLowerCase() === 'svg';\n  module.exports = isSVG;\n\n","var Modernizr = require('./Modernizr.js');\nvar modElem = require('./modElem.js');\n  var mStyle = {\n    style: modElem.elem.style\n  };\n\n  // kill ref for gc, must happen before mod.elem is removed, so we unshift on to\n  // the front of the queue.\n  Modernizr._q.unshift(function() {\n    delete mStyle.style;\n  });\n\n  module.exports = mStyle;\n\n","var Modernizr = require('./Modernizr.js');\nvar createElement = require('./createElement.js');\n  /**\n   * Create our \"modernizr\" element that we do most feature tests on.\n   *\n   * @access private\n   */\n\n  var modElem = {\n    elem: createElement('modernizr')\n  };\n\n  // Clean up this element\n  Modernizr._q.push(function() {\n    delete modElem.elem;\n  });\n\n  module.exports = modElem;\n\n","var injectElementWithStyles = require('./injectElementWithStyles.js');\nvar domToCSS = require('./domToCSS.js');\nvar computedStyle = require('./computedStyle.js');\n  /**\n   * nativeTestProps allows for us to use native feature detection functionality if available.\n   * some prefixed form, or false, in the case of an unsupported rule\n   *\n   * @access private\n   * @function nativeTestProps\n   * @param {array} props - An array of property names\n   * @param {string} value - A string representing the value we want to check via @supports\n   * @returns {boolean|undefined} A boolean when @supports exists, undefined otherwise\n   */\n\n  // Accepts a list of property names and a single value\n  // Returns `undefined` if native detection not available\n  function nativeTestProps(props, value) {\n    var i = props.length;\n    // Start with the JS API: http://www.w3.org/TR/css3-conditional/#the-css-interface\n    if ('CSS' in window && 'supports' in window.CSS) {\n      // Try every prefixed variant of the property\n      while (i--) {\n        if (window.CSS.supports(domToCSS(props[i]), value)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    // Otherwise fall back to at-rule (for Opera 12.x)\n    else if ('CSSSupportsRule' in window) {\n      // Build a condition string for every prefixed variant\n      var conditionText = [];\n      while (i--) {\n        conditionText.push('(' + domToCSS(props[i]) + ':' + value + ')');\n      }\n      conditionText = conditionText.join(' or ');\n      return injectElementWithStyles('@supports (' + conditionText + ') { #modernizr { position: absolute; } }', function(node) {\n        return computedStyle(node, null, 'position') == 'absolute';\n      });\n    }\n    return undefined;\n  }\n  module.exports = nativeTestProps;\n\n","\n  /**\n   * If the browsers follow the spec, then they would expose vendor-specific styles as:\n   *   elem.style.WebkitBorderRadius\n   * instead of something like the following (which is technically incorrect):\n   *   elem.style.webkitBorderRadius\n\n   * WebKit ghosts their properties in lowercase but Opera & Moz do not.\n   * Microsoft uses a lowercase `ms` instead of the correct `Ms` in IE8+\n   *   erik.eae.net/archives/2008/03/10/21.48.10/\n\n   * More here: github.com/Modernizr/Modernizr/issues/issue/21\n   *\n   * @access private\n   * @returns {string} The string representing the vendor-specific style properties\n   */\n\n  var omPrefixes = 'Moz O ms Webkit';\n  module.exports = omPrefixes;\n\n","var ModernizrProto = require('./ModernizrProto.js');\n  /**\n   * List of property values to set for css tests. See ticket #21\n   * http://git.io/vUGl4\n   *\n   * @memberof Modernizr\n   * @name Modernizr._prefixes\n   * @optionName Modernizr._prefixes\n   * @optionProp prefixes\n   * @access public\n   * @example\n   *\n   * Modernizr._prefixes is the internal list of prefixes that we test against\n   * inside of things like [prefixed](#modernizr-prefixed) and [prefixedCSS](#-code-modernizr-prefixedcss). It is simply\n   * an array of kebab-case vendor prefixes you can use within your code.\n   *\n   * Some common use cases include\n   *\n   * Generating all possible prefixed version of a CSS property\n   * ```js\n   * var rule = Modernizr._prefixes.join('transform: rotate(20deg); ');\n   *\n   * rule === 'transform: rotate(20deg); webkit-transform: rotate(20deg); moz-transform: rotate(20deg); o-transform: rotate(20deg); ms-transform: rotate(20deg);'\n   * ```\n   *\n   * Generating all possible prefixed version of a CSS value\n   * ```js\n   * rule = 'display:' +  Modernizr._prefixes.join('flex; display:') + 'flex';\n   *\n   * rule === 'display:flex; display:-webkit-flex; display:-moz-flex; display:-o-flex; display:-ms-flex; display:flex'\n   * ```\n   */\n\n  // we use ['',''] rather than an empty array in order to allow a pattern of .`join()`ing prefixes to test\n  // values in feature detects to continue to work\n  var prefixes = (ModernizrProto._config.usePrefixes ? ' -webkit- -moz- -o- -ms- '.split(' ') : ['','']);\n\n  // expose these for the plugin API. Look in the source for how to join() them against your input\n  ModernizrProto._prefixes = prefixes;\n\n  module.exports = prefixes;\n\n","var Modernizr = require('./Modernizr.js');\nvar docElement = require('./docElement.js');\nvar isSVG = require('./isSVG.js');\n  /**\n   * setClasses takes an array of class names and adds them to the root element\n   *\n   * @access private\n   * @function setClasses\n   * @param {string[]} classes - Array of class names\n   */\n\n  // Pass in an and array of class names, e.g.:\n  //  ['no-webp', 'borderradius', ...]\n  function setClasses(classes) {\n    var className = docElement.className;\n    var classPrefix = Modernizr._config.classPrefix || '';\n\n    if (isSVG) {\n      className = className.baseVal;\n    }\n\n    // Change `no-js` to `js` (independently of the `enableClasses` option)\n    // Handle classPrefix on this too\n    if (Modernizr._config.enableJSClass) {\n      var reJS = new RegExp('(^|\\\\s)' + classPrefix + 'no-js(\\\\s|$)');\n      className = className.replace(reJS, '$1' + classPrefix + 'js$2');\n    }\n\n    if (Modernizr._config.enableClasses) {\n      // Add the new classes\n      className += ' ' + classPrefix + classes.join(' ' + classPrefix);\n      if (isSVG) {\n        docElement.className.baseVal = className;\n      } else {\n        docElement.className = className;\n      }\n    }\n\n  }\n\n  module.exports = setClasses;\n\n","var ModernizrProto = require('./ModernizrProto.js');\nvar testPropsAll = require('./testPropsAll.js');\n  /**\n   * testAllProps determines whether a given CSS property is supported in the browser\n   *\n   * @memberof Modernizr\n   * @name Modernizr.testAllProps\n   * @optionName Modernizr.testAllProps()\n   * @optionProp testAllProps\n   * @access public\n   * @function testAllProps\n   * @param {string} prop - String naming the property to test (either camelCase or kebab-case)\n   * @param {string} [value] - String of the value to test\n   * @param {boolean} [skipValueTest=false] - Whether to skip testing that the value is supported when using non-native detection\n   * @example\n   *\n   * testAllProps determines whether a given CSS property, in some prefixed form,\n   * is supported by the browser.\n   *\n   * ```js\n   * testAllProps('boxSizing')  // true\n   * ```\n   *\n   * It can optionally be given a CSS value in string form to test if a property\n   * value is valid\n   *\n   * ```js\n   * testAllProps('display', 'block') // true\n   * testAllProps('display', 'penguin') // false\n   * ```\n   *\n   * A boolean can be passed as a third parameter to skip the value check when\n   * native detection (@supports) isn't available.\n   *\n   * ```js\n   * testAllProps('shapeOutside', 'content-box', true);\n   * ```\n   */\n\n  function testAllProps(prop, value, skipValueTest) {\n    return testPropsAll(prop, undefined, undefined, value, skipValueTest);\n  }\n  ModernizrProto.testAllProps = testAllProps;\n  module.exports = testAllProps;\n\n","var is = require('./is.js');\nvar fnBind = require('./fnBind.js');\n  /**\n   * testDOMProps is a generic DOM property test; if a browser supports\n   *   a certain property, it won't return undefined for it.\n   *\n   * @access private\n   * @function testDOMProps\n   * @param {array.<string>} props - An array of properties to test for\n   * @param {object} obj - An object or Element you want to use to test the parameters again\n   * @param {boolean|object} elem - An Element to bind the property lookup again. Use `false` to prevent the check\n   * @returns {false|*} returns false if the prop is unsupported, otherwise the value that is supported\n   */\n  function testDOMProps(props, obj, elem) {\n    var item;\n\n    for (var i in props) {\n      if (props[i] in obj) {\n\n        // return the property name as a string\n        if (elem === false) {\n          return props[i];\n        }\n\n        item = obj[props[i]];\n\n        // let's bind a function\n        if (is(item, 'function')) {\n          // bind to obj unless overriden\n          return fnBind(item, elem || obj);\n        }\n\n        // return the unbound function or obj or value\n        return item;\n      }\n    }\n    return false;\n  }\n\n  module.exports = testDOMProps;\n\n","var contains = require('./contains.js');\nvar mStyle = require('./mStyle.js');\nvar createElement = require('./createElement.js');\nvar nativeTestProps = require('./nativeTestProps.js');\nvar is = require('./is.js');\nvar cssToDOM = require('./cssToDOM.js');\n  // testProps is a generic CSS / DOM property test.\n\n  // In testing support for a given CSS property, it's legit to test:\n  //    `elem.style[styleName] !== undefined`\n  // If the property is supported it will return an empty string,\n  // if unsupported it will return undefined.\n\n  // We'll take advantage of this quick test and skip setting a style\n  // on our modernizr element, but instead just testing undefined vs\n  // empty string.\n\n  // Property names can be provided in either camelCase or kebab-case.\n\n  function testProps(props, prefixed, value, skipValueTest) {\n    skipValueTest = is(skipValueTest, 'undefined') ? false : skipValueTest;\n\n    // Try native detect first\n    if (!is(value, 'undefined')) {\n      var result = nativeTestProps(props, value);\n      if (!is(result, 'undefined')) {\n        return result;\n      }\n    }\n\n    // Otherwise do it properly\n    var afterInit, i, propsLength, prop, before;\n\n    // If we don't have a style element, that means we're running async or after\n    // the core tests, so we'll need to create our own elements to use\n\n    // inside of an SVG element, in certain browsers, the `style` element is only\n    // defined for valid tags. Therefore, if `modernizr` does not have one, we\n    // fall back to a less used element and hope for the best.\n    // for strict XHTML browsers the hardly used samp element is used\n    var elems = ['modernizr', 'tspan', 'samp'];\n    while (!mStyle.style && elems.length) {\n      afterInit = true;\n      mStyle.modElem = createElement(elems.shift());\n      mStyle.style = mStyle.modElem.style;\n    }\n\n    // Delete the objects if we created them.\n    function cleanElems() {\n      if (afterInit) {\n        delete mStyle.style;\n        delete mStyle.modElem;\n      }\n    }\n\n    propsLength = props.length;\n    for (i = 0; i < propsLength; i++) {\n      prop = props[i];\n      before = mStyle.style[prop];\n\n      if (contains(prop, '-')) {\n        prop = cssToDOM(prop);\n      }\n\n      if (mStyle.style[prop] !== undefined) {\n\n        // If value to test has been passed in, do a set-and-check test.\n        // 0 (integer) is a valid property value, so check that `value` isn't\n        // undefined, rather than just checking it's truthy.\n        if (!skipValueTest && !is(value, 'undefined')) {\n\n          // Needs a try catch block because of old IE. This is slow, but will\n          // be avoided in most cases because `skipValueTest` will be used.\n          try {\n            mStyle.style[prop] = value;\n          } catch (e) {}\n\n          // If the property value has changed, we assume the value used is\n          // supported. If `value` is empty string, it'll fail here (because\n          // it hasn't changed), which matches how browsers have implemented\n          // CSS.supports()\n          if (mStyle.style[prop] != before) {\n            cleanElems();\n            return prefixed == 'pfx' ? prop : true;\n          }\n        }\n        // Otherwise just return true, or the property name if this is a\n        // `prefixed()` call\n        else {\n          cleanElems();\n          return prefixed == 'pfx' ? prop : true;\n        }\n      }\n    }\n    cleanElems();\n    return false;\n  }\n\n  module.exports = testProps;\n\n","var ModernizrProto = require('./ModernizrProto.js');\nvar cssomPrefixes = require('./cssomPrefixes.js');\nvar is = require('./is.js');\nvar testProps = require('./testProps.js');\nvar domPrefixes = require('./domPrefixes.js');\nvar testDOMProps = require('./testDOMProps.js');\n  /**\n   * testPropsAll tests a list of DOM properties we want to check against.\n   * We specify literally ALL possible (known and/or likely) properties on\n   * the element including the non-vendor prefixed one, for forward-\n   * compatibility.\n   *\n   * @access private\n   * @function testPropsAll\n   * @param {string} prop - A string of the property to test for\n   * @param {string|object} [prefixed] - An object to check the prefixed properties on. Use a string to skip\n   * @param {HTMLElement|SVGElement} [elem] - An element used to test the property and value against\n   * @param {string} [value] - A string of a css value\n   * @param {boolean} [skipValueTest] - An boolean representing if you want to test if value sticks when set\n   * @returns {false|string} returns the string version of the property, or false if it is unsupported\n   */\n  function testPropsAll(prop, prefixed, elem, value, skipValueTest) {\n\n    var ucProp = prop.charAt(0).toUpperCase() + prop.slice(1),\n      props = (prop + ' ' + cssomPrefixes.join(ucProp + ' ') + ucProp).split(' ');\n\n    // did they call .prefixed('boxSizing') or are we just testing a prop?\n    if (is(prefixed, 'string') || is(prefixed, 'undefined')) {\n      return testProps(props, prefixed, value, skipValueTest);\n\n      // otherwise, they called .prefixed('requestAnimationFrame', window[, elem])\n    } else {\n      props = (prop + ' ' + (domPrefixes).join(ucProp + ' ') + ucProp).split(' ');\n      return testDOMProps(props, prefixed, elem);\n    }\n  }\n\n  // Modernizr.testAllProps() investigates whether a given style property,\n  // or any of its vendor-prefixed variants, is recognized\n  //\n  // Note that the property names must be provided in the camelCase variant.\n  // Modernizr.testAllProps('boxSizing')\n  ModernizrProto.testAllProps = testPropsAll;\n\n  module.exports = testPropsAll;\n\n","var tests = require('./tests.js');\nvar Modernizr = require('./Modernizr.js');\nvar classes = require('./classes.js');\nvar is = require('./is.js');\n  /**\n   * Run through all tests and detect their support in the current UA.\n   *\n   * @access private\n   */\n\n  function testRunner() {\n    var featureNames;\n    var feature;\n    var aliasIdx;\n    var result;\n    var nameIdx;\n    var featureName;\n    var featureNameSplit;\n\n    for (var featureIdx in tests) {\n      if (tests.hasOwnProperty(featureIdx)) {\n        featureNames = [];\n        feature = tests[featureIdx];\n        // run the test, throw the return value into the Modernizr,\n        // then based on that boolean, define an appropriate className\n        // and push it into an array of classes we'll join later.\n        //\n        // If there is no name, it's an 'async' test that is run,\n        // but not directly added to the object. That should\n        // be done with a post-run addTest call.\n        if (feature.name) {\n          featureNames.push(feature.name.toLowerCase());\n\n          if (feature.options && feature.options.aliases && feature.options.aliases.length) {\n            // Add all the aliases into the names list\n            for (aliasIdx = 0; aliasIdx < feature.options.aliases.length; aliasIdx++) {\n              featureNames.push(feature.options.aliases[aliasIdx].toLowerCase());\n            }\n          }\n        }\n\n        // Run the test, or use the raw value if it's not a function\n        result = is(feature.fn, 'function') ? feature.fn() : feature.fn;\n\n\n        // Set each of the names on the Modernizr object\n        for (nameIdx = 0; nameIdx < featureNames.length; nameIdx++) {\n          featureName = featureNames[nameIdx];\n          // Support dot properties as sub tests. We don't do checking to make sure\n          // that the implied parent tests have been added. You must call them in\n          // order (either in the test, or make the parent test a dependency).\n          //\n          // Cap it to TWO to make the logic simple and because who needs that kind of subtesting\n          // hashtag famous last words\n          featureNameSplit = featureName.split('.');\n\n          if (featureNameSplit.length === 1) {\n            Modernizr[featureNameSplit[0]] = result;\n          } else {\n            // cast to a Boolean, if not one already\n            if (Modernizr[featureNameSplit[0]] && !(Modernizr[featureNameSplit[0]] instanceof Boolean)) {\n              Modernizr[featureNameSplit[0]] = new Boolean(Modernizr[featureNameSplit[0]]);\n            }\n\n            Modernizr[featureNameSplit[0]][featureNameSplit[1]] = result;\n          }\n\n          classes.push((result ? '' : 'no-') + featureNameSplit.join('-'));\n        }\n      }\n    }\n  }\n  module.exports = testRunner;\n\n","var ModernizrProto = require('./ModernizrProto.js');\nvar injectElementWithStyles = require('./injectElementWithStyles.js');\n  /**\n   * testStyles injects an element with style element and some CSS rules\n   *\n   * @memberof Modernizr\n   * @name Modernizr.testStyles\n   * @optionName Modernizr.testStyles()\n   * @optionProp testStyles\n   * @access public\n   * @function testStyles\n   * @param {string} rule - String representing a css rule\n   * @param {function} callback - A function that is used to test the injected element\n   * @param {number} [nodes] - An integer representing the number of additional nodes you want injected\n   * @param {string[]} [testnames] - An array of strings that are used as ids for the additional nodes\n   * @returns {boolean}\n   * @example\n   *\n   * `Modernizr.testStyles` takes a CSS rule and injects it onto the current page\n   * along with (possibly multiple) DOM elements. This lets you check for features\n   * that can not be detected by simply checking the [IDL](https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Interface_development_guide/IDL_interface_rules).\n   *\n   * ```js\n   * Modernizr.testStyles('#modernizr { width: 9px; color: papayawhip; }', function(elem, rule) {\n   *   // elem is the first DOM node in the page (by default #modernizr)\n   *   // rule is the first argument you supplied - the CSS rule in string form\n   *\n   *   addTest('widthworks', elem.style.width === '9px')\n   * });\n   * ```\n   *\n   * If your test requires multiple nodes, you can include a third argument\n   * indicating how many additional div elements to include on the page. The\n   * additional nodes are injected as children of the `elem` that is returned as\n   * the first argument to the callback.\n   *\n   * ```js\n   * Modernizr.testStyles('#modernizr {width: 1px}; #modernizr2 {width: 2px}', function(elem) {\n   *   document.getElementById('modernizr').style.width === '1px'; // true\n   *   document.getElementById('modernizr2').style.width === '2px'; // true\n   *   elem.firstChild === document.getElementById('modernizr2'); // true\n   * }, 1);\n   * ```\n   *\n   * By default, all of the additional elements have an ID of `modernizr[n]`, where\n   * `n` is its index (e.g. the first additional, second overall is `#modernizr2`,\n   * the second additional is `#modernizr3`, etc.).\n   * If you want to have more meaningful IDs for your function, you can provide\n   * them as the fourth argument, as an array of strings\n   *\n   * ```js\n   * Modernizr.testStyles('#foo {width: 10px}; #bar {height: 20px}', function(elem) {\n   *   elem.firstChild === document.getElementById('foo'); // true\n   *   elem.lastChild === document.getElementById('bar'); // true\n   * }, 2, ['foo', 'bar']);\n   * ```\n   *\n   */\n\n  var testStyles = ModernizrProto.testStyles = injectElementWithStyles;\n  module.exports = testStyles;\n\n","\n  var tests = [];\n  module.exports = tests;\n\n","/*!\n{\n  \"name\": \"Flexbox\",\n  \"property\": \"flexbox\",\n  \"caniuse\": \"flexbox\",\n  \"tags\": [\"css\"],\n  \"notes\": [{\n    \"name\": \"The _new_ flexbox\",\n    \"href\": \"http://dev.w3.org/csswg/css3-flexbox\"\n  }],\n  \"warnings\": [\n    \"A `true` result for this detect does not imply that the `flex-wrap` property is supported; see the `flexwrap` detect.\"\n  ]\n}\n!*/\n/* DOC\nDetects support for the Flexible Box Layout model, a.k.a. Flexbox, which allows easy manipulation of layout order and sizing within a container.\n*/\nvar Modernizr = require('./../../lib/Modernizr.js');\nvar testAllProps = require('./../../lib/testAllProps.js');\n  Modernizr.addTest('flexbox', testAllProps('flexBasis', '1px', true));\n\n","/*!\n{\n  \"name\": \"CSS Transforms 3D\",\n  \"property\": \"csstransforms3d\",\n  \"caniuse\": \"transforms3d\",\n  \"tags\": [\"css\"],\n  \"warnings\": [\n    \"Chrome may occassionally fail this test on some systems; more info: https://code.google.com/p/chromium/issues/detail?id=129004\"\n  ]\n}\n!*/\nvar Modernizr = require('./../../lib/Modernizr.js');\nvar testAllProps = require('./../../lib/testAllProps.js');\nvar testStyles = require('./../../lib/testStyles.js');\nvar docElement = require('./../../lib/docElement.js');\n  Modernizr.addTest('csstransforms3d', function() {\n    var ret = !!testAllProps('perspective', '1px', true);\n    var usePrefix = Modernizr._config.usePrefixes;\n\n    // Webkit's 3D transforms are passed off to the browser's own graphics renderer.\n    //   It works fine in Safari on Leopard and Snow Leopard, but not in Chrome in\n    //   some conditions. As a result, Webkit typically recognizes the syntax but\n    //   will sometimes throw a false positive, thus we must do a more thorough check:\n    if (ret && (!usePrefix || 'webkitPerspective' in docElement.style)) {\n      var mq;\n      var defaultStyle = '#modernizr{width:0;height:0}';\n      // Use CSS Conditional Rules if available\n      if (Modernizr.supports) {\n        mq = '@supports (perspective: 1px)';\n      } else {\n        // Otherwise, Webkit allows this media query to succeed only if the feature is enabled.\n        // `@media (transform-3d),(-webkit-transform-3d){ ... }`\n        mq = '@media (transform-3d)';\n        if (usePrefix) {\n          mq += ',(-webkit-transform-3d)';\n        }\n      }\n\n      mq += '{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}';\n\n      testStyles(defaultStyle + mq, function(elem) {\n        ret = elem.offsetWidth === 7 && elem.offsetHeight === 18;\n      });\n    }\n\n    return ret;\n  });\n\n","/*!\n{\n  \"name\": \"CSS Transitions\",\n  \"property\": \"csstransitions\",\n  \"caniuse\": \"css-transitions\",\n  \"tags\": [\"css\"]\n}\n!*/\nvar Modernizr = require('./../../lib/Modernizr.js');\nvar testAllProps = require('./../../lib/testAllProps.js');\n  Modernizr.addTest('csstransitions', testAllProps('transition', 'all', true));\n\n","/*!\n{\n  \"name\": \"CSS vw unit\",\n  \"property\": \"cssvwunit\",\n  \"caniuse\": \"viewport-units\",\n  \"tags\": [\"css\"],\n  \"builderAliases\": [\"css_vwunit\"],\n  \"notes\": [{\n    \"name\": \"Related Modernizr Issue\",\n    \"href\": \"https://github.com/Modernizr/Modernizr/issues/572\"\n  },{\n    \"name\": \"JSFiddle Example\",\n    \"href\": \"https://jsfiddle.net/FWeinb/etnYC/\"\n  }]\n}\n!*/\nvar Modernizr = require('./../../lib/Modernizr.js');\nvar testStyles = require('./../../lib/testStyles.js');\nvar computedStyle = require('./../../lib/computedStyle.js');\n  testStyles('#modernizr { width: 50vw; }', function(elem) {\n    var width = parseInt(window.innerWidth / 2, 10);\n    var compStyle = parseInt(computedStyle(elem, null, 'width'), 10);\n\n    Modernizr.addTest('cssvwunit', compStyle == width);\n  });\n\n","/*!\n{\n  \"name\": \"Touch Events\",\n  \"property\": \"touchevents\",\n  \"caniuse\" : \"touch\",\n  \"tags\": [\"media\", \"attribute\"],\n  \"notes\": [{\n    \"name\": \"Touch Events spec\",\n    \"href\": \"https://www.w3.org/TR/2013/WD-touch-events-20130124/\"\n  }],\n  \"warnings\": [\n    \"Indicates if the browser supports the Touch Events spec, and does not necessarily reflect a touchscreen device\"\n  ],\n  \"knownBugs\": [\n    \"False-positive on some configurations of Nokia N900\",\n    \"False-positive on some BlackBerry 6.0 builds  https://github.com/Modernizr/Modernizr/issues/372#issuecomment-3112695\"\n  ]\n}\n!*/\n/* DOC\nIndicates if the browser supports the W3C Touch Events API.\n\nThis *does not* necessarily reflect a touchscreen device:\n\n* Older touchscreen devices only emulate mouse events\n* Modern IE touch devices implement the Pointer Events API instead: use `Modernizr.pointerevents` to detect support for that\n* Some browsers & OS setups may enable touch APIs when no touchscreen is connected\n* Future browsers may implement other event models for touch interactions\n\nSee this article: [You Can't Detect A Touchscreen](http://www.stucox.com/blog/you-cant-detect-a-touchscreen/).\n\nIt's recommended to bind both mouse and touch/pointer events simultaneously  see [this HTML5 Rocks tutorial](http://www.html5rocks.com/en/mobile/touchandmouse/).\n\nThis test will also return `true` for Firefox 4 Multitouch support.\n*/\nvar Modernizr = require('./../lib/Modernizr.js');\nvar prefixes = require('./../lib/prefixes.js');\nvar testStyles = require('./../lib/testStyles.js');\n  // Chrome (desktop) used to lie about its support on this, but that has since been rectified: http://crbug.com/36415\n  Modernizr.addTest('touchevents', function() {\n    var bool;\n    if (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {\n      bool = true;\n    } else {\n      // include the 'heartz' as a way to have a non matching MQ to help terminate the join\n      // https://git.io/vznFH\n      var query = ['@media (', prefixes.join('touch-enabled),('), 'heartz', ')', '{#modernizr{top:9px;position:absolute}}'].join('');\n      testStyles(query, function(node) {\n        bool = node.offsetTop === 9;\n      });\n    }\n    return bool;\n  });\n\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = addClass;\n\nvar _hasClass = require('./hasClass');\n\nvar _hasClass2 = _interopRequireDefault(_hasClass);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction addClass(element, className) {\n  if (element.classList) element.classList.add(className);else if (!(0, _hasClass2.default)(element)) element.className = element.className + ' ' + className;\n}\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = hasClass;\nfunction hasClass(element, className) {\n  if (element.classList) return !!className && element.classList.contains(className);else return (\" \" + element.className + \" \").indexOf(\" \" + className + \" \") !== -1;\n}\nmodule.exports = exports[\"default\"];","'use strict';\n\nmodule.exports = function removeClass(element, className) {\n  if (element.classList) element.classList.remove(className);else element.className = element.className.replace(new RegExp('(^|\\\\s)' + className + '(?:\\\\s|$)', 'g'), '$1').replace(/\\s+/g, ' ').replace(/^\\s*|\\s*$/g, '');\n};","// Generated by CoffeeScript 1.12.2\n(function() {\n  var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;\n\n  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n    module.exports = function() {\n      return performance.now();\n    };\n  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n    module.exports = function() {\n      return (getNanoSeconds() - nodeLoadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    moduleLoadTime = getNanoSeconds();\n    upTime = process.uptime() * 1e9;\n    nodeLoadTime = moduleLoadTime - upTime;\n  } else if (Date.now) {\n    module.exports = function() {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function() {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n\n}).call(this);\n\n//# sourceMappingURL=performance-now.js.map\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var now = require('performance-now')\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function() {\n  root.requestAnimationFrame = raf\n  root.cancelAnimationFrame = caf\n}\n","import ready from './utils/ready';\n\nimport addClass from 'dom-helpers/class/addClass';\nimport hasClass from 'dom-helpers/class/hasClass';\nimport removeClass from 'dom-helpers/class/removeClass';\n\n\n// Heroes\nready(() => {\n\tlet drawer = document.getElementsByClassName('drawer'),\n\t\theader = document.getElementsByClassName('header'),\n\t\ttoggle = document.getElementsByClassName('header__nav-toggle');\n\n\tif (drawer && drawer[0] && header && header[0] && toggle && toggle[0]) {\n\t\tdrawer = drawer[0];\n\t\theader = header[0];\n\t\ttoggle = toggle[0];\n\n\t\ttoggle.addEventListener('click', event => {\n\t\t\tevent.preventDefault();\n\n\t\t\tif (hasClass(drawer, 'drawer--open')) {\n\t\t\t\tremoveClass(header, 'header--drawer-open');\n\t\t\t\tremoveClass(drawer, 'drawer--open');\n\t\t\t} else {\n\t\t\t\taddClass(header, 'header--drawer-open');\n\t\t\t\taddClass(drawer, 'drawer--open');\n\t\t\t}\n\t\t});\n\t}\n});\n","import ready from './utils/ready';\nimport { scrollDistance } from './utils/scroll-to';\n\n// Heroes\nready(() => {\n\tlet heroes = document.getElementsByClassName('hero');\n\n\tfor (let i = 0; i < heroes.length; i++) {\n\t\tlet hero = heroes[i],\n\t\t\tarrow = hero.getElementsByClassName('hero__arrow');\n\n\t\tif (arrow && arrow[0]) {\n\t\t\tarrow = arrow[0];\n\n\t\t\tarrow.addEventListener('click', event => {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tlet rect = hero.getBoundingClientRect();\n\t\t\t\tscrollDistance(rect.top + rect.height);\n\t\t\t});\n\t\t}\n\t}\n});\n","import './utils/modernizr';\n\nimport './drawer';\n\nimport './hero';\n","// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent\n(function () {\n\tif (typeof window.CustomEvent === 'function') {\n\t\treturn false;\n\t}\n\n\tfunction CustomEvent ( event, params ) {\n\t\tparams = params || { bubbles: false, cancelable: false, detail: undefined };\n\t\tvar evt = document.createEvent( 'CustomEvent' );\n\t\tevt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n\t\treturn evt;\n\t}\n\n\tCustomEvent.prototype = window.Event.prototype;\n\n\twindow.CustomEvent = CustomEvent;\n})();\n","/**\n * @overview Browsernizr\n *\n * @description\n * Import (and initiate) app-wide tests.\n *\n * @author ljd\n */\n// Shim HTML5\nimport 'browsernizr/lib/html5shiv';\n\n// Misc test\nimport 'browsernizr/test/touchevents';\nimport 'browsernizr/test/css/flexbox';\nimport 'browsernizr/test/css/transitions';\nimport 'browsernizr/test/css/transforms3d';\nimport 'browsernizr/test/css/vwunit';\n\n// Initialize and export\nimport Modernizr from 'browsernizr';\n\nexport default Modernizr;\n","export default function ready(fn) {\n\tif (document.attachEvent ? document.readyState === 'complete' : document.readyState !== 'loading'){\n\t\tfn();\n\t} else {\n\t\tdocument.addEventListener('DOMContentLoaded', fn);\n\t}\n}\n","/**\n * @name koalition.helpers:ScrollListener\n * @description\n * Virtual scroll listeners for DOM elements. Based on [VirtualScroll](https://raw.githubusercontent.com/drojdjou/bartekdrozdz.com/master/static/src/framework/VirtualScroll.js)\n */\n\nimport raf from 'raf';\n\nconst hasWheelEvent = 'onwheel' in document;\nconst hasMouseWheelEvent = 'onmousewheel' in document;\nconst hasTouch = 'ontouchstart' in document;\nconst hasTouchWin = navigator.msMaxTouchPoints && navigator.msMaxTouchPoints > 1;\nconst hasPointer = !!window.navigator.msPointerEnabled;\nconst hasKeyDown = 'onkeydown' in document;\n\n\n\nconst DEFAULTS = {\n\tfps: 60,\n\ttimeout: 200,\n\tpassive: true\n};\n\n\n\nexport default class ScrollListener {\n\n\tstatic getScroll() {\n\t\tlet { scrollX, scrollY } = window;\n\n\t\tif (scrollX === undefined || scrollY === undefined) {\n\t\t\tscrollX = document.documentElement.scrollLeft || document.body.scrollLeft || 0;\n\t\t\tscrollY = document.documentElement.scrollTop || document.body.scrollTop || 0;\n\t\t}\n\n\t\treturn {\n\t\t\tscrollX,\n\t\t\tscrollY\n\t\t};\n\t}\n\n\t/**\n\t * @constructor\n\t * @param {object} options\n\t * @property {number} fps - frequency / updates per second\n\t * @property {number} timeout - amount of time in ms to allow for same result before turning off listeners\n\t */\n\tconstructor(options) {\n\t\tthis.options = Object.assign({}, DEFAULTS, options);\n\t\tthis._listeners = [];\n\t\tthis._internalListeners = [];\n\t}\n\n\t/**\n\t * Notify consumer listeners\n\t * @private\n\t * @param {object} event\n\t */\n\t_notify(event) {\n\t\tconst { _listeners } = this;\n\t\tfor (let i = 0; i < _listeners.length; i++) {\n\t\t\t_listeners[i](event);\n\t\t}\n\t}\n\n\t/**\n\t * Continously listen for scroll position\n\t * @private\n\t * @param {object} event - original event object\n\t */\n\t_start(event) {\n\t\tthis._stop();\n\t\tconst { fps, timeout } = this.options;\n\t\tconst { scrollX, scrollY } = ScrollListener.getScroll();\n\n\t\t// Calculate delta based on last event if available\n\t\tlet deltaX = 0,\n\t\t\tdeltaY = 0,\n\t\t\tisFirstEvent = false;\n\t\tif (!this._lastSeen) {\n\t\t\tisFirstEvent = true;\n\n\t\t} else {\n\t\t\tconst { scrollX: lastSeenScrollX, scrollY: lastSeenScrollY } = this._lastSeen;\n\t\t\tdeltaX = scrollX - (lastSeenScrollX || scrollX);\n\t\t\tdeltaY = scrollY - (lastSeenScrollY || scrollY);\n\t\t}\n\n\t\tthis._lastSeen = {\n\t\t\tscrollX,\n\t\t\tscrollY\n\t\t};\n\n\t\t// If we're not moving and this isn't the first event, don't trigger events.\n\t\tif (!isFirstEvent && deltaX === 0 && deltaY === 0) {\n\t\t\tthis._stopTime = this._stopTime || Date.now();\n\n\t\t// Else, trigger events\n\t\t} else {\n\t\t\tthis._stopTime = null;\n\n\t\t\tconst internalEvent = {\n\t\t\t\tx: scrollX,\n\t\t\t\ty: scrollY,\n\t\t\t\tdeltaX,\n\t\t\t\tdeltaY,\n\t\t\t\toriginalEvent: event\n\t\t\t};\n\t\t\tthis._notify(internalEvent);\n\t\t}\n\n\t\t// Check if we haven't updated for the duration of our timeout\n\t\tlet doLoop = true;\n\t\tif (this._stopTime && Date.now() - this._stopTime >= timeout) {\n\t\t\tdoLoop = false;\n\t\t\tthis._stopTime = null;\n\t\t}\n\n\t\t// If we're still moving / updating, keep looping\n\t\tif (doLoop) {\n\t\t\tthis._startTimer = setTimeout(() => this._animationFrame = raf(() => {\n\t\t\t\tthis._start(event);\n\t\t\t}), 1000 / fps);\n\t\t}\n\t}\n\n\t/**\n\t * Stop continous listener\n\t * @private\n\t */\n\t_stop() {\n\t\tclearTimeout(this._startTimer);\n\t\traf.cancel(this._animationFrame);\n\t}\n\n\t/**\n\t * Register internal listeners\n\t * @private\n\t * @param {object} event\n\t */\n\t_initListeners() {\n\t\tthis._destroyListeners();\n\n\t\tthis._internalListeners = [];\n\n\t\tthis._addListeners();\n\n\t\tthis._isInitialized = true;\n\t}\n\n\t/**\n\t * Add internal listeners to a single element\n\t * @private\n\t * @param {object} event\n\t */\n\t_addListeners(element = document) {\n\t\tlet { passive } = this.options;\n\n\t\tlet syntheticListener = event => this._start(event);\n\t\telement.addEventListener('syntheticScroll', syntheticListener, { passive });\n\t\tthis._internalListeners.push({\n\t\t\telement: element,\n\t\t\ttype: 'synthetic',\n\t\t\tlistener: syntheticListener\n\t\t});\n\n\t\tlet loadListener = event => setTimeout(() => {\n\t\t\tthis._start(event);\n\t\t}, 500);\n\t\twindow.addEventListener('load', loadListener, { passive });\n\t\tthis._internalListeners.push({\n\t\t\telement: window,\n\t\t\ttype: 'load',\n\t\t\tlistener: loadListener\n\t\t});\n\n\t\tlet scrollListener = event => this._start(event);\n\t\telement.addEventListener('scroll', scrollListener, { passive });\n\t\tthis._internalListeners.push({\n\t\t\telement: element,\n\t\t\ttype: 'scroll',\n\t\t\tlistener: scrollListener\n\t\t});\n\n\t\tif (hasWheelEvent) {\n\t\t\tlet wheelListener = event => this._start(event);\n\t\t\telement.addEventListener('wheel', wheelListener, { passive });\n\t\t\tthis._internalListeners.push({\n\t\t\t\telement: element,\n\t\t\t\ttype: 'wheel',\n\t\t\t\tlistener: wheelListener\n\t\t\t});\n\t\t}\n\n\t\tif (hasMouseWheelEvent) {\n\t\t\tlet mouseWheelListener = event => this._start(event);\n\t\t\telement.addEventListener('mousewheel', mouseWheelListener, { passive });\n\t\t\tthis._internalListeners.push({\n\t\t\t\telement: element,\n\t\t\t\ttype: 'mousewheel',\n\t\t\t\tlistener: mouseWheelListener\n\t\t\t});\n\t\t}\n\n\t\tif (hasTouch) {\n\t\t\tlet touchStartListener = event => this._start(event);\n\t\t\telement.addEventListener('touchstart', touchStartListener, { passive });\n\t\t\tthis._internalListeners.push({\n\t\t\t\telement: element,\n\t\t\t\ttype: 'touchstart',\n\t\t\t\tlistener: touchStartListener\n\t\t\t});\n\n\t\t\tlet touchMoveListener = event => this._start(event);\n\t\t\telement.addEventListener('touchmove', touchMoveListener, { passive });\n\t\t\tthis._internalListeners.push({\n\t\t\t\telement: element,\n\t\t\t\ttype: 'touchmove',\n\t\t\t\tlistener: touchMoveListener\n\t\t\t});\n\t\t}\n\n\t\tif (hasPointer && hasTouchWin) {\n\t\t\tthis._bodyTouchAction = document.body.style.msTouchAction;\n\t\t\tdocument.body.style.msTouchAction = 'none';\n\n\t\t\tlet touchStartListener = event => this._start(event);\n\t\t\telement.addEventListener('MSPointerDown', touchStartListener, true);\n\t\t\tthis._internalListeners.push({\n\t\t\t\telement: element,\n\t\t\t\ttype: 'MSPointerDown',\n\t\t\t\tlistener: touchStartListener,\n\t\t\t\tuseCapture: true\n\t\t\t});\n\n\t\t\tlet touchMoveListener = event => this._start(event);\n\t\t\telement.addEventListener('MSPointerMove', touchMoveListener, true);\n\t\t\tthis._internalListeners.push({\n\t\t\t\telement: element,\n\t\t\t\ttype: 'MSPointerMove',\n\t\t\t\tlistener: touchMoveListener,\n\t\t\t\tuseCapture: true\n\t\t\t});\n\t\t}\n\n\t\tif (hasKeyDown) {\n\t\t\tlet keyDownListener = event => this._start(event);\n\t\t\telement.addEventListener('keydown', keyDownListener, { passive });\n\t\t\tthis._internalListeners.push({\n\t\t\t\telement: element,\n\t\t\t\ttype: 'keydown',\n\t\t\t\tlistener: keyDownListener\n\t\t\t});\n\t\t}\n\n\t}\n\n\t/**\n\t * Deregister internal listeners\n\t * @private\n\t * @param {object} event\n\t */\n\t_destroyListeners() {\n\t\tthis._internalListeners.forEach(obj => obj.element.removeEventListener(obj.type, obj.listener, obj.useCapture));\n\n\t\tthis._isInitialized = false;\n\t}\n\n\t/**\n\t * Hook for consumer to register VS listener\n\t * @public\n\t * @param {function} listener\n\t */\n\ton(listener) {\n\t\tif (!this._isInitialized) {\n\t\t\tthis._initListeners();\n\t\t}\n\n\t\treturn this._listeners.push(listener);\n\t}\n\n\t/**\n\t * Hook for consumer to deregister VS listener\n\t * @public\n\t * @param {number} index\n\t */\n\toff(index) {\n\t\tif (index) {\n\t\t\tthis._listeners.splice(index, 1);\n\t\t} else {\n\t\t\tthis._listeners = [];\n\t\t}\n\n\t\tif (this._listeners.length <= 0) {\n\t\t\tthis._destroyListeners();\n\t\t}\n\t}\n\n\t/**\n\t * Destroy all listeners\n\t * @public\n\t */\n\tdestroy() {\n\t\tthis.off();\n\t}\n}\n","'use strict';\n\nimport './custom-event-polyfill';\nimport Spring from './spring';\nimport ScrollListener from './scroll-listener';\n\n/**\n * Scroll animation helper\n * @private\n */\nconst spring = new Spring({\n\tcallback: ({ current }) => setScrollTop(current),\n\tacceleration: 0.05,\n\tmargin: 1\n});\n\n\n/**\n * Prevent scroll events while we're animating\n * @private\n */\nlet listener;\ndocument.addEventListener('DOMContentLoaded', () => {\n\tlistener = new ScrollListener({ id: 'koa-scroll-to', passive: false });\n\tlistener.on(event => isAnimatingScroll() === true && event.originalEvent.preventDefault());\n});\n\n/**\n * Get scrollTop cross browser\n * @private\n */\nfunction getScrollTop() {\n\treturn ScrollListener.getScroll().scrollY;\n}\n\n/**\n * Set scrollTop cross browser\n * @private\n * @param {integer} px\n */\nfunction setScrollTop(px) {\n\tdocument.documentElement.scrollTop = document.body.scrollTop = px;\n\n\t// Throw a synthetic scroll event, which in turn can be caught by the ScrollListener class\n\tconst event = new CustomEvent('syntheticScroll', {\n\t\tbubbles: true,\n\t\tcancelable: false,\n\t\tdetail: null,\n\t\ttype: 'syntheticScroll'\n\t});\n\tdocument.dispatchEvent(event);\n}\n\n/**\n * Animate scrollTop to a given pixel value\n * @public\n * @param {integer} target\n */\nexport default function scrollTo(target) {\n\tspring\n\t\t.forceState({\n\t\t\tcurrent: getScrollTop(),\n\t\t\ttarget: getScrollTop()\n\t\t})\n\t\t.setTarget(target);\n}\n\n/**\n * Animate scrollTop a given distance\n * @public\n * @param {integer} distance\n */\nexport function scrollDistance(distance) {\n\tscrollTo(getScrollTop() + distance);\n}\n\n/**\n * Animate scrollTop to given element\n * @public\n * @param {DOMElement} element\n */\nexport function scrollToElement(element) {\n\tscrollTo(element.getBoundingClientRect().top);\n}\n\n/**\n * Getter for checking animation status\n * @public\n */\nexport function isAnimatingScroll() {\n\treturn !!spring._isAnimating;\n}\n","import raf from 'raf';\n\n\n\n/**\n * Default state\n */\nconst DEFAULT_STATE = {\n\tcurrent: 0,\n\ttarget: 0,\n\tvelocity: 0\n};\n\n/**\n * Abstract spring animation\n */\nexport default class Spring {\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor(settings, state) {\n\t\tthis._init(settings, state);\n\t}\n\n\t/**\n\t * Init\n\t * Set base settings for spring.\n\t * @param {object} settings\n\t * @property {function} callback - Callback to call each step\n\t * @property {number} acceleration - Stiffness / acceleration\n\t * @property {number} damper - Dampens velocity. should be between 0 and 1.\n\t * @property {number} margin - Determines target accuracy\n\t * @param {object} state\n\t * @property {number} current - Current position\n\t * @property {number} target - Target position\n\t * @property {number} velocity - Velocity\n\t */\n\t_init({ callback, acceleration = 0.2, damper = 0.85, id, margin = 0.0001 } = {}, state = {}) {\n\t\tthis._settings = {\n\t\t\tacceleration,\n\t\t\tcallback,\n\t\t\tdamper,\n\t\t\tid,\n\t\t\tmargin\n\t\t};\n\n\t\tthis._state = Object.assign({}, DEFAULT_STATE, state);\n\t}\n\n\t/**\n\t * Update state and let callbacks know\n\t * @private\n\t */\n\t_step() {\n\t\tconst { acceleration, callback, damper, margin } = this._settings;\n\t\tlet { current, target, velocity } = this._state;\n\n\t\t// If we've already reached the target, return without doing anything\n\t\tif (Math.abs(target - current) < margin) {\n\t\t\tthis.stop();\n\t\t\treturn;\n\t\t}\n\n\t\t// Do math to animate\n\t\tlet distance = target - current;\n\t\tvelocity *= 1 - damper;\n\t\tvelocity += distance * acceleration;\n\t\tcurrent += velocity;\n\n\t\t// Update internal state\n\t\tthis._state = {\n\t\t\tcurrent,\n\t\t\ttarget,\n\t\t\tvelocity\n\t\t};\n\n\t\t// Call callback if available\n\t\tif (callback) {\n\t\t\tcallback({ ...this._state });\n\t\t}\n\n\t\t// Animation loop / iteration\n\t\tthis._raf();\n\t}\n\n\t/**\n\t * Request animation frame\n\t * @private\n\t */\n\t_raf() {\n\t\tthis._isAnimating = true;\n\t\tthis._animationFrame = raf(() => this._step());\n\t}\n\n\t/**\n\t * Stop animation\n\t * @public\n\t */\n\tstop() {\n\t\tif (this._isAnimating) {\n\t\t\tclearTimeout(this._timeoutHandle);\n\t\t\traf.cancel(this._animationFrame);\n\t\t\tthis._isAnimating = false;\n\t\t}\n\t}\n\n\t/**\n\t * Reset Spring\n\t * @public\n\t */\n\treset(settings, state) {\n\t\tthis.stop();\n\n\t\tthis._init({\n\t\t\t...this._settings,\n\t\t\t...settings\n\t\t}, state);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Stop all animation and hard update internal state\n\t * @public\n\t * @param {object} state\n\t * @property {number} current - current position\n\t * @property {number} target - target position\n\t * @property {number} velocity - velocity\n\t */\n\tforceState(state) {\n\t\tthis.stop();\n\t\tthis._state = Object.assign({}, DEFAULT_STATE, this._state, state);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Set new target and start animation\n\t * @public\n\t * @param {number} target\n\t */\n\tsetTarget(target = 0) {\n\t\tif (target === this._state.target) {\n\t\t\treturn this;\n\t\t}\n\n\t\tthis._state = {\n\t\t\t...this._state,\n\t\t\ttarget\n\t\t};\n\n\t\tthis.start();\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Start spring\n\t * @public\n\t */\n\tstart() {\n\t\tif (!this._isAnimating) {\n\t\t\tthis._raf();\n\t\t}\n\n\t\treturn this;\n\t}\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlcm5penIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlcm5penIvbGliL01vZGVybml6ci5qcyIsIm5vZGVfbW9kdWxlcy9icm93c2Vybml6ci9saWIvTW9kZXJuaXpyUHJvdG8uanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlcm5penIvbGliL2NsYXNzZXMuanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlcm5penIvbGliL2NvbXB1dGVkU3R5bGUuanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlcm5penIvbGliL2NvbnRhaW5zLmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJuaXpyL2xpYi9jcmVhdGVFbGVtZW50LmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJuaXpyL2xpYi9jc3NUb0RPTS5qcyIsIm5vZGVfbW9kdWxlcy9icm93c2Vybml6ci9saWIvY3Nzb21QcmVmaXhlcy5qcyIsIm5vZGVfbW9kdWxlcy9icm93c2Vybml6ci9saWIvZG9jRWxlbWVudC5qcyIsIm5vZGVfbW9kdWxlcy9icm93c2Vybml6ci9saWIvZG9tUHJlZml4ZXMuanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlcm5penIvbGliL2RvbVRvQ1NTLmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJuaXpyL2xpYi9mbkJpbmQuanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlcm5penIvbGliL2dldEJvZHkuanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlcm5penIvbGliL2h0bWw1c2hpdi5qcyIsIm5vZGVfbW9kdWxlcy9icm93c2Vybml6ci9saWIvaW5qZWN0RWxlbWVudFdpdGhTdHlsZXMuanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlcm5penIvbGliL2lzLmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJuaXpyL2xpYi9pc1NWRy5qcyIsIm5vZGVfbW9kdWxlcy9icm93c2Vybml6ci9saWIvbVN0eWxlLmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJuaXpyL2xpYi9tb2RFbGVtLmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJuaXpyL2xpYi9uYXRpdmVUZXN0UHJvcHMuanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlcm5penIvbGliL29tUHJlZml4ZXMuanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlcm5penIvbGliL3ByZWZpeGVzLmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJuaXpyL2xpYi9zZXRDbGFzc2VzLmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJuaXpyL2xpYi90ZXN0QWxsUHJvcHMuanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlcm5penIvbGliL3Rlc3RET01Qcm9wcy5qcyIsIm5vZGVfbW9kdWxlcy9icm93c2Vybml6ci9saWIvdGVzdFByb3BzLmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJuaXpyL2xpYi90ZXN0UHJvcHNBbGwuanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlcm5penIvbGliL3Rlc3RSdW5uZXIuanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlcm5penIvbGliL3Rlc3RTdHlsZXMuanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlcm5penIvbGliL3Rlc3RzLmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJuaXpyL3Rlc3QvY3NzL2ZsZXhib3guanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlcm5penIvdGVzdC9jc3MvdHJhbnNmb3JtczNkLmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJuaXpyL3Rlc3QvY3NzL3RyYW5zaXRpb25zLmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJuaXpyL3Rlc3QvY3NzL3Z3dW5pdC5qcyIsIm5vZGVfbW9kdWxlcy9icm93c2Vybml6ci90ZXN0L3RvdWNoZXZlbnRzLmpzIiwibm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL2NsYXNzL2FkZENsYXNzLmpzIiwibm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL2NsYXNzL2hhc0NsYXNzLmpzIiwibm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL2NsYXNzL3JlbW92ZUNsYXNzLmpzIiwibm9kZV9tb2R1bGVzL3BlcmZvcm1hbmNlLW5vdy9saWIvcGVyZm9ybWFuY2Utbm93LmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9yYWYvaW5kZXguanMiLCJzcmMvc2NyaXB0L2RyYXdlci5qcyIsInNyYy9zY3JpcHQvaGVyby5qcyIsInNyYy9zY3JpcHQvc2NyaXB0LmpzIiwic3JjL3NjcmlwdC91dGlscy9jdXN0b20tZXZlbnQtcG9seWZpbGwuanMiLCJzcmMvc2NyaXB0L3V0aWxzL21vZGVybml6ci5qcyIsInNyYy9zY3JpcHQvdXRpbHMvcmVhZHkuanMiLCJzcmMvc2NyaXB0L3V0aWxzL3Njcm9sbC1saXN0ZW5lci5qcyIsInNyYy9zY3JpcHQvdXRpbHMvc2Nyb2xsLXRvLmpzIiwic3JjL3NjcmlwdC91dGlscy9zcHJpbmcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3REQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3BDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUNBOztBQUVEOzs7Ozs7Ozs7Ozs2QkFRVyxLLEVBQU87QUFDakIsUUFBSyxJQUFMO0FBQ0EsUUFBSyxNQUFMLEdBQWMsT0FBTyxNQUFQLENBQWMsRUFBZCxFQUFrQixhQUFsQixFQUFpQyxLQUFLLE1BQXRDLEVBQThDLEtBQTlDLENBQWQ7O0FBRUEsVUFBTyxJQUFQO0FBQ0E7O0FBRUQ7Ozs7Ozs7OzhCQUtzQjtBQUFBLE9BQVosTUFBWSx1RUFBSCxDQUFHOztBQUNyQixPQUFJLFdBQVcsS0FBSyxNQUFMLENBQVksTUFBM0IsRUFBbUM7QUFDbEMsV0FBTyxJQUFQO0FBQ0E7O0FBRUQsUUFBSyxNQUFMLGdCQUNJLEtBQUssTUFEVDtBQUVDO0FBRkQ7O0FBS0EsUUFBSyxLQUFMOztBQUVBLFVBQU8sSUFBUDtBQUNBOztBQUVEOzs7Ozs7OzBCQUlRO0FBQ1AsT0FBSSxDQUFDLEtBQUssWUFBVixFQUF3QjtBQUN2QixTQUFLLElBQUw7QUFDQTs7QUFFRCxVQUFPLElBQVA7QUFDQTs7Ozs7O2tCQXZKbUIsTSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJ2YXIgTW9kZXJuaXpyID0gcmVxdWlyZSgnLi9saWIvTW9kZXJuaXpyJyksXG4gICAgTW9kZXJuaXpyUHJvdG8gPSByZXF1aXJlKCcuL2xpYi9Nb2Rlcm5penJQcm90bycpLFxuICAgIGNsYXNzZXMgPSByZXF1aXJlKCcuL2xpYi9jbGFzc2VzJyksXG4gICAgdGVzdFJ1bm5lciA9IHJlcXVpcmUoJy4vbGliL3Rlc3RSdW5uZXInKSxcbiAgICBzZXRDbGFzc2VzID0gcmVxdWlyZSgnLi9saWIvc2V0Q2xhc3NlcycpO1xuXG4vLyBSdW4gZWFjaCB0ZXN0XG50ZXN0UnVubmVyKCk7XG5cbi8vIFJlbW92ZSB0aGUgXCJuby1qc1wiIGNsYXNzIGlmIGl0IGV4aXN0c1xuc2V0Q2xhc3NlcyhjbGFzc2VzKTtcblxuZGVsZXRlIE1vZGVybml6clByb3RvLmFkZFRlc3Q7XG5kZWxldGUgTW9kZXJuaXpyUHJvdG8uYWRkQXN5bmNUZXN0O1xuXG4vLyBSdW4gdGhlIHRoaW5ncyB0aGF0IGFyZSBzdXBwb3NlZCB0byBydW4gYWZ0ZXIgdGhlIHRlc3RzXG5mb3IgKHZhciBpID0gMDsgaSA8IE1vZGVybml6ci5fcS5sZW5ndGg7IGkrKykge1xuICBNb2Rlcm5penIuX3FbaV0oKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBNb2Rlcm5penI7XG4iLCJ2YXIgTW9kZXJuaXpyUHJvdG8gPSByZXF1aXJlKCcuL01vZGVybml6clByb3RvLmpzJyk7XG4gIC8vIEZha2Ugc29tZSBvZiBPYmplY3QuY3JlYXRlIHNvIHdlIGNhbiBmb3JjZSBub24gdGVzdCByZXN1bHRzIHRvIGJlIG5vbiBcIm93blwiIHByb3BlcnRpZXMuXG4gIHZhciBNb2Rlcm5penIgPSBmdW5jdGlvbigpIHt9O1xuICBNb2Rlcm5penIucHJvdG90eXBlID0gTW9kZXJuaXpyUHJvdG87XG5cbiAgLy8gTGVhayBtb2Rlcm5penIgZ2xvYmFsbHkgd2hlbiB5b3UgYHJlcXVpcmVgIGl0IHJhdGhlciB0aGFuIGZvcmNlIGl0IGhlcmUuXG4gIC8vIE92ZXJ3cml0ZSBuYW1lIHNvIGNvbnN0cnVjdG9yIG5hbWUgaXMgbmljZXIgOkRcbiAgTW9kZXJuaXpyID0gbmV3IE1vZGVybml6cigpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gTW9kZXJuaXpyO1xuXG4iLCJ2YXIgdGVzdHMgPSByZXF1aXJlKCcuL3Rlc3RzLmpzJyk7XG4gIC8qKlxuICAgKlxuICAgKiBNb2Rlcm5penJQcm90byBpcyB0aGUgY29uc3RydWN0b3IgZm9yIE1vZGVybml6clxuICAgKlxuICAgKiBAY2xhc3NcbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICovXG5cbiAgdmFyIE1vZGVybml6clByb3RvID0ge1xuICAgIC8vIFRoZSBjdXJyZW50IHZlcnNpb24sIGR1bW15XG4gICAgX3ZlcnNpb246ICczLjQuMCAoYnJvd3Nlcm5penIgMi4yLjApJyxcblxuICAgIC8vIEFueSBzZXR0aW5ncyB0aGF0IGRvbid0IHdvcmsgYXMgc2VwYXJhdGUgbW9kdWxlc1xuICAgIC8vIGNhbiBnbyBpbiBoZXJlIGFzIGNvbmZpZ3VyYXRpb24uXG4gICAgX2NvbmZpZzoge1xuICAgICAgJ2NsYXNzUHJlZml4JzogJycsXG4gICAgICAnZW5hYmxlQ2xhc3Nlcyc6IHRydWUsXG4gICAgICAnZW5hYmxlSlNDbGFzcyc6IHRydWUsXG4gICAgICAndXNlUHJlZml4ZXMnOiB0cnVlXG4gICAgfSxcblxuICAgIC8vIFF1ZXVlIG9mIHRlc3RzXG4gICAgX3E6IFtdLFxuXG4gICAgLy8gU3R1YiB0aGVzZSBmb3IgcGVvcGxlIHdobyBhcmUgbGlzdGVuaW5nXG4gICAgb246IGZ1bmN0aW9uKHRlc3QsIGNiKSB7XG4gICAgICAvLyBJIGRvbid0IHJlYWxseSB0aGluayBwZW9wbGUgc2hvdWxkIGRvIHRoaXMsIGJ1dCB3ZSBjYW5cbiAgICAgIC8vIHNhZmUgZ3VhcmQgaXQgYSBiaXQuXG4gICAgICAvLyAtLSBOT1RFOjogdGhpcyBnZXRzIFdBWSBvdmVycmlkZGVuIGluIHNyYy9hZGRUZXN0IGZvciBhY3R1YWwgYXN5bmMgdGVzdHMuXG4gICAgICAvLyBUaGlzIGlzIGluIGNhc2UgcGVvcGxlIGxpc3RlbiB0byBzeW5jaHJvbm91cyB0ZXN0cy4gSSB3b3VsZCBsZWF2ZSBpdCBvdXQsXG4gICAgICAvLyBidXQgdGhlIGNvZGUgdG8gKmRpc2FsbG93KiBzeW5jIHRlc3RzIGluIHRoZSByZWFsIHZlcnNpb24gb2YgdGhpc1xuICAgICAgLy8gZnVuY3Rpb24gaXMgYWN0dWFsbHkgbGFyZ2VyIHRoYW4gdGhpcy5cbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGNiKHNlbGZbdGVzdF0pO1xuICAgICAgfSwgMCk7XG4gICAgfSxcblxuICAgIGFkZFRlc3Q6IGZ1bmN0aW9uKG5hbWUsIGZuLCBvcHRpb25zKSB7XG4gICAgICB0ZXN0cy5wdXNoKHtuYW1lOiBuYW1lLCBmbjogZm4sIG9wdGlvbnM6IG9wdGlvbnN9KTtcbiAgICB9LFxuXG4gICAgYWRkQXN5bmNUZXN0OiBmdW5jdGlvbihmbikge1xuICAgICAgdGVzdHMucHVzaCh7bmFtZTogbnVsbCwgZm46IGZufSk7XG4gICAgfVxuICB9O1xuXG4gIG1vZHVsZS5leHBvcnRzID0gTW9kZXJuaXpyUHJvdG87XG5cbiIsIlxuICB2YXIgY2xhc3NlcyA9IFtdO1xuICBtb2R1bGUuZXhwb3J0cyA9IGNsYXNzZXM7XG5cbiIsIlxuXG4gIC8qKlxuICAgKiB3cmFwcGVyIGFyb3VuZCBnZXRDb21wdXRlZFN0eWxlLCB0byBmaXggaXNzdWVzIHdpdGggRmlyZWZveCByZXR1cm5pbmcgbnVsbCB3aGVuXG4gICAqIGNhbGxlZCBpbnNpZGUgb2YgYSBoaWRkZW4gaWZyYW1lXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gY29tcHV0ZWRTdHlsZVxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fFNWR0VsZW1lbnR9IC0gVGhlIGVsZW1lbnQgd2Ugd2FudCB0byBmaW5kIHRoZSBjb21wdXRlZCBzdHlsZXMgb2ZcbiAgICogQHBhcmFtIHtzdHJpbmd8bnVsbH0gW3BzZXVkb1NlbGVjdG9yXS0gQW4gb3B0aW9uYWwgcHNldWRvIGVsZW1lbnQgc2VsZWN0b3IgKGUuZy4gOmJlZm9yZSksIG9mIG51bGwgaWYgbm9uZVxuICAgKiBAcmV0dXJucyB7Q1NTU3R5bGVEZWNsYXJhdGlvbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gY29tcHV0ZWRTdHlsZShlbGVtLCBwc2V1ZG8sIHByb3ApIHtcbiAgICB2YXIgcmVzdWx0O1xuXG4gICAgaWYgKCdnZXRDb21wdXRlZFN0eWxlJyBpbiB3aW5kb3cpIHtcbiAgICAgIHJlc3VsdCA9IGdldENvbXB1dGVkU3R5bGUuY2FsbCh3aW5kb3csIGVsZW0sIHBzZXVkbyk7XG4gICAgICB2YXIgY29uc29sZSA9IHdpbmRvdy5jb25zb2xlO1xuXG4gICAgICBpZiAocmVzdWx0ICE9PSBudWxsKSB7XG4gICAgICAgIGlmIChwcm9wKSB7XG4gICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmdldFByb3BlcnR5VmFsdWUocHJvcCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjb25zb2xlKSB7XG4gICAgICAgICAgdmFyIG1ldGhvZCA9IGNvbnNvbGUuZXJyb3IgPyAnZXJyb3InIDogJ2xvZyc7XG4gICAgICAgICAgY29uc29sZVttZXRob2RdLmNhbGwoY29uc29sZSwgJ2dldENvbXB1dGVkU3R5bGUgcmV0dXJuaW5nIG51bGwsIGl0cyBwb3NzaWJsZSBtb2Rlcm5penIgdGVzdCByZXN1bHRzIGFyZSBpbmFjY3VyYXRlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ID0gIXBzZXVkbyAmJiBlbGVtLmN1cnJlbnRTdHlsZSAmJiBlbGVtLmN1cnJlbnRTdHlsZVtwcm9wXTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBjb21wdXRlZFN0eWxlO1xuXG4iLCJcblxuICAvKipcbiAgICogY29udGFpbnMgY2hlY2tzIHRvIHNlZSBpZiBhIHN0cmluZyBjb250YWlucyBhbm90aGVyIHN0cmluZ1xuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGNvbnRhaW5zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHdlIHdhbnQgdG8gY2hlY2sgZm9yIHN1YnN0cmluZ3NcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN1YnN0ciAtIFRoZSBzdWJzdHJpbmcgd2Ugd2FudCB0byBzZWFyY2ggdGhlIGZpcnN0IHN0cmluZyBmb3JcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNvbnRhaW5zKHN0ciwgc3Vic3RyKSB7XG4gICAgcmV0dXJuICEhfignJyArIHN0cikuaW5kZXhPZihzdWJzdHIpO1xuICB9XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBjb250YWlucztcblxuIiwidmFyIGlzU1ZHID0gcmVxdWlyZSgnLi9pc1NWRy5qcycpO1xuICAvKipcbiAgICogY3JlYXRlRWxlbWVudCBpcyBhIGNvbnZlbmllbmNlIHdyYXBwZXIgYXJvdW5kIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuIFNpbmNlIHdlXG4gICAqIHVzZSBjcmVhdGVFbGVtZW50IGFsbCBvdmVyIHRoZSBwbGFjZSwgdGhpcyBhbGxvd3MgZm9yIChzbGlnaHRseSkgc21hbGxlciBjb2RlXG4gICAqIGFzIHdlbGwgYXMgYWJzdHJhY3RpbmcgYXdheSBpc3N1ZXMgd2l0aCBjcmVhdGluZyBlbGVtZW50cyBpbiBjb250ZXh0cyBvdGhlciB0aGFuXG4gICAqIEhUTUwgZG9jdW1lbnRzIChlLmcuIFNWRyBkb2N1bWVudHMpLlxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRcbiAgICogQHJldHVybnMge0hUTUxFbGVtZW50fFNWR0VsZW1lbnR9IEFuIEhUTUwgb3IgU1ZHIGVsZW1lbnRcbiAgICovXG5cbiAgZnVuY3Rpb24gY3JlYXRlRWxlbWVudCgpIHtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2UgaW4gSUU3LCB3aGVyZSB0aGUgdHlwZSBvZiBjcmVhdGVFbGVtZW50IGlzIFwib2JqZWN0XCIuXG4gICAgICAvLyBGb3IgdGhpcyByZWFzb24sIHdlIGNhbm5vdCBjYWxsIGFwcGx5KCkgYXMgT2JqZWN0IGlzIG5vdCBhIEZ1bmN0aW9uLlxuICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYXJndW1lbnRzWzBdKTtcbiAgICB9IGVsc2UgaWYgKGlzU1ZHKSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TLmNhbGwoZG9jdW1lbnQsICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsIGFyZ3VtZW50c1swXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50LmFwcGx5KGRvY3VtZW50LCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIG1vZHVsZS5leHBvcnRzID0gY3JlYXRlRWxlbWVudDtcblxuIiwiXG4gIC8qKlxuICAgKiBjc3NUb0RPTSB0YWtlcyBhIGtlYmFiLWNhc2Ugc3RyaW5nIGFuZCBjb252ZXJ0cyBpdCB0byBjYW1lbENhc2VcbiAgICogZS5nLiBib3gtc2l6aW5nIC0+IGJveFNpemluZ1xuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGNzc1RvRE9NXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gU3RyaW5nIG5hbWUgb2Yga2ViYWItY2FzZSBwcm9wIHdlIHdhbnQgdG8gY29udmVydFxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY2FtZWxDYXNlIHZlcnNpb24gb2YgdGhlIHN1cHBsaWVkIG5hbWVcbiAgICovXG5cbiAgZnVuY3Rpb24gY3NzVG9ET00obmFtZSkge1xuICAgIHJldHVybiBuYW1lLnJlcGxhY2UoLyhbYS16XSktKFthLXpdKS9nLCBmdW5jdGlvbihzdHIsIG0xLCBtMikge1xuICAgICAgcmV0dXJuIG0xICsgbTIudG9VcHBlckNhc2UoKTtcbiAgICB9KS5yZXBsYWNlKC9eLS8sICcnKTtcbiAgfVxuICBtb2R1bGUuZXhwb3J0cyA9IGNzc1RvRE9NO1xuXG4iLCJ2YXIgTW9kZXJuaXpyUHJvdG8gPSByZXF1aXJlKCcuL01vZGVybml6clByb3RvLmpzJyk7XG52YXIgb21QcmVmaXhlcyA9IHJlcXVpcmUoJy4vb21QcmVmaXhlcy5qcycpO1xuICB2YXIgY3Nzb21QcmVmaXhlcyA9IChNb2Rlcm5penJQcm90by5fY29uZmlnLnVzZVByZWZpeGVzID8gb21QcmVmaXhlcy5zcGxpdCgnICcpIDogW10pO1xuICBNb2Rlcm5penJQcm90by5fY3Nzb21QcmVmaXhlcyA9IGNzc29tUHJlZml4ZXM7XG4gIG1vZHVsZS5leHBvcnRzID0gY3Nzb21QcmVmaXhlcztcblxuIiwiXG4gIC8qKlxuICAgKiBkb2NFbGVtZW50IGlzIGEgY29udmVuaWVuY2Ugd3JhcHBlciB0byBncmFiIHRoZSByb290IGVsZW1lbnQgb2YgdGhlIGRvY3VtZW50XG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR8U1ZHRWxlbWVudH0gVGhlIHJvb3QgZWxlbWVudCBvZiB0aGUgZG9jdW1lbnRcbiAgICovXG5cbiAgdmFyIGRvY0VsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIG1vZHVsZS5leHBvcnRzID0gZG9jRWxlbWVudDtcblxuIiwidmFyIE1vZGVybml6clByb3RvID0gcmVxdWlyZSgnLi9Nb2Rlcm5penJQcm90by5qcycpO1xudmFyIG9tUHJlZml4ZXMgPSByZXF1aXJlKCcuL29tUHJlZml4ZXMuanMnKTtcbiAgLyoqXG4gICAqIExpc3Qgb2YgSmF2YVNjcmlwdCBET00gdmFsdWVzIHVzZWQgZm9yIHRlc3RzXG4gICAqXG4gICAqIEBtZW1iZXJvZiBNb2Rlcm5penJcbiAgICogQG5hbWUgTW9kZXJuaXpyLl9kb21QcmVmaXhlc1xuICAgKiBAb3B0aW9uTmFtZSBNb2Rlcm5penIuX2RvbVByZWZpeGVzXG4gICAqIEBvcHRpb25Qcm9wIGRvbVByZWZpeGVzXG4gICAqIEBhY2Nlc3MgcHVibGljXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIE1vZGVybml6ci5fZG9tUHJlZml4ZXMgaXMgZXhhY3RseSB0aGUgc2FtZSBhcyBbX3ByZWZpeGVzXSgjbW9kZXJuaXpyLV9wcmVmaXhlcyksIGJ1dCByYXRoZXJcbiAgICogdGhhbiBrZWJhYi1jYXNlIHByb3BlcnRpZXMsIGFsbCBwcm9wZXJ0aWVzIGFyZSB0aGVpciBDYXBpdGFsaXplZCB2YXJpYW50XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci5fZG9tUHJlZml4ZXMgPT09IFsgXCJNb3pcIiwgXCJPXCIsIFwibXNcIiwgXCJXZWJraXRcIiBdO1xuICAgKiBgYGBcbiAgICovXG5cbiAgdmFyIGRvbVByZWZpeGVzID0gKE1vZGVybml6clByb3RvLl9jb25maWcudXNlUHJlZml4ZXMgPyBvbVByZWZpeGVzLnRvTG93ZXJDYXNlKCkuc3BsaXQoJyAnKSA6IFtdKTtcbiAgTW9kZXJuaXpyUHJvdG8uX2RvbVByZWZpeGVzID0gZG9tUHJlZml4ZXM7XG4gIG1vZHVsZS5leHBvcnRzID0gZG9tUHJlZml4ZXM7XG5cbiIsIlxuICAvKipcbiAgICogZG9tVG9DU1MgdGFrZXMgYSBjYW1lbENhc2Ugc3RyaW5nIGFuZCBjb252ZXJ0cyBpdCB0byBrZWJhYi1jYXNlXG4gICAqIGUuZy4gYm94U2l6aW5nIC0+IGJveC1zaXppbmdcbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBkb21Ub0NTU1xuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFN0cmluZyBuYW1lIG9mIGNhbWVsQ2FzZSBwcm9wIHdlIHdhbnQgdG8gY29udmVydFxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUga2ViYWItY2FzZSB2ZXJzaW9uIG9mIHRoZSBzdXBwbGllZCBuYW1lXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGRvbVRvQ1NTKG5hbWUpIHtcbiAgICByZXR1cm4gbmFtZS5yZXBsYWNlKC8oW0EtWl0pL2csIGZ1bmN0aW9uKHN0ciwgbTEpIHtcbiAgICAgIHJldHVybiAnLScgKyBtMS50b0xvd2VyQ2FzZSgpO1xuICAgIH0pLnJlcGxhY2UoL15tcy0vLCAnLW1zLScpO1xuICB9XG4gIG1vZHVsZS5leHBvcnRzID0gZG9tVG9DU1M7XG5cbiIsIlxuICAvKipcbiAgICogZm5CaW5kIGlzIGEgc3VwZXIgc21hbGwgW2JpbmRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Z1bmN0aW9uL2JpbmQpIHBvbHlmaWxsLlxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIGZuQmluZFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiAtIGEgZnVuY3Rpb24geW91IHdhbnQgdG8gY2hhbmdlIGB0aGlzYCByZWZlcmVuY2UgdG9cbiAgICogQHBhcmFtIHtvYmplY3R9IHRoYXQgLSB0aGUgYHRoaXNgIHlvdSB3YW50IHRvIGNhbGwgdGhlIGZ1bmN0aW9uIHdpdGhcbiAgICogQHJldHVybnMge2Z1bmN0aW9ufSBUaGUgd3JhcHBlZCB2ZXJzaW9uIG9mIHRoZSBzdXBwbGllZCBmdW5jdGlvblxuICAgKi9cblxuICBmdW5jdGlvbiBmbkJpbmQoZm4sIHRoYXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBmbkJpbmQ7XG5cbiIsInZhciBjcmVhdGVFbGVtZW50ID0gcmVxdWlyZSgnLi9jcmVhdGVFbGVtZW50LmpzJyk7XG52YXIgaXNTVkcgPSByZXF1aXJlKCcuL2lzU1ZHLmpzJyk7XG4gIC8qKlxuICAgKiBnZXRCb2R5IHJldHVybnMgdGhlIGJvZHkgb2YgYSBkb2N1bWVudCwgb3IgYW4gZWxlbWVudCB0aGF0IGNhbiBzdGFuZCBpbiBmb3JcbiAgICogdGhlIGJvZHkgaWYgYSByZWFsIGJvZHkgZG9lcyBub3QgZXhpc3RcbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBnZXRCb2R5XG4gICAqIEByZXR1cm5zIHtIVE1MRWxlbWVudHxTVkdFbGVtZW50fSBSZXR1cm5zIHRoZSByZWFsIGJvZHkgb2YgYSBkb2N1bWVudCwgb3IgYW5cbiAgICogYXJ0aWZpY2lhbGx5IGNyZWF0ZWQgZWxlbWVudCB0aGF0IHN0YW5kcyBpbiBmb3IgdGhlIGJvZHlcbiAgICovXG5cbiAgZnVuY3Rpb24gZ2V0Qm9keSgpIHtcbiAgICAvLyBBZnRlciBwYWdlIGxvYWQgaW5qZWN0aW5nIGEgZmFrZSBib2R5IGRvZXNuJ3Qgd29yayBzbyBjaGVjayBpZiBib2R5IGV4aXN0c1xuICAgIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcblxuICAgIGlmICghYm9keSkge1xuICAgICAgLy8gQ2FuJ3QgdXNlIHRoZSByZWFsIGJvZHkgY3JlYXRlIGEgZmFrZSBvbmUuXG4gICAgICBib2R5ID0gY3JlYXRlRWxlbWVudChpc1NWRyA/ICdzdmcnIDogJ2JvZHknKTtcbiAgICAgIGJvZHkuZmFrZSA9IHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJvZHk7XG4gIH1cblxuICBtb2R1bGUuZXhwb3J0cyA9IGdldEJvZHk7XG5cbiIsInZhciBpc1NWRyA9IHJlcXVpcmUoJy4vaXNTVkcuanMnKTtcbi8qKlxuICAqIEBvcHRpb25OYW1lIGh0bWw1c2hpdlxuICAqIEBvcHRpb25Qcm9wIGh0bWw1c2hpdlxuICAqL1xuXG4gIC8vIFRha2UgdGhlIGh0bWw1IHZhcmlhYmxlIG91dCBvZiB0aGUgaHRtbDVzaGl2IHNjb3BlIHNvIHdlIGNhbiByZXR1cm4gaXQuXG4gIHZhciBodG1sNTtcbiAgaWYgKCFpc1NWRykge1xuICAgIC8qKlxuICAgICAqIEBwcmVzZXJ2ZSBIVE1MNSBTaGl2IDMuNy4zIHwgQGFmYXJrYXMgQGpkYWx0b24gQGpvbl9uZWFsIEByZW0gfCBNSVQvR1BMMiBMaWNlbnNlZFxuICAgICAqL1xuICAgIDsoZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCkge1xuICAgICAgLyoqIHZlcnNpb24gKi9cbiAgICAgIHZhciB2ZXJzaW9uID0gJzMuNy4zJztcblxuICAgICAgLyoqIFByZXNldCBvcHRpb25zICovXG4gICAgICB2YXIgb3B0aW9ucyA9IHdpbmRvdy5odG1sNSB8fCB7fTtcblxuICAgICAgLyoqIFVzZWQgdG8gc2tpcCBwcm9ibGVtIGVsZW1lbnRzICovXG4gICAgICB2YXIgcmVTa2lwID0gL148fF4oPzpidXR0b258bWFwfHNlbGVjdHx0ZXh0YXJlYXxvYmplY3R8aWZyYW1lfG9wdGlvbnxvcHRncm91cCkkL2k7XG5cbiAgICAgIC8qKiBOb3QgYWxsIGVsZW1lbnRzIGNhbiBiZSBjbG9uZWQgaW4gSUUgKiovXG4gICAgICB2YXIgc2F2ZUNsb25lcyA9IC9eKD86YXxifGNvZGV8ZGl2fGZpZWxkc2V0fGgxfGgyfGgzfGg0fGg1fGg2fGl8bGFiZWx8bGl8b2x8cHxxfHNwYW58c3Ryb25nfHN0eWxlfHRhYmxlfHRib2R5fHRkfHRofHRyfHVsKSQvaTtcblxuICAgICAgLyoqIERldGVjdCB3aGV0aGVyIHRoZSBicm93c2VyIHN1cHBvcnRzIGRlZmF1bHQgaHRtbDUgc3R5bGVzICovXG4gICAgICB2YXIgc3VwcG9ydHNIdG1sNVN0eWxlcztcblxuICAgICAgLyoqIE5hbWUgb2YgdGhlIGV4cGFuZG8sIHRvIHdvcmsgd2l0aCBtdWx0aXBsZSBkb2N1bWVudHMgb3IgdG8gcmUtc2hpdiBvbmUgZG9jdW1lbnQgKi9cbiAgICAgIHZhciBleHBhbmRvID0gJ19odG1sNXNoaXYnO1xuXG4gICAgICAvKiogVGhlIGlkIGZvciB0aGUgdGhlIGRvY3VtZW50cyBleHBhbmRvICovXG4gICAgICB2YXIgZXhwYW5JRCA9IDA7XG5cbiAgICAgIC8qKiBDYWNoZWQgZGF0YSBmb3IgZWFjaCBkb2N1bWVudCAqL1xuICAgICAgdmFyIGV4cGFuZG9EYXRhID0ge307XG5cbiAgICAgIC8qKiBEZXRlY3Qgd2hldGhlciB0aGUgYnJvd3NlciBzdXBwb3J0cyB1bmtub3duIGVsZW1lbnRzICovXG4gICAgICB2YXIgc3VwcG9ydHNVbmtub3duRWxlbWVudHM7XG5cbiAgICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICBhLmlubmVySFRNTCA9ICc8eHl6PjwveHl6Pic7XG4gICAgICAgICAgLy9pZiB0aGUgaGlkZGVuIHByb3BlcnR5IGlzIGltcGxlbWVudGVkIHdlIGNhbiBhc3N1bWUsIHRoYXQgdGhlIGJyb3dzZXIgc3VwcG9ydHMgYmFzaWMgSFRNTDUgU3R5bGVzXG4gICAgICAgICAgc3VwcG9ydHNIdG1sNVN0eWxlcyA9ICgnaGlkZGVuJyBpbiBhKTtcblxuICAgICAgICAgIHN1cHBvcnRzVW5rbm93bkVsZW1lbnRzID0gYS5jaGlsZE5vZGVzLmxlbmd0aCA9PSAxIHx8IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIGFzc2lnbiBhIGZhbHNlIHBvc2l0aXZlIGlmIHVuYWJsZSB0byBzaGl2XG4gICAgICAgICAgICAoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCkoJ2EnKTtcbiAgICAgICAgICAgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgdHlwZW9mIGZyYWcuY2xvbmVOb2RlID09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICAgICAgdHlwZW9mIGZyYWcuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCA9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgICAgIHR5cGVvZiBmcmFnLmNyZWF0ZUVsZW1lbnQgPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSgpKTtcbiAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgLy8gYXNzaWduIGEgZmFsc2UgcG9zaXRpdmUgaWYgZGV0ZWN0aW9uIGZhaWxzID0+IHVuYWJsZSB0byBzaGl2XG4gICAgICAgICAgc3VwcG9ydHNIdG1sNVN0eWxlcyA9IHRydWU7XG4gICAgICAgICAgc3VwcG9ydHNVbmtub3duRWxlbWVudHMgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgIH0oKSk7XG5cbiAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZXMgYSBzdHlsZSBzaGVldCB3aXRoIHRoZSBnaXZlbiBDU1MgdGV4dCBhbmQgYWRkcyBpdCB0byB0aGUgZG9jdW1lbnQuXG4gICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICogQHBhcmFtIHtEb2N1bWVudH0gb3duZXJEb2N1bWVudCBUaGUgZG9jdW1lbnQuXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gY3NzVGV4dCBUaGUgQ1NTIHRleHQuXG4gICAgICAgKiBAcmV0dXJucyB7U3R5bGVTaGVldH0gVGhlIHN0eWxlIGVsZW1lbnQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGFkZFN0eWxlU2hlZXQob3duZXJEb2N1bWVudCwgY3NzVGV4dCkge1xuICAgICAgICB2YXIgcCA9IG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpLFxuICAgICAgICAgIHBhcmVudCA9IG93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXSB8fCBvd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuICAgICAgICBwLmlubmVySFRNTCA9ICd4PHN0eWxlPicgKyBjc3NUZXh0ICsgJzwvc3R5bGU+JztcbiAgICAgICAgcmV0dXJuIHBhcmVudC5pbnNlcnRCZWZvcmUocC5sYXN0Q2hpbGQsIHBhcmVudC5maXJzdENoaWxkKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiBgaHRtbDUuZWxlbWVudHNgIGFzIGFuIGFycmF5LlxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqIEByZXR1cm5zIHtBcnJheX0gQW4gYXJyYXkgb2Ygc2hpdmVkIGVsZW1lbnQgbm9kZSBuYW1lcy5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gZ2V0RWxlbWVudHMoKSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IGh0bWw1LmVsZW1lbnRzO1xuICAgICAgICByZXR1cm4gdHlwZW9mIGVsZW1lbnRzID09ICdzdHJpbmcnID8gZWxlbWVudHMuc3BsaXQoJyAnKSA6IGVsZW1lbnRzO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEV4dGVuZHMgdGhlIGJ1aWx0LWluIGxpc3Qgb2YgaHRtbDUgZWxlbWVudHNcbiAgICAgICAqIEBtZW1iZXJPZiBodG1sNVxuICAgICAgICogQHBhcmFtIHtTdHJpbmd8QXJyYXl9IG5ld0VsZW1lbnRzIHdoaXRlc3BhY2Ugc2VwYXJhdGVkIGxpc3Qgb3IgYXJyYXkgb2YgbmV3IGVsZW1lbnQgbmFtZXMgdG8gc2hpdlxuICAgICAgICogQHBhcmFtIHtEb2N1bWVudH0gb3duZXJEb2N1bWVudCBUaGUgY29udGV4dCBkb2N1bWVudC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gYWRkRWxlbWVudHMobmV3RWxlbWVudHMsIG93bmVyRG9jdW1lbnQpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gaHRtbDUuZWxlbWVudHM7XG4gICAgICAgIGlmKHR5cGVvZiBlbGVtZW50cyAhPSAnc3RyaW5nJyl7XG4gICAgICAgICAgZWxlbWVudHMgPSBlbGVtZW50cy5qb2luKCcgJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYodHlwZW9mIG5ld0VsZW1lbnRzICE9ICdzdHJpbmcnKXtcbiAgICAgICAgICBuZXdFbGVtZW50cyA9IG5ld0VsZW1lbnRzLmpvaW4oJyAnKTtcbiAgICAgICAgfVxuICAgICAgICBodG1sNS5lbGVtZW50cyA9IGVsZW1lbnRzICsnICcrIG5ld0VsZW1lbnRzO1xuICAgICAgICBzaGl2RG9jdW1lbnQob3duZXJEb2N1bWVudCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmV0dXJucyB0aGUgZGF0YSBhc3NvY2lhdGVkIHRvIHRoZSBnaXZlbiBkb2N1bWVudFxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqIEBwYXJhbSB7RG9jdW1lbnR9IG93bmVyRG9jdW1lbnQgVGhlIGRvY3VtZW50LlxuICAgICAgICogQHJldHVybnMge09iamVjdH0gQW4gb2JqZWN0IG9mIGRhdGEuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGdldEV4cGFuZG9EYXRhKG93bmVyRG9jdW1lbnQpIHtcbiAgICAgICAgdmFyIGRhdGEgPSBleHBhbmRvRGF0YVtvd25lckRvY3VtZW50W2V4cGFuZG9dXTtcbiAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgZGF0YSA9IHt9O1xuICAgICAgICAgIGV4cGFuSUQrKztcbiAgICAgICAgICBvd25lckRvY3VtZW50W2V4cGFuZG9dID0gZXhwYW5JRDtcbiAgICAgICAgICBleHBhbmRvRGF0YVtleHBhbklEXSA9IGRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogcmV0dXJucyBhIHNoaXZlZCBlbGVtZW50IGZvciB0aGUgZ2l2ZW4gbm9kZU5hbWUgYW5kIGRvY3VtZW50XG4gICAgICAgKiBAbWVtYmVyT2YgaHRtbDVcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBub2RlTmFtZSBuYW1lIG9mIHRoZSBlbGVtZW50XG4gICAgICAgKiBAcGFyYW0ge0RvY3VtZW50fERvY3VtZW50RnJhZ21lbnR9IG93bmVyRG9jdW1lbnQgVGhlIGNvbnRleHQgZG9jdW1lbnQuXG4gICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgc2hpdmVkIGVsZW1lbnQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQobm9kZU5hbWUsIG93bmVyRG9jdW1lbnQsIGRhdGEpe1xuICAgICAgICBpZiAoIW93bmVyRG9jdW1lbnQpIHtcbiAgICAgICAgICBvd25lckRvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYoc3VwcG9ydHNVbmtub3duRWxlbWVudHMpe1xuICAgICAgICAgIHJldHVybiBvd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgIGRhdGEgPSBnZXRFeHBhbmRvRGF0YShvd25lckRvY3VtZW50KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbm9kZTtcblxuICAgICAgICBpZiAoZGF0YS5jYWNoZVtub2RlTmFtZV0pIHtcbiAgICAgICAgICBub2RlID0gZGF0YS5jYWNoZVtub2RlTmFtZV0uY2xvbmVOb2RlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoc2F2ZUNsb25lcy50ZXN0KG5vZGVOYW1lKSkge1xuICAgICAgICAgIG5vZGUgPSAoZGF0YS5jYWNoZVtub2RlTmFtZV0gPSBkYXRhLmNyZWF0ZUVsZW0obm9kZU5hbWUpKS5jbG9uZU5vZGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub2RlID0gZGF0YS5jcmVhdGVFbGVtKG5vZGVOYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEF2b2lkIGFkZGluZyBzb21lIGVsZW1lbnRzIHRvIGZyYWdtZW50cyBpbiBJRSA8IDkgYmVjYXVzZVxuICAgICAgICAvLyAqIEF0dHJpYnV0ZXMgbGlrZSBgbmFtZWAgb3IgYHR5cGVgIGNhbm5vdCBiZSBzZXQvY2hhbmdlZCBvbmNlIGFuIGVsZW1lbnRcbiAgICAgICAgLy8gICBpcyBpbnNlcnRlZCBpbnRvIGEgZG9jdW1lbnQvZnJhZ21lbnRcbiAgICAgICAgLy8gKiBMaW5rIGVsZW1lbnRzIHdpdGggYHNyY2AgYXR0cmlidXRlcyB0aGF0IGFyZSBpbmFjY2Vzc2libGUsIGFzIHdpdGhcbiAgICAgICAgLy8gICBhIDQwMyByZXNwb25zZSwgd2lsbCBjYXVzZSB0aGUgdGFiL3dpbmRvdyB0byBjcmFzaFxuICAgICAgICAvLyAqIFNjcmlwdCBlbGVtZW50cyBhcHBlbmRlZCB0byBmcmFnbWVudHMgd2lsbCBleGVjdXRlIHdoZW4gdGhlaXIgYHNyY2BcbiAgICAgICAgLy8gICBvciBgdGV4dGAgcHJvcGVydHkgaXMgc2V0XG4gICAgICAgIHJldHVybiBub2RlLmNhbkhhdmVDaGlsZHJlbiAmJiAhcmVTa2lwLnRlc3Qobm9kZU5hbWUpICYmICFub2RlLnRhZ1VybiA/IGRhdGEuZnJhZy5hcHBlbmRDaGlsZChub2RlKSA6IG5vZGU7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogcmV0dXJucyBhIHNoaXZlZCBEb2N1bWVudEZyYWdtZW50IGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnRcbiAgICAgICAqIEBtZW1iZXJPZiBodG1sNVxuICAgICAgICogQHBhcmFtIHtEb2N1bWVudH0gb3duZXJEb2N1bWVudCBUaGUgY29udGV4dCBkb2N1bWVudC5cbiAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBzaGl2ZWQgRG9jdW1lbnRGcmFnbWVudC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gY3JlYXRlRG9jdW1lbnRGcmFnbWVudChvd25lckRvY3VtZW50LCBkYXRhKXtcbiAgICAgICAgaWYgKCFvd25lckRvY3VtZW50KSB7XG4gICAgICAgICAgb3duZXJEb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmKHN1cHBvcnRzVW5rbm93bkVsZW1lbnRzKXtcbiAgICAgICAgICByZXR1cm4gb3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgZGF0YSA9IGRhdGEgfHwgZ2V0RXhwYW5kb0RhdGEob3duZXJEb2N1bWVudCk7XG4gICAgICAgIHZhciBjbG9uZSA9IGRhdGEuZnJhZy5jbG9uZU5vZGUoKSxcbiAgICAgICAgICBpID0gMCxcbiAgICAgICAgICBlbGVtcyA9IGdldEVsZW1lbnRzKCksXG4gICAgICAgICAgbCA9IGVsZW1zLmxlbmd0aDtcbiAgICAgICAgZm9yKDtpPGw7aSsrKXtcbiAgICAgICAgICBjbG9uZS5jcmVhdGVFbGVtZW50KGVsZW1zW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xvbmU7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2hpdnMgdGhlIGBjcmVhdGVFbGVtZW50YCBhbmQgYGNyZWF0ZURvY3VtZW50RnJhZ21lbnRgIG1ldGhvZHMgb2YgdGhlIGRvY3VtZW50LlxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqIEBwYXJhbSB7RG9jdW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gb3duZXJEb2N1bWVudCBUaGUgZG9jdW1lbnQuXG4gICAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSBvZiB0aGUgZG9jdW1lbnQuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIHNoaXZNZXRob2RzKG93bmVyRG9jdW1lbnQsIGRhdGEpIHtcbiAgICAgICAgaWYgKCFkYXRhLmNhY2hlKSB7XG4gICAgICAgICAgZGF0YS5jYWNoZSA9IHt9O1xuICAgICAgICAgIGRhdGEuY3JlYXRlRWxlbSA9IG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudDtcbiAgICAgICAgICBkYXRhLmNyZWF0ZUZyYWcgPSBvd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQ7XG4gICAgICAgICAgZGF0YS5mcmFnID0gZGF0YS5jcmVhdGVGcmFnKCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uKG5vZGVOYW1lKSB7XG4gICAgICAgICAgLy9hYm9ydCBzaGl2XG4gICAgICAgICAgaWYgKCFodG1sNS5zaGl2TWV0aG9kcykge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEuY3JlYXRlRWxlbShub2RlTmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KG5vZGVOYW1lLCBvd25lckRvY3VtZW50LCBkYXRhKTtcbiAgICAgICAgfTtcblxuICAgICAgICBvd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQgPSBGdW5jdGlvbignaCxmJywgJ3JldHVybiBmdW5jdGlvbigpeycgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmFyIG49Zi5jbG9uZU5vZGUoKSxjPW4uY3JlYXRlRWxlbWVudDsnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2guc2hpdk1ldGhvZHMmJignICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdW5yb2xsIHRoZSBgY3JlYXRlRWxlbWVudGAgY2FsbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0RWxlbWVudHMoKS5qb2luKCkucmVwbGFjZSgvW1xcd1xcLTpdKy9nLCBmdW5jdGlvbihub2RlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuY3JlYXRlRWxlbShub2RlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5mcmFnLmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnYyhcIicgKyBub2RlTmFtZSArICdcIiknO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSArXG4gICAgICAgICAgJyk7cmV0dXJuIG59J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkoaHRtbDUsIGRhdGEuZnJhZyk7XG4gICAgICB9XG5cbiAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAvKipcbiAgICAgICAqIFNoaXZzIHRoZSBnaXZlbiBkb2N1bWVudC5cbiAgICAgICAqIEBtZW1iZXJPZiBodG1sNVxuICAgICAgICogQHBhcmFtIHtEb2N1bWVudH0gb3duZXJEb2N1bWVudCBUaGUgZG9jdW1lbnQgdG8gc2hpdi5cbiAgICAgICAqIEByZXR1cm5zIHtEb2N1bWVudH0gVGhlIHNoaXZlZCBkb2N1bWVudC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gc2hpdkRvY3VtZW50KG93bmVyRG9jdW1lbnQpIHtcbiAgICAgICAgaWYgKCFvd25lckRvY3VtZW50KSB7XG4gICAgICAgICAgb3duZXJEb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICB9XG4gICAgICAgIHZhciBkYXRhID0gZ2V0RXhwYW5kb0RhdGEob3duZXJEb2N1bWVudCk7XG5cbiAgICAgICAgaWYgKGh0bWw1LnNoaXZDU1MgJiYgIXN1cHBvcnRzSHRtbDVTdHlsZXMgJiYgIWRhdGEuaGFzQ1NTKSB7XG4gICAgICAgICAgZGF0YS5oYXNDU1MgPSAhIWFkZFN0eWxlU2hlZXQob3duZXJEb2N1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3JyZWN0cyBibG9jayBkaXNwbGF5IG5vdCBkZWZpbmVkIGluIElFNi83LzgvOVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhcnRpY2xlLGFzaWRlLGRpYWxvZyxmaWdjYXB0aW9uLGZpZ3VyZSxmb290ZXIsaGVhZGVyLGhncm91cCxtYWluLG5hdixzZWN0aW9ue2Rpc3BsYXk6YmxvY2t9JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkcyBzdHlsaW5nIG5vdCBwcmVzZW50IGluIElFNi83LzgvOVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtYXJre2JhY2tncm91bmQ6I0ZGMDtjb2xvcjojMDAwfScgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhpZGVzIG5vbi1yZW5kZXJlZCBlbGVtZW50c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0ZW1wbGF0ZXtkaXNwbGF5Om5vbmV9J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXN1cHBvcnRzVW5rbm93bkVsZW1lbnRzKSB7XG4gICAgICAgICAgc2hpdk1ldGhvZHMob3duZXJEb2N1bWVudCwgZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG93bmVyRG9jdW1lbnQ7XG4gICAgICB9XG5cbiAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAvKipcbiAgICAgICAqIFRoZSBgaHRtbDVgIG9iamVjdCBpcyBleHBvc2VkIHNvIHRoYXQgbW9yZSBlbGVtZW50cyBjYW4gYmUgc2hpdmVkIGFuZFxuICAgICAgICogZXhpc3Rpbmcgc2hpdmluZyBjYW4gYmUgZGV0ZWN0ZWQgb24gaWZyYW1lcy5cbiAgICAgICAqIEB0eXBlIE9iamVjdFxuICAgICAgICogQGV4YW1wbGVcbiAgICAgICAqXG4gICAgICAgKiAvLyBvcHRpb25zIGNhbiBiZSBjaGFuZ2VkIGJlZm9yZSB0aGUgc2NyaXB0IGlzIGluY2x1ZGVkXG4gICAgICAgKiBodG1sNSA9IHsgJ2VsZW1lbnRzJzogJ21hcmsgc2VjdGlvbicsICdzaGl2Q1NTJzogZmFsc2UsICdzaGl2TWV0aG9kcyc6IGZhbHNlIH07XG4gICAgICAgKi9cbiAgICAgIHZhciBodG1sNSA9IHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQW4gYXJyYXkgb3Igc3BhY2Ugc2VwYXJhdGVkIHN0cmluZyBvZiBub2RlIG5hbWVzIG9mIHRoZSBlbGVtZW50cyB0byBzaGl2LlxuICAgICAgICAgKiBAbWVtYmVyT2YgaHRtbDVcbiAgICAgICAgICogQHR5cGUgQXJyYXl8U3RyaW5nXG4gICAgICAgICAqL1xuICAgICAgICAnZWxlbWVudHMnOiBvcHRpb25zLmVsZW1lbnRzIHx8ICdhYmJyIGFydGljbGUgYXNpZGUgYXVkaW8gYmRpIGNhbnZhcyBkYXRhIGRhdGFsaXN0IGRldGFpbHMgZGlhbG9nIGZpZ2NhcHRpb24gZmlndXJlIGZvb3RlciBoZWFkZXIgaGdyb3VwIG1haW4gbWFyayBtZXRlciBuYXYgb3V0cHV0IHBpY3R1cmUgcHJvZ3Jlc3Mgc2VjdGlvbiBzdW1tYXJ5IHRlbXBsYXRlIHRpbWUgdmlkZW8nLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjdXJyZW50IHZlcnNpb24gb2YgaHRtbDVzaGl2XG4gICAgICAgICAqL1xuICAgICAgICAndmVyc2lvbic6IHZlcnNpb24sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZmxhZyB0byBpbmRpY2F0ZSB0aGF0IHRoZSBIVE1MNSBzdHlsZSBzaGVldCBzaG91bGQgYmUgaW5zZXJ0ZWQuXG4gICAgICAgICAqIEBtZW1iZXJPZiBodG1sNVxuICAgICAgICAgKiBAdHlwZSBCb29sZWFuXG4gICAgICAgICAqL1xuICAgICAgICAnc2hpdkNTUyc6IChvcHRpb25zLnNoaXZDU1MgIT09IGZhbHNlKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogSXMgZXF1YWwgdG8gdHJ1ZSBpZiBhIGJyb3dzZXIgc3VwcG9ydHMgY3JlYXRpbmcgdW5rbm93bi9IVE1MNSBlbGVtZW50c1xuICAgICAgICAgKiBAbWVtYmVyT2YgaHRtbDVcbiAgICAgICAgICogQHR5cGUgYm9vbGVhblxuICAgICAgICAgKi9cbiAgICAgICAgJ3N1cHBvcnRzVW5rbm93bkVsZW1lbnRzJzogc3VwcG9ydHNVbmtub3duRWxlbWVudHMsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZmxhZyB0byBpbmRpY2F0ZSB0aGF0IHRoZSBkb2N1bWVudCdzIGBjcmVhdGVFbGVtZW50YCBhbmQgYGNyZWF0ZURvY3VtZW50RnJhZ21lbnRgXG4gICAgICAgICAqIG1ldGhvZHMgc2hvdWxkIGJlIG92ZXJ3cml0dGVuLlxuICAgICAgICAgKiBAbWVtYmVyT2YgaHRtbDVcbiAgICAgICAgICogQHR5cGUgQm9vbGVhblxuICAgICAgICAgKi9cbiAgICAgICAgJ3NoaXZNZXRob2RzJzogKG9wdGlvbnMuc2hpdk1ldGhvZHMgIT09IGZhbHNlKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBzdHJpbmcgdG8gZGVzY3JpYmUgdGhlIHR5cGUgb2YgYGh0bWw1YCBvYmplY3QgKFwiZGVmYXVsdFwiIG9yIFwiZGVmYXVsdCBwcmludFwiKS5cbiAgICAgICAgICogQG1lbWJlck9mIGh0bWw1XG4gICAgICAgICAqIEB0eXBlIFN0cmluZ1xuICAgICAgICAgKi9cbiAgICAgICAgJ3R5cGUnOiAnZGVmYXVsdCcsXG5cbiAgICAgICAgLy8gc2hpdnMgdGhlIGRvY3VtZW50IGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIGBodG1sNWAgb2JqZWN0IG9wdGlvbnNcbiAgICAgICAgJ3NoaXZEb2N1bWVudCc6IHNoaXZEb2N1bWVudCxcblxuICAgICAgICAvL2NyZWF0ZXMgYSBzaGl2ZWQgZWxlbWVudFxuICAgICAgICBjcmVhdGVFbGVtZW50OiBjcmVhdGVFbGVtZW50LFxuXG4gICAgICAgIC8vY3JlYXRlcyBhIHNoaXZlZCBkb2N1bWVudEZyYWdtZW50XG4gICAgICAgIGNyZWF0ZURvY3VtZW50RnJhZ21lbnQ6IGNyZWF0ZURvY3VtZW50RnJhZ21lbnQsXG5cbiAgICAgICAgLy9leHRlbmRzIGxpc3Qgb2YgZWxlbWVudHNcbiAgICAgICAgYWRkRWxlbWVudHM6IGFkZEVsZW1lbnRzXG4gICAgICB9O1xuXG4gICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgICAgLy8gZXhwb3NlIGh0bWw1XG4gICAgICB3aW5kb3cuaHRtbDUgPSBodG1sNTtcblxuICAgICAgLy8gc2hpdiB0aGUgZG9jdW1lbnRcbiAgICAgIHNoaXZEb2N1bWVudChkb2N1bWVudCk7XG5cbiAgICAgIGlmKHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpe1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGh0bWw1O1xuICAgICAgfVxuXG4gICAgfSh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsIGRvY3VtZW50KSk7XG4gIH1cbiAgbW9kdWxlLmV4cG9ydHMgPSBodG1sNTtcblxuIiwidmFyIE1vZGVybml6clByb3RvID0gcmVxdWlyZSgnLi9Nb2Rlcm5penJQcm90by5qcycpO1xudmFyIGRvY0VsZW1lbnQgPSByZXF1aXJlKCcuL2RvY0VsZW1lbnQuanMnKTtcbnZhciBjcmVhdGVFbGVtZW50ID0gcmVxdWlyZSgnLi9jcmVhdGVFbGVtZW50LmpzJyk7XG52YXIgZ2V0Qm9keSA9IHJlcXVpcmUoJy4vZ2V0Qm9keS5qcycpO1xuICAvKipcbiAgICogaW5qZWN0RWxlbWVudFdpdGhTdHlsZXMgaW5qZWN0cyBhbiBlbGVtZW50IHdpdGggc3R5bGUgZWxlbWVudCBhbmQgc29tZSBDU1MgcnVsZXNcbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBpbmplY3RFbGVtZW50V2l0aFN0eWxlc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gcnVsZSAtIFN0cmluZyByZXByZXNlbnRpbmcgYSBjc3MgcnVsZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIEEgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIHRvIHRlc3QgdGhlIGluamVjdGVkIGVsZW1lbnRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtub2Rlc10gLSBBbiBpbnRlZ2VyIHJlcHJlc2VudGluZyB0aGUgbnVtYmVyIG9mIGFkZGl0aW9uYWwgbm9kZXMgeW91IHdhbnQgaW5qZWN0ZWRcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gW3Rlc3RuYW1lc10gLSBBbiBhcnJheSBvZiBzdHJpbmdzIHRoYXQgYXJlIHVzZWQgYXMgaWRzIGZvciB0aGUgYWRkaXRpb25hbCBub2Rlc1xuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gaW5qZWN0RWxlbWVudFdpdGhTdHlsZXMocnVsZSwgY2FsbGJhY2ssIG5vZGVzLCB0ZXN0bmFtZXMpIHtcbiAgICB2YXIgbW9kID0gJ21vZGVybml6cic7XG4gICAgdmFyIHN0eWxlO1xuICAgIHZhciByZXQ7XG4gICAgdmFyIG5vZGU7XG4gICAgdmFyIGRvY092ZXJmbG93O1xuICAgIHZhciBkaXYgPSBjcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB2YXIgYm9keSA9IGdldEJvZHkoKTtcblxuICAgIGlmIChwYXJzZUludChub2RlcywgMTApKSB7XG4gICAgICAvLyBJbiBvcmRlciBub3QgdG8gZ2l2ZSBmYWxzZSBwb3NpdGl2ZXMgd2UgY3JlYXRlIGEgbm9kZSBmb3IgZWFjaCB0ZXN0XG4gICAgICAvLyBUaGlzIGFsc28gYWxsb3dzIHRoZSBtZXRob2QgdG8gc2NhbGUgZm9yIHVuc3BlY2lmaWVkIHVzZXNcbiAgICAgIHdoaWxlIChub2Rlcy0tKSB7XG4gICAgICAgIG5vZGUgPSBjcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgbm9kZS5pZCA9IHRlc3RuYW1lcyA/IHRlc3RuYW1lc1tub2Rlc10gOiBtb2QgKyAobm9kZXMgKyAxKTtcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN0eWxlID0gY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZS50eXBlID0gJ3RleHQvY3NzJztcbiAgICBzdHlsZS5pZCA9ICdzJyArIG1vZDtcblxuICAgIC8vIElFNiB3aWxsIGZhbHNlIHBvc2l0aXZlIG9uIHNvbWUgdGVzdHMgZHVlIHRvIHRoZSBzdHlsZSBlbGVtZW50IGluc2lkZSB0aGUgdGVzdCBkaXYgc29tZWhvdyBpbnRlcmZlcmluZyBvZmZzZXRIZWlnaHQsIHNvIGluc2VydCBpdCBpbnRvIGJvZHkgb3IgZmFrZWJvZHkuXG4gICAgLy8gT3BlcmEgd2lsbCBhY3QgYWxsIHF1aXJreSB3aGVuIGluamVjdGluZyBlbGVtZW50cyBpbiBkb2N1bWVudEVsZW1lbnQgd2hlbiBwYWdlIGlzIHNlcnZlZCBhcyB4bWwsIG5lZWRzIGZha2Vib2R5IHRvby4gIzI3MFxuICAgICghYm9keS5mYWtlID8gZGl2IDogYm9keSkuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgIGJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcblxuICAgIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBydWxlO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShydWxlKSk7XG4gICAgfVxuICAgIGRpdi5pZCA9IG1vZDtcblxuICAgIGlmIChib2R5LmZha2UpIHtcbiAgICAgIC8vYXZvaWQgY3Jhc2hpbmcgSUU4LCBpZiBiYWNrZ3JvdW5kIGltYWdlIGlzIHVzZWRcbiAgICAgIGJvZHkuc3R5bGUuYmFja2dyb3VuZCA9ICcnO1xuICAgICAgLy9TYWZhcmkgNS4xMy81LjEuNCBPU1ggc3RvcHMgbG9hZGluZyBpZiA6Oi13ZWJraXQtc2Nyb2xsYmFyIGlzIHVzZWQgYW5kIHNjcm9sbGJhcnMgYXJlIHZpc2libGVcbiAgICAgIGJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgIGRvY092ZXJmbG93ID0gZG9jRWxlbWVudC5zdHlsZS5vdmVyZmxvdztcbiAgICAgIGRvY0VsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgIGRvY0VsZW1lbnQuYXBwZW5kQ2hpbGQoYm9keSk7XG4gICAgfVxuXG4gICAgcmV0ID0gY2FsbGJhY2soZGl2LCBydWxlKTtcbiAgICAvLyBJZiB0aGlzIGlzIGRvbmUgYWZ0ZXIgcGFnZSBsb2FkIHdlIGRvbid0IHdhbnQgdG8gcmVtb3ZlIHRoZSBib2R5IHNvIGNoZWNrIGlmIGJvZHkgZXhpc3RzXG4gICAgaWYgKGJvZHkuZmFrZSkge1xuICAgICAgYm9keS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGJvZHkpO1xuICAgICAgZG9jRWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9IGRvY092ZXJmbG93O1xuICAgICAgLy8gVHJpZ2dlciBsYXlvdXQgc28ga2luZXRpYyBzY3JvbGxpbmcgaXNuJ3QgZGlzYWJsZWQgaW4gaU9TNitcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgZG9jRWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRpdik7XG4gICAgfVxuXG4gICAgcmV0dXJuICEhcmV0O1xuXG4gIH1cblxuICBtb2R1bGUuZXhwb3J0cyA9IGluamVjdEVsZW1lbnRXaXRoU3R5bGVzO1xuXG4iLCJcbiAgLyoqXG4gICAqIGlzIHJldHVybnMgYSBib29sZWFuIGlmIHRoZSB0eXBlb2YgYW4gb2JqIGlzIGV4YWN0bHkgdHlwZS5cbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqIEBmdW5jdGlvbiBpc1xuICAgKiBAcGFyYW0geyp9IG9iaiAtIEEgdGhpbmcgd2Ugd2FudCB0byBjaGVjayB0aGUgdHlwZSBvZlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIEEgc3RyaW5nIHRvIGNvbXBhcmUgdGhlIHR5cGVvZiBhZ2FpbnN0XG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cblxuICBmdW5jdGlvbiBpcyhvYmosIHR5cGUpIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gdHlwZTtcbiAgfVxuICBtb2R1bGUuZXhwb3J0cyA9IGlzO1xuXG4iLCJ2YXIgZG9jRWxlbWVudCA9IHJlcXVpcmUoJy4vZG9jRWxlbWVudC5qcycpO1xuICAvKipcbiAgICogQSBjb252ZW5pZW5jZSBoZWxwZXIgdG8gY2hlY2sgaWYgdGhlIGRvY3VtZW50IHdlIGFyZSBydW5uaW5nIGluIGlzIGFuIFNWRyBkb2N1bWVudFxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuXG4gIHZhciBpc1NWRyA9IGRvY0VsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3N2Zyc7XG4gIG1vZHVsZS5leHBvcnRzID0gaXNTVkc7XG5cbiIsInZhciBNb2Rlcm5penIgPSByZXF1aXJlKCcuL01vZGVybml6ci5qcycpO1xudmFyIG1vZEVsZW0gPSByZXF1aXJlKCcuL21vZEVsZW0uanMnKTtcbiAgdmFyIG1TdHlsZSA9IHtcbiAgICBzdHlsZTogbW9kRWxlbS5lbGVtLnN0eWxlXG4gIH07XG5cbiAgLy8ga2lsbCByZWYgZm9yIGdjLCBtdXN0IGhhcHBlbiBiZWZvcmUgbW9kLmVsZW0gaXMgcmVtb3ZlZCwgc28gd2UgdW5zaGlmdCBvbiB0b1xuICAvLyB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlLlxuICBNb2Rlcm5penIuX3EudW5zaGlmdChmdW5jdGlvbigpIHtcbiAgICBkZWxldGUgbVN0eWxlLnN0eWxlO1xuICB9KTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IG1TdHlsZTtcblxuIiwidmFyIE1vZGVybml6ciA9IHJlcXVpcmUoJy4vTW9kZXJuaXpyLmpzJyk7XG52YXIgY3JlYXRlRWxlbWVudCA9IHJlcXVpcmUoJy4vY3JlYXRlRWxlbWVudC5qcycpO1xuICAvKipcbiAgICogQ3JlYXRlIG91ciBcIm1vZGVybml6clwiIGVsZW1lbnQgdGhhdCB3ZSBkbyBtb3N0IGZlYXR1cmUgdGVzdHMgb24uXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKi9cblxuICB2YXIgbW9kRWxlbSA9IHtcbiAgICBlbGVtOiBjcmVhdGVFbGVtZW50KCdtb2Rlcm5penInKVxuICB9O1xuXG4gIC8vIENsZWFuIHVwIHRoaXMgZWxlbWVudFxuICBNb2Rlcm5penIuX3EucHVzaChmdW5jdGlvbigpIHtcbiAgICBkZWxldGUgbW9kRWxlbS5lbGVtO1xuICB9KTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IG1vZEVsZW07XG5cbiIsInZhciBpbmplY3RFbGVtZW50V2l0aFN0eWxlcyA9IHJlcXVpcmUoJy4vaW5qZWN0RWxlbWVudFdpdGhTdHlsZXMuanMnKTtcbnZhciBkb21Ub0NTUyA9IHJlcXVpcmUoJy4vZG9tVG9DU1MuanMnKTtcbnZhciBjb21wdXRlZFN0eWxlID0gcmVxdWlyZSgnLi9jb21wdXRlZFN0eWxlLmpzJyk7XG4gIC8qKlxuICAgKiBuYXRpdmVUZXN0UHJvcHMgYWxsb3dzIGZvciB1cyB0byB1c2UgbmF0aXZlIGZlYXR1cmUgZGV0ZWN0aW9uIGZ1bmN0aW9uYWxpdHkgaWYgYXZhaWxhYmxlLlxuICAgKiBzb21lIHByZWZpeGVkIGZvcm0sIG9yIGZhbHNlLCBpbiB0aGUgY2FzZSBvZiBhbiB1bnN1cHBvcnRlZCBydWxlXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gbmF0aXZlVGVzdFByb3BzXG4gICAqIEBwYXJhbSB7YXJyYXl9IHByb3BzIC0gQW4gYXJyYXkgb2YgcHJvcGVydHkgbmFtZXNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSB3ZSB3YW50IHRvIGNoZWNrIHZpYSBAc3VwcG9ydHNcbiAgICogQHJldHVybnMge2Jvb2xlYW58dW5kZWZpbmVkfSBBIGJvb2xlYW4gd2hlbiBAc3VwcG9ydHMgZXhpc3RzLCB1bmRlZmluZWQgb3RoZXJ3aXNlXG4gICAqL1xuXG4gIC8vIEFjY2VwdHMgYSBsaXN0IG9mIHByb3BlcnR5IG5hbWVzIGFuZCBhIHNpbmdsZSB2YWx1ZVxuICAvLyBSZXR1cm5zIGB1bmRlZmluZWRgIGlmIG5hdGl2ZSBkZXRlY3Rpb24gbm90IGF2YWlsYWJsZVxuICBmdW5jdGlvbiBuYXRpdmVUZXN0UHJvcHMocHJvcHMsIHZhbHVlKSB7XG4gICAgdmFyIGkgPSBwcm9wcy5sZW5ndGg7XG4gICAgLy8gU3RhcnQgd2l0aCB0aGUgSlMgQVBJOiBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLWNvbmRpdGlvbmFsLyN0aGUtY3NzLWludGVyZmFjZVxuICAgIGlmICgnQ1NTJyBpbiB3aW5kb3cgJiYgJ3N1cHBvcnRzJyBpbiB3aW5kb3cuQ1NTKSB7XG4gICAgICAvLyBUcnkgZXZlcnkgcHJlZml4ZWQgdmFyaWFudCBvZiB0aGUgcHJvcGVydHlcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgaWYgKHdpbmRvdy5DU1Muc3VwcG9ydHMoZG9tVG9DU1MocHJvcHNbaV0pLCB2YWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBPdGhlcndpc2UgZmFsbCBiYWNrIHRvIGF0LXJ1bGUgKGZvciBPcGVyYSAxMi54KVxuICAgIGVsc2UgaWYgKCdDU1NTdXBwb3J0c1J1bGUnIGluIHdpbmRvdykge1xuICAgICAgLy8gQnVpbGQgYSBjb25kaXRpb24gc3RyaW5nIGZvciBldmVyeSBwcmVmaXhlZCB2YXJpYW50XG4gICAgICB2YXIgY29uZGl0aW9uVGV4dCA9IFtdO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBjb25kaXRpb25UZXh0LnB1c2goJygnICsgZG9tVG9DU1MocHJvcHNbaV0pICsgJzonICsgdmFsdWUgKyAnKScpO1xuICAgICAgfVxuICAgICAgY29uZGl0aW9uVGV4dCA9IGNvbmRpdGlvblRleHQuam9pbignIG9yICcpO1xuICAgICAgcmV0dXJuIGluamVjdEVsZW1lbnRXaXRoU3R5bGVzKCdAc3VwcG9ydHMgKCcgKyBjb25kaXRpb25UZXh0ICsgJykgeyAjbW9kZXJuaXpyIHsgcG9zaXRpb246IGFic29sdXRlOyB9IH0nLCBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIHJldHVybiBjb21wdXRlZFN0eWxlKG5vZGUsIG51bGwsICdwb3NpdGlvbicpID09ICdhYnNvbHV0ZSc7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBtb2R1bGUuZXhwb3J0cyA9IG5hdGl2ZVRlc3RQcm9wcztcblxuIiwiXG4gIC8qKlxuICAgKiBJZiB0aGUgYnJvd3NlcnMgZm9sbG93IHRoZSBzcGVjLCB0aGVuIHRoZXkgd291bGQgZXhwb3NlIHZlbmRvci1zcGVjaWZpYyBzdHlsZXMgYXM6XG4gICAqICAgZWxlbS5zdHlsZS5XZWJraXRCb3JkZXJSYWRpdXNcbiAgICogaW5zdGVhZCBvZiBzb21ldGhpbmcgbGlrZSB0aGUgZm9sbG93aW5nICh3aGljaCBpcyB0ZWNobmljYWxseSBpbmNvcnJlY3QpOlxuICAgKiAgIGVsZW0uc3R5bGUud2Via2l0Qm9yZGVyUmFkaXVzXG5cbiAgICogV2ViS2l0IGdob3N0cyB0aGVpciBwcm9wZXJ0aWVzIGluIGxvd2VyY2FzZSBidXQgT3BlcmEgJiBNb3ogZG8gbm90LlxuICAgKiBNaWNyb3NvZnQgdXNlcyBhIGxvd2VyY2FzZSBgbXNgIGluc3RlYWQgb2YgdGhlIGNvcnJlY3QgYE1zYCBpbiBJRTgrXG4gICAqICAgZXJpay5lYWUubmV0L2FyY2hpdmVzLzIwMDgvMDMvMTAvMjEuNDguMTAvXG5cbiAgICogTW9yZSBoZXJlOiBnaXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvaXNzdWVzL2lzc3VlLzIxXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdmVuZG9yLXNwZWNpZmljIHN0eWxlIHByb3BlcnRpZXNcbiAgICovXG5cbiAgdmFyIG9tUHJlZml4ZXMgPSAnTW96IE8gbXMgV2Via2l0JztcbiAgbW9kdWxlLmV4cG9ydHMgPSBvbVByZWZpeGVzO1xuXG4iLCJ2YXIgTW9kZXJuaXpyUHJvdG8gPSByZXF1aXJlKCcuL01vZGVybml6clByb3RvLmpzJyk7XG4gIC8qKlxuICAgKiBMaXN0IG9mIHByb3BlcnR5IHZhbHVlcyB0byBzZXQgZm9yIGNzcyB0ZXN0cy4gU2VlIHRpY2tldCAjMjFcbiAgICogaHR0cDovL2dpdC5pby92VUdsNFxuICAgKlxuICAgKiBAbWVtYmVyb2YgTW9kZXJuaXpyXG4gICAqIEBuYW1lIE1vZGVybml6ci5fcHJlZml4ZXNcbiAgICogQG9wdGlvbk5hbWUgTW9kZXJuaXpyLl9wcmVmaXhlc1xuICAgKiBAb3B0aW9uUHJvcCBwcmVmaXhlc1xuICAgKiBAYWNjZXNzIHB1YmxpY1xuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBNb2Rlcm5penIuX3ByZWZpeGVzIGlzIHRoZSBpbnRlcm5hbCBsaXN0IG9mIHByZWZpeGVzIHRoYXQgd2UgdGVzdCBhZ2FpbnN0XG4gICAqIGluc2lkZSBvZiB0aGluZ3MgbGlrZSBbcHJlZml4ZWRdKCNtb2Rlcm5penItcHJlZml4ZWQpIGFuZCBbcHJlZml4ZWRDU1NdKCMtY29kZS1tb2Rlcm5penItcHJlZml4ZWRjc3MpLiBJdCBpcyBzaW1wbHlcbiAgICogYW4gYXJyYXkgb2Yga2ViYWItY2FzZSB2ZW5kb3IgcHJlZml4ZXMgeW91IGNhbiB1c2Ugd2l0aGluIHlvdXIgY29kZS5cbiAgICpcbiAgICogU29tZSBjb21tb24gdXNlIGNhc2VzIGluY2x1ZGVcbiAgICpcbiAgICogR2VuZXJhdGluZyBhbGwgcG9zc2libGUgcHJlZml4ZWQgdmVyc2lvbiBvZiBhIENTUyBwcm9wZXJ0eVxuICAgKiBgYGBqc1xuICAgKiB2YXIgcnVsZSA9IE1vZGVybml6ci5fcHJlZml4ZXMuam9pbigndHJhbnNmb3JtOiByb3RhdGUoMjBkZWcpOyAnKTtcbiAgICpcbiAgICogcnVsZSA9PT0gJ3RyYW5zZm9ybTogcm90YXRlKDIwZGVnKTsgd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDIwZGVnKTsgbW96LXRyYW5zZm9ybTogcm90YXRlKDIwZGVnKTsgby10cmFuc2Zvcm06IHJvdGF0ZSgyMGRlZyk7IG1zLXRyYW5zZm9ybTogcm90YXRlKDIwZGVnKTsnXG4gICAqIGBgYFxuICAgKlxuICAgKiBHZW5lcmF0aW5nIGFsbCBwb3NzaWJsZSBwcmVmaXhlZCB2ZXJzaW9uIG9mIGEgQ1NTIHZhbHVlXG4gICAqIGBgYGpzXG4gICAqIHJ1bGUgPSAnZGlzcGxheTonICsgIE1vZGVybml6ci5fcHJlZml4ZXMuam9pbignZmxleDsgZGlzcGxheTonKSArICdmbGV4JztcbiAgICpcbiAgICogcnVsZSA9PT0gJ2Rpc3BsYXk6ZmxleDsgZGlzcGxheTotd2Via2l0LWZsZXg7IGRpc3BsYXk6LW1vei1mbGV4OyBkaXNwbGF5Oi1vLWZsZXg7IGRpc3BsYXk6LW1zLWZsZXg7IGRpc3BsYXk6ZmxleCdcbiAgICogYGBgXG4gICAqL1xuXG4gIC8vIHdlIHVzZSBbJycsJyddIHJhdGhlciB0aGFuIGFuIGVtcHR5IGFycmF5IGluIG9yZGVyIHRvIGFsbG93IGEgcGF0dGVybiBvZiAuYGpvaW4oKWBpbmcgcHJlZml4ZXMgdG8gdGVzdFxuICAvLyB2YWx1ZXMgaW4gZmVhdHVyZSBkZXRlY3RzIHRvIGNvbnRpbnVlIHRvIHdvcmtcbiAgdmFyIHByZWZpeGVzID0gKE1vZGVybml6clByb3RvLl9jb25maWcudXNlUHJlZml4ZXMgPyAnIC13ZWJraXQtIC1tb3otIC1vLSAtbXMtICcuc3BsaXQoJyAnKSA6IFsnJywnJ10pO1xuXG4gIC8vIGV4cG9zZSB0aGVzZSBmb3IgdGhlIHBsdWdpbiBBUEkuIExvb2sgaW4gdGhlIHNvdXJjZSBmb3IgaG93IHRvIGpvaW4oKSB0aGVtIGFnYWluc3QgeW91ciBpbnB1dFxuICBNb2Rlcm5penJQcm90by5fcHJlZml4ZXMgPSBwcmVmaXhlcztcblxuICBtb2R1bGUuZXhwb3J0cyA9IHByZWZpeGVzO1xuXG4iLCJ2YXIgTW9kZXJuaXpyID0gcmVxdWlyZSgnLi9Nb2Rlcm5penIuanMnKTtcbnZhciBkb2NFbGVtZW50ID0gcmVxdWlyZSgnLi9kb2NFbGVtZW50LmpzJyk7XG52YXIgaXNTVkcgPSByZXF1aXJlKCcuL2lzU1ZHLmpzJyk7XG4gIC8qKlxuICAgKiBzZXRDbGFzc2VzIHRha2VzIGFuIGFycmF5IG9mIGNsYXNzIG5hbWVzIGFuZCBhZGRzIHRoZW0gdG8gdGhlIHJvb3QgZWxlbWVudFxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIHNldENsYXNzZXNcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gY2xhc3NlcyAtIEFycmF5IG9mIGNsYXNzIG5hbWVzXG4gICAqL1xuXG4gIC8vIFBhc3MgaW4gYW4gYW5kIGFycmF5IG9mIGNsYXNzIG5hbWVzLCBlLmcuOlxuICAvLyAgWyduby13ZWJwJywgJ2JvcmRlcnJhZGl1cycsIC4uLl1cbiAgZnVuY3Rpb24gc2V0Q2xhc3NlcyhjbGFzc2VzKSB7XG4gICAgdmFyIGNsYXNzTmFtZSA9IGRvY0VsZW1lbnQuY2xhc3NOYW1lO1xuICAgIHZhciBjbGFzc1ByZWZpeCA9IE1vZGVybml6ci5fY29uZmlnLmNsYXNzUHJlZml4IHx8ICcnO1xuXG4gICAgaWYgKGlzU1ZHKSB7XG4gICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUuYmFzZVZhbDtcbiAgICB9XG5cbiAgICAvLyBDaGFuZ2UgYG5vLWpzYCB0byBganNgIChpbmRlcGVuZGVudGx5IG9mIHRoZSBgZW5hYmxlQ2xhc3Nlc2Agb3B0aW9uKVxuICAgIC8vIEhhbmRsZSBjbGFzc1ByZWZpeCBvbiB0aGlzIHRvb1xuICAgIGlmIChNb2Rlcm5penIuX2NvbmZpZy5lbmFibGVKU0NsYXNzKSB7XG4gICAgICB2YXIgcmVKUyA9IG5ldyBSZWdFeHAoJyhefFxcXFxzKScgKyBjbGFzc1ByZWZpeCArICduby1qcyhcXFxcc3wkKScpO1xuICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnJlcGxhY2UocmVKUywgJyQxJyArIGNsYXNzUHJlZml4ICsgJ2pzJDInKTtcbiAgICB9XG5cbiAgICBpZiAoTW9kZXJuaXpyLl9jb25maWcuZW5hYmxlQ2xhc3Nlcykge1xuICAgICAgLy8gQWRkIHRoZSBuZXcgY2xhc3Nlc1xuICAgICAgY2xhc3NOYW1lICs9ICcgJyArIGNsYXNzUHJlZml4ICsgY2xhc3Nlcy5qb2luKCcgJyArIGNsYXNzUHJlZml4KTtcbiAgICAgIGlmIChpc1NWRykge1xuICAgICAgICBkb2NFbGVtZW50LmNsYXNzTmFtZS5iYXNlVmFsID0gY2xhc3NOYW1lO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9jRWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuICBtb2R1bGUuZXhwb3J0cyA9IHNldENsYXNzZXM7XG5cbiIsInZhciBNb2Rlcm5penJQcm90byA9IHJlcXVpcmUoJy4vTW9kZXJuaXpyUHJvdG8uanMnKTtcbnZhciB0ZXN0UHJvcHNBbGwgPSByZXF1aXJlKCcuL3Rlc3RQcm9wc0FsbC5qcycpO1xuICAvKipcbiAgICogdGVzdEFsbFByb3BzIGRldGVybWluZXMgd2hldGhlciBhIGdpdmVuIENTUyBwcm9wZXJ0eSBpcyBzdXBwb3J0ZWQgaW4gdGhlIGJyb3dzZXJcbiAgICpcbiAgICogQG1lbWJlcm9mIE1vZGVybml6clxuICAgKiBAbmFtZSBNb2Rlcm5penIudGVzdEFsbFByb3BzXG4gICAqIEBvcHRpb25OYW1lIE1vZGVybml6ci50ZXN0QWxsUHJvcHMoKVxuICAgKiBAb3B0aW9uUHJvcCB0ZXN0QWxsUHJvcHNcbiAgICogQGFjY2VzcyBwdWJsaWNcbiAgICogQGZ1bmN0aW9uIHRlc3RBbGxQcm9wc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCAtIFN0cmluZyBuYW1pbmcgdGhlIHByb3BlcnR5IHRvIHRlc3QgKGVpdGhlciBjYW1lbENhc2Ugb3Iga2ViYWItY2FzZSlcbiAgICogQHBhcmFtIHtzdHJpbmd9IFt2YWx1ZV0gLSBTdHJpbmcgb2YgdGhlIHZhbHVlIHRvIHRlc3RcbiAgICogQHBhcmFtIHtib29sZWFufSBbc2tpcFZhbHVlVGVzdD1mYWxzZV0gLSBXaGV0aGVyIHRvIHNraXAgdGVzdGluZyB0aGF0IHRoZSB2YWx1ZSBpcyBzdXBwb3J0ZWQgd2hlbiB1c2luZyBub24tbmF0aXZlIGRldGVjdGlvblxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiB0ZXN0QWxsUHJvcHMgZGV0ZXJtaW5lcyB3aGV0aGVyIGEgZ2l2ZW4gQ1NTIHByb3BlcnR5LCBpbiBzb21lIHByZWZpeGVkIGZvcm0sXG4gICAqIGlzIHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci5cbiAgICpcbiAgICogYGBganNcbiAgICogdGVzdEFsbFByb3BzKCdib3hTaXppbmcnKSAgLy8gdHJ1ZVxuICAgKiBgYGBcbiAgICpcbiAgICogSXQgY2FuIG9wdGlvbmFsbHkgYmUgZ2l2ZW4gYSBDU1MgdmFsdWUgaW4gc3RyaW5nIGZvcm0gdG8gdGVzdCBpZiBhIHByb3BlcnR5XG4gICAqIHZhbHVlIGlzIHZhbGlkXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHRlc3RBbGxQcm9wcygnZGlzcGxheScsICdibG9jaycpIC8vIHRydWVcbiAgICogdGVzdEFsbFByb3BzKCdkaXNwbGF5JywgJ3Blbmd1aW4nKSAvLyBmYWxzZVxuICAgKiBgYGBcbiAgICpcbiAgICogQSBib29sZWFuIGNhbiBiZSBwYXNzZWQgYXMgYSB0aGlyZCBwYXJhbWV0ZXIgdG8gc2tpcCB0aGUgdmFsdWUgY2hlY2sgd2hlblxuICAgKiBuYXRpdmUgZGV0ZWN0aW9uIChAc3VwcG9ydHMpIGlzbid0IGF2YWlsYWJsZS5cbiAgICpcbiAgICogYGBganNcbiAgICogdGVzdEFsbFByb3BzKCdzaGFwZU91dHNpZGUnLCAnY29udGVudC1ib3gnLCB0cnVlKTtcbiAgICogYGBgXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHRlc3RBbGxQcm9wcyhwcm9wLCB2YWx1ZSwgc2tpcFZhbHVlVGVzdCkge1xuICAgIHJldHVybiB0ZXN0UHJvcHNBbGwocHJvcCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHZhbHVlLCBza2lwVmFsdWVUZXN0KTtcbiAgfVxuICBNb2Rlcm5penJQcm90by50ZXN0QWxsUHJvcHMgPSB0ZXN0QWxsUHJvcHM7XG4gIG1vZHVsZS5leHBvcnRzID0gdGVzdEFsbFByb3BzO1xuXG4iLCJ2YXIgaXMgPSByZXF1aXJlKCcuL2lzLmpzJyk7XG52YXIgZm5CaW5kID0gcmVxdWlyZSgnLi9mbkJpbmQuanMnKTtcbiAgLyoqXG4gICAqIHRlc3RET01Qcm9wcyBpcyBhIGdlbmVyaWMgRE9NIHByb3BlcnR5IHRlc3Q7IGlmIGEgYnJvd3NlciBzdXBwb3J0c1xuICAgKiAgIGEgY2VydGFpbiBwcm9wZXJ0eSwgaXQgd29uJ3QgcmV0dXJuIHVuZGVmaW5lZCBmb3IgaXQuXG4gICAqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKiBAZnVuY3Rpb24gdGVzdERPTVByb3BzXG4gICAqIEBwYXJhbSB7YXJyYXkuPHN0cmluZz59IHByb3BzIC0gQW4gYXJyYXkgb2YgcHJvcGVydGllcyB0byB0ZXN0IGZvclxuICAgKiBAcGFyYW0ge29iamVjdH0gb2JqIC0gQW4gb2JqZWN0IG9yIEVsZW1lbnQgeW91IHdhbnQgdG8gdXNlIHRvIHRlc3QgdGhlIHBhcmFtZXRlcnMgYWdhaW5cbiAgICogQHBhcmFtIHtib29sZWFufG9iamVjdH0gZWxlbSAtIEFuIEVsZW1lbnQgdG8gYmluZCB0aGUgcHJvcGVydHkgbG9va3VwIGFnYWluLiBVc2UgYGZhbHNlYCB0byBwcmV2ZW50IHRoZSBjaGVja1xuICAgKiBAcmV0dXJucyB7ZmFsc2V8Kn0gcmV0dXJucyBmYWxzZSBpZiB0aGUgcHJvcCBpcyB1bnN1cHBvcnRlZCwgb3RoZXJ3aXNlIHRoZSB2YWx1ZSB0aGF0IGlzIHN1cHBvcnRlZFxuICAgKi9cbiAgZnVuY3Rpb24gdGVzdERPTVByb3BzKHByb3BzLCBvYmosIGVsZW0pIHtcbiAgICB2YXIgaXRlbTtcblxuICAgIGZvciAodmFyIGkgaW4gcHJvcHMpIHtcbiAgICAgIGlmIChwcm9wc1tpXSBpbiBvYmopIHtcblxuICAgICAgICAvLyByZXR1cm4gdGhlIHByb3BlcnR5IG5hbWUgYXMgYSBzdHJpbmdcbiAgICAgICAgaWYgKGVsZW0gPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIHByb3BzW2ldO1xuICAgICAgICB9XG5cbiAgICAgICAgaXRlbSA9IG9ialtwcm9wc1tpXV07XG5cbiAgICAgICAgLy8gbGV0J3MgYmluZCBhIGZ1bmN0aW9uXG4gICAgICAgIGlmIChpcyhpdGVtLCAnZnVuY3Rpb24nKSkge1xuICAgICAgICAgIC8vIGJpbmQgdG8gb2JqIHVubGVzcyBvdmVycmlkZW5cbiAgICAgICAgICByZXR1cm4gZm5CaW5kKGl0ZW0sIGVsZW0gfHwgb2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJldHVybiB0aGUgdW5ib3VuZCBmdW5jdGlvbiBvciBvYmogb3IgdmFsdWVcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIG1vZHVsZS5leHBvcnRzID0gdGVzdERPTVByb3BzO1xuXG4iLCJ2YXIgY29udGFpbnMgPSByZXF1aXJlKCcuL2NvbnRhaW5zLmpzJyk7XG52YXIgbVN0eWxlID0gcmVxdWlyZSgnLi9tU3R5bGUuanMnKTtcbnZhciBjcmVhdGVFbGVtZW50ID0gcmVxdWlyZSgnLi9jcmVhdGVFbGVtZW50LmpzJyk7XG52YXIgbmF0aXZlVGVzdFByb3BzID0gcmVxdWlyZSgnLi9uYXRpdmVUZXN0UHJvcHMuanMnKTtcbnZhciBpcyA9IHJlcXVpcmUoJy4vaXMuanMnKTtcbnZhciBjc3NUb0RPTSA9IHJlcXVpcmUoJy4vY3NzVG9ET00uanMnKTtcbiAgLy8gdGVzdFByb3BzIGlzIGEgZ2VuZXJpYyBDU1MgLyBET00gcHJvcGVydHkgdGVzdC5cblxuICAvLyBJbiB0ZXN0aW5nIHN1cHBvcnQgZm9yIGEgZ2l2ZW4gQ1NTIHByb3BlcnR5LCBpdCdzIGxlZ2l0IHRvIHRlc3Q6XG4gIC8vICAgIGBlbGVtLnN0eWxlW3N0eWxlTmFtZV0gIT09IHVuZGVmaW5lZGBcbiAgLy8gSWYgdGhlIHByb3BlcnR5IGlzIHN1cHBvcnRlZCBpdCB3aWxsIHJldHVybiBhbiBlbXB0eSBzdHJpbmcsXG4gIC8vIGlmIHVuc3VwcG9ydGVkIGl0IHdpbGwgcmV0dXJuIHVuZGVmaW5lZC5cblxuICAvLyBXZSdsbCB0YWtlIGFkdmFudGFnZSBvZiB0aGlzIHF1aWNrIHRlc3QgYW5kIHNraXAgc2V0dGluZyBhIHN0eWxlXG4gIC8vIG9uIG91ciBtb2Rlcm5penIgZWxlbWVudCwgYnV0IGluc3RlYWQganVzdCB0ZXN0aW5nIHVuZGVmaW5lZCB2c1xuICAvLyBlbXB0eSBzdHJpbmcuXG5cbiAgLy8gUHJvcGVydHkgbmFtZXMgY2FuIGJlIHByb3ZpZGVkIGluIGVpdGhlciBjYW1lbENhc2Ugb3Iga2ViYWItY2FzZS5cblxuICBmdW5jdGlvbiB0ZXN0UHJvcHMocHJvcHMsIHByZWZpeGVkLCB2YWx1ZSwgc2tpcFZhbHVlVGVzdCkge1xuICAgIHNraXBWYWx1ZVRlc3QgPSBpcyhza2lwVmFsdWVUZXN0LCAndW5kZWZpbmVkJykgPyBmYWxzZSA6IHNraXBWYWx1ZVRlc3Q7XG5cbiAgICAvLyBUcnkgbmF0aXZlIGRldGVjdCBmaXJzdFxuICAgIGlmICghaXModmFsdWUsICd1bmRlZmluZWQnKSkge1xuICAgICAgdmFyIHJlc3VsdCA9IG5hdGl2ZVRlc3RQcm9wcyhwcm9wcywgdmFsdWUpO1xuICAgICAgaWYgKCFpcyhyZXN1bHQsICd1bmRlZmluZWQnKSkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE90aGVyd2lzZSBkbyBpdCBwcm9wZXJseVxuICAgIHZhciBhZnRlckluaXQsIGksIHByb3BzTGVuZ3RoLCBwcm9wLCBiZWZvcmU7XG5cbiAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGEgc3R5bGUgZWxlbWVudCwgdGhhdCBtZWFucyB3ZSdyZSBydW5uaW5nIGFzeW5jIG9yIGFmdGVyXG4gICAgLy8gdGhlIGNvcmUgdGVzdHMsIHNvIHdlJ2xsIG5lZWQgdG8gY3JlYXRlIG91ciBvd24gZWxlbWVudHMgdG8gdXNlXG5cbiAgICAvLyBpbnNpZGUgb2YgYW4gU1ZHIGVsZW1lbnQsIGluIGNlcnRhaW4gYnJvd3NlcnMsIHRoZSBgc3R5bGVgIGVsZW1lbnQgaXMgb25seVxuICAgIC8vIGRlZmluZWQgZm9yIHZhbGlkIHRhZ3MuIFRoZXJlZm9yZSwgaWYgYG1vZGVybml6cmAgZG9lcyBub3QgaGF2ZSBvbmUsIHdlXG4gICAgLy8gZmFsbCBiYWNrIHRvIGEgbGVzcyB1c2VkIGVsZW1lbnQgYW5kIGhvcGUgZm9yIHRoZSBiZXN0LlxuICAgIC8vIGZvciBzdHJpY3QgWEhUTUwgYnJvd3NlcnMgdGhlIGhhcmRseSB1c2VkIHNhbXAgZWxlbWVudCBpcyB1c2VkXG4gICAgdmFyIGVsZW1zID0gWydtb2Rlcm5penInLCAndHNwYW4nLCAnc2FtcCddO1xuICAgIHdoaWxlICghbVN0eWxlLnN0eWxlICYmIGVsZW1zLmxlbmd0aCkge1xuICAgICAgYWZ0ZXJJbml0ID0gdHJ1ZTtcbiAgICAgIG1TdHlsZS5tb2RFbGVtID0gY3JlYXRlRWxlbWVudChlbGVtcy5zaGlmdCgpKTtcbiAgICAgIG1TdHlsZS5zdHlsZSA9IG1TdHlsZS5tb2RFbGVtLnN0eWxlO1xuICAgIH1cblxuICAgIC8vIERlbGV0ZSB0aGUgb2JqZWN0cyBpZiB3ZSBjcmVhdGVkIHRoZW0uXG4gICAgZnVuY3Rpb24gY2xlYW5FbGVtcygpIHtcbiAgICAgIGlmIChhZnRlckluaXQpIHtcbiAgICAgICAgZGVsZXRlIG1TdHlsZS5zdHlsZTtcbiAgICAgICAgZGVsZXRlIG1TdHlsZS5tb2RFbGVtO1xuICAgICAgfVxuICAgIH1cblxuICAgIHByb3BzTGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBwcm9wc0xlbmd0aDsgaSsrKSB7XG4gICAgICBwcm9wID0gcHJvcHNbaV07XG4gICAgICBiZWZvcmUgPSBtU3R5bGUuc3R5bGVbcHJvcF07XG5cbiAgICAgIGlmIChjb250YWlucyhwcm9wLCAnLScpKSB7XG4gICAgICAgIHByb3AgPSBjc3NUb0RPTShwcm9wKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1TdHlsZS5zdHlsZVtwcm9wXSAhPT0gdW5kZWZpbmVkKSB7XG5cbiAgICAgICAgLy8gSWYgdmFsdWUgdG8gdGVzdCBoYXMgYmVlbiBwYXNzZWQgaW4sIGRvIGEgc2V0LWFuZC1jaGVjayB0ZXN0LlxuICAgICAgICAvLyAwIChpbnRlZ2VyKSBpcyBhIHZhbGlkIHByb3BlcnR5IHZhbHVlLCBzbyBjaGVjayB0aGF0IGB2YWx1ZWAgaXNuJ3RcbiAgICAgICAgLy8gdW5kZWZpbmVkLCByYXRoZXIgdGhhbiBqdXN0IGNoZWNraW5nIGl0J3MgdHJ1dGh5LlxuICAgICAgICBpZiAoIXNraXBWYWx1ZVRlc3QgJiYgIWlzKHZhbHVlLCAndW5kZWZpbmVkJykpIHtcblxuICAgICAgICAgIC8vIE5lZWRzIGEgdHJ5IGNhdGNoIGJsb2NrIGJlY2F1c2Ugb2Ygb2xkIElFLiBUaGlzIGlzIHNsb3csIGJ1dCB3aWxsXG4gICAgICAgICAgLy8gYmUgYXZvaWRlZCBpbiBtb3N0IGNhc2VzIGJlY2F1c2UgYHNraXBWYWx1ZVRlc3RgIHdpbGwgYmUgdXNlZC5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgbVN0eWxlLnN0eWxlW3Byb3BdID0gdmFsdWU7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge31cblxuICAgICAgICAgIC8vIElmIHRoZSBwcm9wZXJ0eSB2YWx1ZSBoYXMgY2hhbmdlZCwgd2UgYXNzdW1lIHRoZSB2YWx1ZSB1c2VkIGlzXG4gICAgICAgICAgLy8gc3VwcG9ydGVkLiBJZiBgdmFsdWVgIGlzIGVtcHR5IHN0cmluZywgaXQnbGwgZmFpbCBoZXJlIChiZWNhdXNlXG4gICAgICAgICAgLy8gaXQgaGFzbid0IGNoYW5nZWQpLCB3aGljaCBtYXRjaGVzIGhvdyBicm93c2VycyBoYXZlIGltcGxlbWVudGVkXG4gICAgICAgICAgLy8gQ1NTLnN1cHBvcnRzKClcbiAgICAgICAgICBpZiAobVN0eWxlLnN0eWxlW3Byb3BdICE9IGJlZm9yZSkge1xuICAgICAgICAgICAgY2xlYW5FbGVtcygpO1xuICAgICAgICAgICAgcmV0dXJuIHByZWZpeGVkID09ICdwZngnID8gcHJvcCA6IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE90aGVyd2lzZSBqdXN0IHJldHVybiB0cnVlLCBvciB0aGUgcHJvcGVydHkgbmFtZSBpZiB0aGlzIGlzIGFcbiAgICAgICAgLy8gYHByZWZpeGVkKClgIGNhbGxcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY2xlYW5FbGVtcygpO1xuICAgICAgICAgIHJldHVybiBwcmVmaXhlZCA9PSAncGZ4JyA/IHByb3AgOiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNsZWFuRWxlbXMoKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBtb2R1bGUuZXhwb3J0cyA9IHRlc3RQcm9wcztcblxuIiwidmFyIE1vZGVybml6clByb3RvID0gcmVxdWlyZSgnLi9Nb2Rlcm5penJQcm90by5qcycpO1xudmFyIGNzc29tUHJlZml4ZXMgPSByZXF1aXJlKCcuL2Nzc29tUHJlZml4ZXMuanMnKTtcbnZhciBpcyA9IHJlcXVpcmUoJy4vaXMuanMnKTtcbnZhciB0ZXN0UHJvcHMgPSByZXF1aXJlKCcuL3Rlc3RQcm9wcy5qcycpO1xudmFyIGRvbVByZWZpeGVzID0gcmVxdWlyZSgnLi9kb21QcmVmaXhlcy5qcycpO1xudmFyIHRlc3RET01Qcm9wcyA9IHJlcXVpcmUoJy4vdGVzdERPTVByb3BzLmpzJyk7XG4gIC8qKlxuICAgKiB0ZXN0UHJvcHNBbGwgdGVzdHMgYSBsaXN0IG9mIERPTSBwcm9wZXJ0aWVzIHdlIHdhbnQgdG8gY2hlY2sgYWdhaW5zdC5cbiAgICogV2Ugc3BlY2lmeSBsaXRlcmFsbHkgQUxMIHBvc3NpYmxlIChrbm93biBhbmQvb3IgbGlrZWx5KSBwcm9wZXJ0aWVzIG9uXG4gICAqIHRoZSBlbGVtZW50IGluY2x1ZGluZyB0aGUgbm9uLXZlbmRvciBwcmVmaXhlZCBvbmUsIGZvciBmb3J3YXJkLVxuICAgKiBjb21wYXRpYmlsaXR5LlxuICAgKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICogQGZ1bmN0aW9uIHRlc3RQcm9wc0FsbFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCAtIEEgc3RyaW5nIG9mIHRoZSBwcm9wZXJ0eSB0byB0ZXN0IGZvclxuICAgKiBAcGFyYW0ge3N0cmluZ3xvYmplY3R9IFtwcmVmaXhlZF0gLSBBbiBvYmplY3QgdG8gY2hlY2sgdGhlIHByZWZpeGVkIHByb3BlcnRpZXMgb24uIFVzZSBhIHN0cmluZyB0byBza2lwXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8U1ZHRWxlbWVudH0gW2VsZW1dIC0gQW4gZWxlbWVudCB1c2VkIHRvIHRlc3QgdGhlIHByb3BlcnR5IGFuZCB2YWx1ZSBhZ2FpbnN0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdmFsdWVdIC0gQSBzdHJpbmcgb2YgYSBjc3MgdmFsdWVcbiAgICogQHBhcmFtIHtib29sZWFufSBbc2tpcFZhbHVlVGVzdF0gLSBBbiBib29sZWFuIHJlcHJlc2VudGluZyBpZiB5b3Ugd2FudCB0byB0ZXN0IGlmIHZhbHVlIHN0aWNrcyB3aGVuIHNldFxuICAgKiBAcmV0dXJucyB7ZmFsc2V8c3RyaW5nfSByZXR1cm5zIHRoZSBzdHJpbmcgdmVyc2lvbiBvZiB0aGUgcHJvcGVydHksIG9yIGZhbHNlIGlmIGl0IGlzIHVuc3VwcG9ydGVkXG4gICAqL1xuICBmdW5jdGlvbiB0ZXN0UHJvcHNBbGwocHJvcCwgcHJlZml4ZWQsIGVsZW0sIHZhbHVlLCBza2lwVmFsdWVUZXN0KSB7XG5cbiAgICB2YXIgdWNQcm9wID0gcHJvcC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHByb3Auc2xpY2UoMSksXG4gICAgICBwcm9wcyA9IChwcm9wICsgJyAnICsgY3Nzb21QcmVmaXhlcy5qb2luKHVjUHJvcCArICcgJykgKyB1Y1Byb3ApLnNwbGl0KCcgJyk7XG5cbiAgICAvLyBkaWQgdGhleSBjYWxsIC5wcmVmaXhlZCgnYm94U2l6aW5nJykgb3IgYXJlIHdlIGp1c3QgdGVzdGluZyBhIHByb3A/XG4gICAgaWYgKGlzKHByZWZpeGVkLCAnc3RyaW5nJykgfHwgaXMocHJlZml4ZWQsICd1bmRlZmluZWQnKSkge1xuICAgICAgcmV0dXJuIHRlc3RQcm9wcyhwcm9wcywgcHJlZml4ZWQsIHZhbHVlLCBza2lwVmFsdWVUZXN0KTtcblxuICAgICAgLy8gb3RoZXJ3aXNlLCB0aGV5IGNhbGxlZCAucHJlZml4ZWQoJ3JlcXVlc3RBbmltYXRpb25GcmFtZScsIHdpbmRvd1ssIGVsZW1dKVxuICAgIH0gZWxzZSB7XG4gICAgICBwcm9wcyA9IChwcm9wICsgJyAnICsgKGRvbVByZWZpeGVzKS5qb2luKHVjUHJvcCArICcgJykgKyB1Y1Byb3ApLnNwbGl0KCcgJyk7XG4gICAgICByZXR1cm4gdGVzdERPTVByb3BzKHByb3BzLCBwcmVmaXhlZCwgZWxlbSk7XG4gICAgfVxuICB9XG5cbiAgLy8gTW9kZXJuaXpyLnRlc3RBbGxQcm9wcygpIGludmVzdGlnYXRlcyB3aGV0aGVyIGEgZ2l2ZW4gc3R5bGUgcHJvcGVydHksXG4gIC8vIG9yIGFueSBvZiBpdHMgdmVuZG9yLXByZWZpeGVkIHZhcmlhbnRzLCBpcyByZWNvZ25pemVkXG4gIC8vXG4gIC8vIE5vdGUgdGhhdCB0aGUgcHJvcGVydHkgbmFtZXMgbXVzdCBiZSBwcm92aWRlZCBpbiB0aGUgY2FtZWxDYXNlIHZhcmlhbnQuXG4gIC8vIE1vZGVybml6ci50ZXN0QWxsUHJvcHMoJ2JveFNpemluZycpXG4gIE1vZGVybml6clByb3RvLnRlc3RBbGxQcm9wcyA9IHRlc3RQcm9wc0FsbDtcblxuICBtb2R1bGUuZXhwb3J0cyA9IHRlc3RQcm9wc0FsbDtcblxuIiwidmFyIHRlc3RzID0gcmVxdWlyZSgnLi90ZXN0cy5qcycpO1xudmFyIE1vZGVybml6ciA9IHJlcXVpcmUoJy4vTW9kZXJuaXpyLmpzJyk7XG52YXIgY2xhc3NlcyA9IHJlcXVpcmUoJy4vY2xhc3Nlcy5qcycpO1xudmFyIGlzID0gcmVxdWlyZSgnLi9pcy5qcycpO1xuICAvKipcbiAgICogUnVuIHRocm91Z2ggYWxsIHRlc3RzIGFuZCBkZXRlY3QgdGhlaXIgc3VwcG9ydCBpbiB0aGUgY3VycmVudCBVQS5cbiAgICpcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHRlc3RSdW5uZXIoKSB7XG4gICAgdmFyIGZlYXR1cmVOYW1lcztcbiAgICB2YXIgZmVhdHVyZTtcbiAgICB2YXIgYWxpYXNJZHg7XG4gICAgdmFyIHJlc3VsdDtcbiAgICB2YXIgbmFtZUlkeDtcbiAgICB2YXIgZmVhdHVyZU5hbWU7XG4gICAgdmFyIGZlYXR1cmVOYW1lU3BsaXQ7XG5cbiAgICBmb3IgKHZhciBmZWF0dXJlSWR4IGluIHRlc3RzKSB7XG4gICAgICBpZiAodGVzdHMuaGFzT3duUHJvcGVydHkoZmVhdHVyZUlkeCkpIHtcbiAgICAgICAgZmVhdHVyZU5hbWVzID0gW107XG4gICAgICAgIGZlYXR1cmUgPSB0ZXN0c1tmZWF0dXJlSWR4XTtcbiAgICAgICAgLy8gcnVuIHRoZSB0ZXN0LCB0aHJvdyB0aGUgcmV0dXJuIHZhbHVlIGludG8gdGhlIE1vZGVybml6cixcbiAgICAgICAgLy8gdGhlbiBiYXNlZCBvbiB0aGF0IGJvb2xlYW4sIGRlZmluZSBhbiBhcHByb3ByaWF0ZSBjbGFzc05hbWVcbiAgICAgICAgLy8gYW5kIHB1c2ggaXQgaW50byBhbiBhcnJheSBvZiBjbGFzc2VzIHdlJ2xsIGpvaW4gbGF0ZXIuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIG5hbWUsIGl0J3MgYW4gJ2FzeW5jJyB0ZXN0IHRoYXQgaXMgcnVuLFxuICAgICAgICAvLyBidXQgbm90IGRpcmVjdGx5IGFkZGVkIHRvIHRoZSBvYmplY3QuIFRoYXQgc2hvdWxkXG4gICAgICAgIC8vIGJlIGRvbmUgd2l0aCBhIHBvc3QtcnVuIGFkZFRlc3QgY2FsbC5cbiAgICAgICAgaWYgKGZlYXR1cmUubmFtZSkge1xuICAgICAgICAgIGZlYXR1cmVOYW1lcy5wdXNoKGZlYXR1cmUubmFtZS50b0xvd2VyQ2FzZSgpKTtcblxuICAgICAgICAgIGlmIChmZWF0dXJlLm9wdGlvbnMgJiYgZmVhdHVyZS5vcHRpb25zLmFsaWFzZXMgJiYgZmVhdHVyZS5vcHRpb25zLmFsaWFzZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBBZGQgYWxsIHRoZSBhbGlhc2VzIGludG8gdGhlIG5hbWVzIGxpc3RcbiAgICAgICAgICAgIGZvciAoYWxpYXNJZHggPSAwOyBhbGlhc0lkeCA8IGZlYXR1cmUub3B0aW9ucy5hbGlhc2VzLmxlbmd0aDsgYWxpYXNJZHgrKykge1xuICAgICAgICAgICAgICBmZWF0dXJlTmFtZXMucHVzaChmZWF0dXJlLm9wdGlvbnMuYWxpYXNlc1thbGlhc0lkeF0udG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUnVuIHRoZSB0ZXN0LCBvciB1c2UgdGhlIHJhdyB2YWx1ZSBpZiBpdCdzIG5vdCBhIGZ1bmN0aW9uXG4gICAgICAgIHJlc3VsdCA9IGlzKGZlYXR1cmUuZm4sICdmdW5jdGlvbicpID8gZmVhdHVyZS5mbigpIDogZmVhdHVyZS5mbjtcblxuXG4gICAgICAgIC8vIFNldCBlYWNoIG9mIHRoZSBuYW1lcyBvbiB0aGUgTW9kZXJuaXpyIG9iamVjdFxuICAgICAgICBmb3IgKG5hbWVJZHggPSAwOyBuYW1lSWR4IDwgZmVhdHVyZU5hbWVzLmxlbmd0aDsgbmFtZUlkeCsrKSB7XG4gICAgICAgICAgZmVhdHVyZU5hbWUgPSBmZWF0dXJlTmFtZXNbbmFtZUlkeF07XG4gICAgICAgICAgLy8gU3VwcG9ydCBkb3QgcHJvcGVydGllcyBhcyBzdWIgdGVzdHMuIFdlIGRvbid0IGRvIGNoZWNraW5nIHRvIG1ha2Ugc3VyZVxuICAgICAgICAgIC8vIHRoYXQgdGhlIGltcGxpZWQgcGFyZW50IHRlc3RzIGhhdmUgYmVlbiBhZGRlZC4gWW91IG11c3QgY2FsbCB0aGVtIGluXG4gICAgICAgICAgLy8gb3JkZXIgKGVpdGhlciBpbiB0aGUgdGVzdCwgb3IgbWFrZSB0aGUgcGFyZW50IHRlc3QgYSBkZXBlbmRlbmN5KS5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIENhcCBpdCB0byBUV08gdG8gbWFrZSB0aGUgbG9naWMgc2ltcGxlIGFuZCBiZWNhdXNlIHdobyBuZWVkcyB0aGF0IGtpbmQgb2Ygc3VidGVzdGluZ1xuICAgICAgICAgIC8vIGhhc2h0YWcgZmFtb3VzIGxhc3Qgd29yZHNcbiAgICAgICAgICBmZWF0dXJlTmFtZVNwbGl0ID0gZmVhdHVyZU5hbWUuc3BsaXQoJy4nKTtcblxuICAgICAgICAgIGlmIChmZWF0dXJlTmFtZVNwbGl0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dID0gcmVzdWx0O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBjYXN0IHRvIGEgQm9vbGVhbiwgaWYgbm90IG9uZSBhbHJlYWR5XG4gICAgICAgICAgICBpZiAoTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dICYmICEoTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dIGluc3RhbmNlb2YgQm9vbGVhbikpIHtcbiAgICAgICAgICAgICAgTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dID0gbmV3IEJvb2xlYW4oTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgTW9kZXJuaXpyW2ZlYXR1cmVOYW1lU3BsaXRbMF1dW2ZlYXR1cmVOYW1lU3BsaXRbMV1dID0gcmVzdWx0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNsYXNzZXMucHVzaCgocmVzdWx0ID8gJycgOiAnbm8tJykgKyBmZWF0dXJlTmFtZVNwbGl0LmpvaW4oJy0nKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgbW9kdWxlLmV4cG9ydHMgPSB0ZXN0UnVubmVyO1xuXG4iLCJ2YXIgTW9kZXJuaXpyUHJvdG8gPSByZXF1aXJlKCcuL01vZGVybml6clByb3RvLmpzJyk7XG52YXIgaW5qZWN0RWxlbWVudFdpdGhTdHlsZXMgPSByZXF1aXJlKCcuL2luamVjdEVsZW1lbnRXaXRoU3R5bGVzLmpzJyk7XG4gIC8qKlxuICAgKiB0ZXN0U3R5bGVzIGluamVjdHMgYW4gZWxlbWVudCB3aXRoIHN0eWxlIGVsZW1lbnQgYW5kIHNvbWUgQ1NTIHJ1bGVzXG4gICAqXG4gICAqIEBtZW1iZXJvZiBNb2Rlcm5penJcbiAgICogQG5hbWUgTW9kZXJuaXpyLnRlc3RTdHlsZXNcbiAgICogQG9wdGlvbk5hbWUgTW9kZXJuaXpyLnRlc3RTdHlsZXMoKVxuICAgKiBAb3B0aW9uUHJvcCB0ZXN0U3R5bGVzXG4gICAqIEBhY2Nlc3MgcHVibGljXG4gICAqIEBmdW5jdGlvbiB0ZXN0U3R5bGVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBydWxlIC0gU3RyaW5nIHJlcHJlc2VudGluZyBhIGNzcyBydWxlXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gQSBmdW5jdGlvbiB0aGF0IGlzIHVzZWQgdG8gdGVzdCB0aGUgaW5qZWN0ZWQgZWxlbWVudFxuICAgKiBAcGFyYW0ge251bWJlcn0gW25vZGVzXSAtIEFuIGludGVnZXIgcmVwcmVzZW50aW5nIHRoZSBudW1iZXIgb2YgYWRkaXRpb25hbCBub2RlcyB5b3Ugd2FudCBpbmplY3RlZFxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBbdGVzdG5hbWVzXSAtIEFuIGFycmF5IG9mIHN0cmluZ3MgdGhhdCBhcmUgdXNlZCBhcyBpZHMgZm9yIHRoZSBhZGRpdGlvbmFsIG5vZGVzXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBgTW9kZXJuaXpyLnRlc3RTdHlsZXNgIHRha2VzIGEgQ1NTIHJ1bGUgYW5kIGluamVjdHMgaXQgb250byB0aGUgY3VycmVudCBwYWdlXG4gICAqIGFsb25nIHdpdGggKHBvc3NpYmx5IG11bHRpcGxlKSBET00gZWxlbWVudHMuIFRoaXMgbGV0cyB5b3UgY2hlY2sgZm9yIGZlYXR1cmVzXG4gICAqIHRoYXQgY2FuIG5vdCBiZSBkZXRlY3RlZCBieSBzaW1wbHkgY2hlY2tpbmcgdGhlIFtJRExdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvTW96aWxsYS9EZXZlbG9wZXJfZ3VpZGUvSW50ZXJmYWNlX2RldmVsb3BtZW50X2d1aWRlL0lETF9pbnRlcmZhY2VfcnVsZXMpLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBNb2Rlcm5penIudGVzdFN0eWxlcygnI21vZGVybml6ciB7IHdpZHRoOiA5cHg7IGNvbG9yOiBwYXBheWF3aGlwOyB9JywgZnVuY3Rpb24oZWxlbSwgcnVsZSkge1xuICAgKiAgIC8vIGVsZW0gaXMgdGhlIGZpcnN0IERPTSBub2RlIGluIHRoZSBwYWdlIChieSBkZWZhdWx0ICNtb2Rlcm5penIpXG4gICAqICAgLy8gcnVsZSBpcyB0aGUgZmlyc3QgYXJndW1lbnQgeW91IHN1cHBsaWVkIC0gdGhlIENTUyBydWxlIGluIHN0cmluZyBmb3JtXG4gICAqXG4gICAqICAgYWRkVGVzdCgnd2lkdGh3b3JrcycsIGVsZW0uc3R5bGUud2lkdGggPT09ICc5cHgnKVxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIElmIHlvdXIgdGVzdCByZXF1aXJlcyBtdWx0aXBsZSBub2RlcywgeW91IGNhbiBpbmNsdWRlIGEgdGhpcmQgYXJndW1lbnRcbiAgICogaW5kaWNhdGluZyBob3cgbWFueSBhZGRpdGlvbmFsIGRpdiBlbGVtZW50cyB0byBpbmNsdWRlIG9uIHRoZSBwYWdlLiBUaGVcbiAgICogYWRkaXRpb25hbCBub2RlcyBhcmUgaW5qZWN0ZWQgYXMgY2hpbGRyZW4gb2YgdGhlIGBlbGVtYCB0aGF0IGlzIHJldHVybmVkIGFzXG4gICAqIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgY2FsbGJhY2suXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIE1vZGVybml6ci50ZXN0U3R5bGVzKCcjbW9kZXJuaXpyIHt3aWR0aDogMXB4fTsgI21vZGVybml6cjIge3dpZHRoOiAycHh9JywgZnVuY3Rpb24oZWxlbSkge1xuICAgKiAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2Rlcm5penInKS5zdHlsZS53aWR0aCA9PT0gJzFweCc7IC8vIHRydWVcbiAgICogICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kZXJuaXpyMicpLnN0eWxlLndpZHRoID09PSAnMnB4JzsgLy8gdHJ1ZVxuICAgKiAgIGVsZW0uZmlyc3RDaGlsZCA9PT0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGVybml6cjInKTsgLy8gdHJ1ZVxuICAgKiB9LCAxKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQsIGFsbCBvZiB0aGUgYWRkaXRpb25hbCBlbGVtZW50cyBoYXZlIGFuIElEIG9mIGBtb2Rlcm5penJbbl1gLCB3aGVyZVxuICAgKiBgbmAgaXMgaXRzIGluZGV4IChlLmcuIHRoZSBmaXJzdCBhZGRpdGlvbmFsLCBzZWNvbmQgb3ZlcmFsbCBpcyBgI21vZGVybml6cjJgLFxuICAgKiB0aGUgc2Vjb25kIGFkZGl0aW9uYWwgaXMgYCNtb2Rlcm5penIzYCwgZXRjLikuXG4gICAqIElmIHlvdSB3YW50IHRvIGhhdmUgbW9yZSBtZWFuaW5nZnVsIElEcyBmb3IgeW91ciBmdW5jdGlvbiwgeW91IGNhbiBwcm92aWRlXG4gICAqIHRoZW0gYXMgdGhlIGZvdXJ0aCBhcmd1bWVudCwgYXMgYW4gYXJyYXkgb2Ygc3RyaW5nc1xuICAgKlxuICAgKiBgYGBqc1xuICAgKiBNb2Rlcm5penIudGVzdFN0eWxlcygnI2ZvbyB7d2lkdGg6IDEwcHh9OyAjYmFyIHtoZWlnaHQ6IDIwcHh9JywgZnVuY3Rpb24oZWxlbSkge1xuICAgKiAgIGVsZW0uZmlyc3RDaGlsZCA9PT0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZvbycpOyAvLyB0cnVlXG4gICAqICAgZWxlbS5sYXN0Q2hpbGQgPT09IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXInKTsgLy8gdHJ1ZVxuICAgKiB9LCAyLCBbJ2ZvbycsICdiYXInXSk7XG4gICAqIGBgYFxuICAgKlxuICAgKi9cblxuICB2YXIgdGVzdFN0eWxlcyA9IE1vZGVybml6clByb3RvLnRlc3RTdHlsZXMgPSBpbmplY3RFbGVtZW50V2l0aFN0eWxlcztcbiAgbW9kdWxlLmV4cG9ydHMgPSB0ZXN0U3R5bGVzO1xuXG4iLCJcbiAgdmFyIHRlc3RzID0gW107XG4gIG1vZHVsZS5leHBvcnRzID0gdGVzdHM7XG5cbiIsIi8qIVxue1xuICBcIm5hbWVcIjogXCJGbGV4Ym94XCIsXG4gIFwicHJvcGVydHlcIjogXCJmbGV4Ym94XCIsXG4gIFwiY2FuaXVzZVwiOiBcImZsZXhib3hcIixcbiAgXCJ0YWdzXCI6IFtcImNzc1wiXSxcbiAgXCJub3Rlc1wiOiBbe1xuICAgIFwibmFtZVwiOiBcIlRoZSBfbmV3XyBmbGV4Ym94XCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3NzMy1mbGV4Ym94XCJcbiAgfV0sXG4gIFwid2FybmluZ3NcIjogW1xuICAgIFwiQSBgdHJ1ZWAgcmVzdWx0IGZvciB0aGlzIGRldGVjdCBkb2VzIG5vdCBpbXBseSB0aGF0IHRoZSBgZmxleC13cmFwYCBwcm9wZXJ0eSBpcyBzdXBwb3J0ZWQ7IHNlZSB0aGUgYGZsZXh3cmFwYCBkZXRlY3QuXCJcbiAgXVxufVxuISovXG4vKiBET0NcbkRldGVjdHMgc3VwcG9ydCBmb3IgdGhlIEZsZXhpYmxlIEJveCBMYXlvdXQgbW9kZWwsIGEuay5hLiBGbGV4Ym94LCB3aGljaCBhbGxvd3MgZWFzeSBtYW5pcHVsYXRpb24gb2YgbGF5b3V0IG9yZGVyIGFuZCBzaXppbmcgd2l0aGluIGEgY29udGFpbmVyLlxuKi9cbnZhciBNb2Rlcm5penIgPSByZXF1aXJlKCcuLy4uLy4uL2xpYi9Nb2Rlcm5penIuanMnKTtcbnZhciB0ZXN0QWxsUHJvcHMgPSByZXF1aXJlKCcuLy4uLy4uL2xpYi90ZXN0QWxsUHJvcHMuanMnKTtcbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ2ZsZXhib3gnLCB0ZXN0QWxsUHJvcHMoJ2ZsZXhCYXNpcycsICcxcHgnLCB0cnVlKSk7XG5cbiIsIi8qIVxue1xuICBcIm5hbWVcIjogXCJDU1MgVHJhbnNmb3JtcyAzRFwiLFxuICBcInByb3BlcnR5XCI6IFwiY3NzdHJhbnNmb3JtczNkXCIsXG4gIFwiY2FuaXVzZVwiOiBcInRyYW5zZm9ybXMzZFwiLFxuICBcInRhZ3NcIjogW1wiY3NzXCJdLFxuICBcIndhcm5pbmdzXCI6IFtcbiAgICBcIkNocm9tZSBtYXkgb2NjYXNzaW9uYWxseSBmYWlsIHRoaXMgdGVzdCBvbiBzb21lIHN5c3RlbXM7IG1vcmUgaW5mbzogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTEyOTAwNFwiXG4gIF1cbn1cbiEqL1xudmFyIE1vZGVybml6ciA9IHJlcXVpcmUoJy4vLi4vLi4vbGliL01vZGVybml6ci5qcycpO1xudmFyIHRlc3RBbGxQcm9wcyA9IHJlcXVpcmUoJy4vLi4vLi4vbGliL3Rlc3RBbGxQcm9wcy5qcycpO1xudmFyIHRlc3RTdHlsZXMgPSByZXF1aXJlKCcuLy4uLy4uL2xpYi90ZXN0U3R5bGVzLmpzJyk7XG52YXIgZG9jRWxlbWVudCA9IHJlcXVpcmUoJy4vLi4vLi4vbGliL2RvY0VsZW1lbnQuanMnKTtcbiAgTW9kZXJuaXpyLmFkZFRlc3QoJ2Nzc3RyYW5zZm9ybXMzZCcsIGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXQgPSAhIXRlc3RBbGxQcm9wcygncGVyc3BlY3RpdmUnLCAnMXB4JywgdHJ1ZSk7XG4gICAgdmFyIHVzZVByZWZpeCA9IE1vZGVybml6ci5fY29uZmlnLnVzZVByZWZpeGVzO1xuXG4gICAgLy8gV2Via2l0J3MgM0QgdHJhbnNmb3JtcyBhcmUgcGFzc2VkIG9mZiB0byB0aGUgYnJvd3NlcidzIG93biBncmFwaGljcyByZW5kZXJlci5cbiAgICAvLyAgIEl0IHdvcmtzIGZpbmUgaW4gU2FmYXJpIG9uIExlb3BhcmQgYW5kIFNub3cgTGVvcGFyZCwgYnV0IG5vdCBpbiBDaHJvbWUgaW5cbiAgICAvLyAgIHNvbWUgY29uZGl0aW9ucy4gQXMgYSByZXN1bHQsIFdlYmtpdCB0eXBpY2FsbHkgcmVjb2duaXplcyB0aGUgc3ludGF4IGJ1dFxuICAgIC8vICAgd2lsbCBzb21ldGltZXMgdGhyb3cgYSBmYWxzZSBwb3NpdGl2ZSwgdGh1cyB3ZSBtdXN0IGRvIGEgbW9yZSB0aG9yb3VnaCBjaGVjazpcbiAgICBpZiAocmV0ICYmICghdXNlUHJlZml4IHx8ICd3ZWJraXRQZXJzcGVjdGl2ZScgaW4gZG9jRWxlbWVudC5zdHlsZSkpIHtcbiAgICAgIHZhciBtcTtcbiAgICAgIHZhciBkZWZhdWx0U3R5bGUgPSAnI21vZGVybml6cnt3aWR0aDowO2hlaWdodDowfSc7XG4gICAgICAvLyBVc2UgQ1NTIENvbmRpdGlvbmFsIFJ1bGVzIGlmIGF2YWlsYWJsZVxuICAgICAgaWYgKE1vZGVybml6ci5zdXBwb3J0cykge1xuICAgICAgICBtcSA9ICdAc3VwcG9ydHMgKHBlcnNwZWN0aXZlOiAxcHgpJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgV2Via2l0IGFsbG93cyB0aGlzIG1lZGlhIHF1ZXJ5IHRvIHN1Y2NlZWQgb25seSBpZiB0aGUgZmVhdHVyZSBpcyBlbmFibGVkLlxuICAgICAgICAvLyBgQG1lZGlhICh0cmFuc2Zvcm0tM2QpLCgtd2Via2l0LXRyYW5zZm9ybS0zZCl7IC4uLiB9YFxuICAgICAgICBtcSA9ICdAbWVkaWEgKHRyYW5zZm9ybS0zZCknO1xuICAgICAgICBpZiAodXNlUHJlZml4KSB7XG4gICAgICAgICAgbXEgKz0gJywoLXdlYmtpdC10cmFuc2Zvcm0tM2QpJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtcSArPSAneyNtb2Rlcm5penJ7d2lkdGg6N3B4O2hlaWdodDoxOHB4O21hcmdpbjowO3BhZGRpbmc6MDtib3JkZXI6MH19JztcblxuICAgICAgdGVzdFN0eWxlcyhkZWZhdWx0U3R5bGUgKyBtcSwgZnVuY3Rpb24oZWxlbSkge1xuICAgICAgICByZXQgPSBlbGVtLm9mZnNldFdpZHRoID09PSA3ICYmIGVsZW0ub2Zmc2V0SGVpZ2h0ID09PSAxODtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG4gIH0pO1xuXG4iLCIvKiFcbntcbiAgXCJuYW1lXCI6IFwiQ1NTIFRyYW5zaXRpb25zXCIsXG4gIFwicHJvcGVydHlcIjogXCJjc3N0cmFuc2l0aW9uc1wiLFxuICBcImNhbml1c2VcIjogXCJjc3MtdHJhbnNpdGlvbnNcIixcbiAgXCJ0YWdzXCI6IFtcImNzc1wiXVxufVxuISovXG52YXIgTW9kZXJuaXpyID0gcmVxdWlyZSgnLi8uLi8uLi9saWIvTW9kZXJuaXpyLmpzJyk7XG52YXIgdGVzdEFsbFByb3BzID0gcmVxdWlyZSgnLi8uLi8uLi9saWIvdGVzdEFsbFByb3BzLmpzJyk7XG4gIE1vZGVybml6ci5hZGRUZXN0KCdjc3N0cmFuc2l0aW9ucycsIHRlc3RBbGxQcm9wcygndHJhbnNpdGlvbicsICdhbGwnLCB0cnVlKSk7XG5cbiIsIi8qIVxue1xuICBcIm5hbWVcIjogXCJDU1MgdncgdW5pdFwiLFxuICBcInByb3BlcnR5XCI6IFwiY3Nzdnd1bml0XCIsXG4gIFwiY2FuaXVzZVwiOiBcInZpZXdwb3J0LXVuaXRzXCIsXG4gIFwidGFnc1wiOiBbXCJjc3NcIl0sXG4gIFwiYnVpbGRlckFsaWFzZXNcIjogW1wiY3NzX3Z3dW5pdFwiXSxcbiAgXCJub3Rlc1wiOiBbe1xuICAgIFwibmFtZVwiOiBcIlJlbGF0ZWQgTW9kZXJuaXpyIElzc3VlXCIsXG4gICAgXCJocmVmXCI6IFwiaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvaXNzdWVzLzU3MlwiXG4gIH0se1xuICAgIFwibmFtZVwiOiBcIkpTRmlkZGxlIEV4YW1wbGVcIixcbiAgICBcImhyZWZcIjogXCJodHRwczovL2pzZmlkZGxlLm5ldC9GV2VpbmIvZXRuWUMvXCJcbiAgfV1cbn1cbiEqL1xudmFyIE1vZGVybml6ciA9IHJlcXVpcmUoJy4vLi4vLi4vbGliL01vZGVybml6ci5qcycpO1xudmFyIHRlc3RTdHlsZXMgPSByZXF1aXJlKCcuLy4uLy4uL2xpYi90ZXN0U3R5bGVzLmpzJyk7XG52YXIgY29tcHV0ZWRTdHlsZSA9IHJlcXVpcmUoJy4vLi4vLi4vbGliL2NvbXB1dGVkU3R5bGUuanMnKTtcbiAgdGVzdFN0eWxlcygnI21vZGVybml6ciB7IHdpZHRoOiA1MHZ3OyB9JywgZnVuY3Rpb24oZWxlbSkge1xuICAgIHZhciB3aWR0aCA9IHBhcnNlSW50KHdpbmRvdy5pbm5lcldpZHRoIC8gMiwgMTApO1xuICAgIHZhciBjb21wU3R5bGUgPSBwYXJzZUludChjb21wdXRlZFN0eWxlKGVsZW0sIG51bGwsICd3aWR0aCcpLCAxMCk7XG5cbiAgICBNb2Rlcm5penIuYWRkVGVzdCgnY3Nzdnd1bml0JywgY29tcFN0eWxlID09IHdpZHRoKTtcbiAgfSk7XG5cbiIsIi8qIVxue1xuICBcIm5hbWVcIjogXCJUb3VjaCBFdmVudHNcIixcbiAgXCJwcm9wZXJ0eVwiOiBcInRvdWNoZXZlbnRzXCIsXG4gIFwiY2FuaXVzZVwiIDogXCJ0b3VjaFwiLFxuICBcInRhZ3NcIjogW1wibWVkaWFcIiwgXCJhdHRyaWJ1dGVcIl0sXG4gIFwibm90ZXNcIjogW3tcbiAgICBcIm5hbWVcIjogXCJUb3VjaCBFdmVudHMgc3BlY1wiLFxuICAgIFwiaHJlZlwiOiBcImh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDEzL1dELXRvdWNoLWV2ZW50cy0yMDEzMDEyNC9cIlxuICB9XSxcbiAgXCJ3YXJuaW5nc1wiOiBbXG4gICAgXCJJbmRpY2F0ZXMgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhlIFRvdWNoIEV2ZW50cyBzcGVjLCBhbmQgZG9lcyBub3QgbmVjZXNzYXJpbHkgcmVmbGVjdCBhIHRvdWNoc2NyZWVuIGRldmljZVwiXG4gIF0sXG4gIFwia25vd25CdWdzXCI6IFtcbiAgICBcIkZhbHNlLXBvc2l0aXZlIG9uIHNvbWUgY29uZmlndXJhdGlvbnMgb2YgTm9raWEgTjkwMFwiLFxuICAgIFwiRmFsc2UtcG9zaXRpdmUgb24gc29tZSBCbGFja0JlcnJ5IDYuMCBidWlsZHMg4oCTIGh0dHBzOi8vZ2l0aHViLmNvbS9Nb2Rlcm5penIvTW9kZXJuaXpyL2lzc3Vlcy8zNzIjaXNzdWVjb21tZW50LTMxMTI2OTVcIlxuICBdXG59XG4hKi9cbi8qIERPQ1xuSW5kaWNhdGVzIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoZSBXM0MgVG91Y2ggRXZlbnRzIEFQSS5cblxuVGhpcyAqZG9lcyBub3QqIG5lY2Vzc2FyaWx5IHJlZmxlY3QgYSB0b3VjaHNjcmVlbiBkZXZpY2U6XG5cbiogT2xkZXIgdG91Y2hzY3JlZW4gZGV2aWNlcyBvbmx5IGVtdWxhdGUgbW91c2UgZXZlbnRzXG4qIE1vZGVybiBJRSB0b3VjaCBkZXZpY2VzIGltcGxlbWVudCB0aGUgUG9pbnRlciBFdmVudHMgQVBJIGluc3RlYWQ6IHVzZSBgTW9kZXJuaXpyLnBvaW50ZXJldmVudHNgIHRvIGRldGVjdCBzdXBwb3J0IGZvciB0aGF0XG4qIFNvbWUgYnJvd3NlcnMgJiBPUyBzZXR1cHMgbWF5IGVuYWJsZSB0b3VjaCBBUElzIHdoZW4gbm8gdG91Y2hzY3JlZW4gaXMgY29ubmVjdGVkXG4qIEZ1dHVyZSBicm93c2VycyBtYXkgaW1wbGVtZW50IG90aGVyIGV2ZW50IG1vZGVscyBmb3IgdG91Y2ggaW50ZXJhY3Rpb25zXG5cblNlZSB0aGlzIGFydGljbGU6IFtZb3UgQ2FuJ3QgRGV0ZWN0IEEgVG91Y2hzY3JlZW5dKGh0dHA6Ly93d3cuc3R1Y294LmNvbS9ibG9nL3lvdS1jYW50LWRldGVjdC1hLXRvdWNoc2NyZWVuLykuXG5cbkl0J3MgcmVjb21tZW5kZWQgdG8gYmluZCBib3RoIG1vdXNlIGFuZCB0b3VjaC9wb2ludGVyIGV2ZW50cyBzaW11bHRhbmVvdXNseSDigJMgc2VlIFt0aGlzIEhUTUw1IFJvY2tzIHR1dG9yaWFsXShodHRwOi8vd3d3Lmh0bWw1cm9ja3MuY29tL2VuL21vYmlsZS90b3VjaGFuZG1vdXNlLykuXG5cblRoaXMgdGVzdCB3aWxsIGFsc28gcmV0dXJuIGB0cnVlYCBmb3IgRmlyZWZveCA0IE11bHRpdG91Y2ggc3VwcG9ydC5cbiovXG52YXIgTW9kZXJuaXpyID0gcmVxdWlyZSgnLi8uLi9saWIvTW9kZXJuaXpyLmpzJyk7XG52YXIgcHJlZml4ZXMgPSByZXF1aXJlKCcuLy4uL2xpYi9wcmVmaXhlcy5qcycpO1xudmFyIHRlc3RTdHlsZXMgPSByZXF1aXJlKCcuLy4uL2xpYi90ZXN0U3R5bGVzLmpzJyk7XG4gIC8vIENocm9tZSAoZGVza3RvcCkgdXNlZCB0byBsaWUgYWJvdXQgaXRzIHN1cHBvcnQgb24gdGhpcywgYnV0IHRoYXQgaGFzIHNpbmNlIGJlZW4gcmVjdGlmaWVkOiBodHRwOi8vY3JidWcuY29tLzM2NDE1XG4gIE1vZGVybml6ci5hZGRUZXN0KCd0b3VjaGV2ZW50cycsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBib29sO1xuICAgIGlmICgoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB8fCB3aW5kb3cuRG9jdW1lbnRUb3VjaCAmJiBkb2N1bWVudCBpbnN0YW5jZW9mIERvY3VtZW50VG91Y2gpIHtcbiAgICAgIGJvb2wgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBpbmNsdWRlIHRoZSAnaGVhcnR6JyBhcyBhIHdheSB0byBoYXZlIGEgbm9uIG1hdGNoaW5nIE1RIHRvIGhlbHAgdGVybWluYXRlIHRoZSBqb2luXG4gICAgICAvLyBodHRwczovL2dpdC5pby92em5GSFxuICAgICAgdmFyIHF1ZXJ5ID0gWydAbWVkaWEgKCcsIHByZWZpeGVzLmpvaW4oJ3RvdWNoLWVuYWJsZWQpLCgnKSwgJ2hlYXJ0eicsICcpJywgJ3sjbW9kZXJuaXpye3RvcDo5cHg7cG9zaXRpb246YWJzb2x1dGV9fSddLmpvaW4oJycpO1xuICAgICAgdGVzdFN0eWxlcyhxdWVyeSwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgICBib29sID0gbm9kZS5vZmZzZXRUb3AgPT09IDk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGJvb2w7XG4gIH0pO1xuXG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBhZGRDbGFzcztcblxudmFyIF9oYXNDbGFzcyA9IHJlcXVpcmUoJy4vaGFzQ2xhc3MnKTtcblxudmFyIF9oYXNDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oYXNDbGFzcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGFkZENsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO2Vsc2UgaWYgKCEoMCwgX2hhc0NsYXNzMi5kZWZhdWx0KShlbGVtZW50KSkgZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZSArICcgJyArIGNsYXNzTmFtZTtcbn1cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gaGFzQ2xhc3M7XG5mdW5jdGlvbiBoYXNDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSByZXR1cm4gISFjbGFzc05hbWUgJiYgZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtlbHNlIHJldHVybiAoXCIgXCIgKyBlbGVtZW50LmNsYXNzTmFtZSArIFwiIFwiKS5pbmRleE9mKFwiIFwiICsgY2xhc3NOYW1lICsgXCIgXCIpICE9PSAtMTtcbn1cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07IiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO2Vsc2UgZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoJyhefFxcXFxzKScgKyBjbGFzc05hbWUgKyAnKD86XFxcXHN8JCknLCAnZycpLCAnJDEnKS5yZXBsYWNlKC9cXHMrL2csICcgJykucmVwbGFjZSgvXlxccyp8XFxzKiQvZywgJycpO1xufTsiLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuMlxuKGZ1bmN0aW9uKCkge1xuICB2YXIgZ2V0TmFub1NlY29uZHMsIGhydGltZSwgbG9hZFRpbWUsIG1vZHVsZUxvYWRUaW1lLCBub2RlTG9hZFRpbWUsIHVwVGltZTtcblxuICBpZiAoKHR5cGVvZiBwZXJmb3JtYW5jZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwZXJmb3JtYW5jZSAhPT0gbnVsbCkgJiYgcGVyZm9ybWFuY2Uubm93KSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICB9O1xuICB9IGVsc2UgaWYgKCh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzICE9PSBudWxsKSAmJiBwcm9jZXNzLmhydGltZSkge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gKGdldE5hbm9TZWNvbmRzKCkgLSBub2RlTG9hZFRpbWUpIC8gMWU2O1xuICAgIH07XG4gICAgaHJ0aW1lID0gcHJvY2Vzcy5ocnRpbWU7XG4gICAgZ2V0TmFub1NlY29uZHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBocjtcbiAgICAgIGhyID0gaHJ0aW1lKCk7XG4gICAgICByZXR1cm4gaHJbMF0gKiAxZTkgKyBoclsxXTtcbiAgICB9O1xuICAgIG1vZHVsZUxvYWRUaW1lID0gZ2V0TmFub1NlY29uZHMoKTtcbiAgICB1cFRpbWUgPSBwcm9jZXNzLnVwdGltZSgpICogMWU5O1xuICAgIG5vZGVMb2FkVGltZSA9IG1vZHVsZUxvYWRUaW1lIC0gdXBUaW1lO1xuICB9IGVsc2UgaWYgKERhdGUubm93KSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBEYXRlLm5vdygpIC0gbG9hZFRpbWU7XG4gICAgfTtcbiAgICBsb2FkVGltZSA9IERhdGUubm93KCk7XG4gIH0gZWxzZSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxvYWRUaW1lO1xuICAgIH07XG4gICAgbG9hZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgfVxuXG59KS5jYWxsKHRoaXMpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wZXJmb3JtYW5jZS1ub3cuanMubWFwXG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwidmFyIG5vdyA9IHJlcXVpcmUoJ3BlcmZvcm1hbmNlLW5vdycpXG4gICwgcm9vdCA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogd2luZG93XG4gICwgdmVuZG9ycyA9IFsnbW96JywgJ3dlYmtpdCddXG4gICwgc3VmZml4ID0gJ0FuaW1hdGlvbkZyYW1lJ1xuICAsIHJhZiA9IHJvb3RbJ3JlcXVlc3QnICsgc3VmZml4XVxuICAsIGNhZiA9IHJvb3RbJ2NhbmNlbCcgKyBzdWZmaXhdIHx8IHJvb3RbJ2NhbmNlbFJlcXVlc3QnICsgc3VmZml4XVxuXG5mb3IodmFyIGkgPSAwOyAhcmFmICYmIGkgPCB2ZW5kb3JzLmxlbmd0aDsgaSsrKSB7XG4gIHJhZiA9IHJvb3RbdmVuZG9yc1tpXSArICdSZXF1ZXN0JyArIHN1ZmZpeF1cbiAgY2FmID0gcm9vdFt2ZW5kb3JzW2ldICsgJ0NhbmNlbCcgKyBzdWZmaXhdXG4gICAgICB8fCByb290W3ZlbmRvcnNbaV0gKyAnQ2FuY2VsUmVxdWVzdCcgKyBzdWZmaXhdXG59XG5cbi8vIFNvbWUgdmVyc2lvbnMgb2YgRkYgaGF2ZSByQUYgYnV0IG5vdCBjQUZcbmlmKCFyYWYgfHwgIWNhZikge1xuICB2YXIgbGFzdCA9IDBcbiAgICAsIGlkID0gMFxuICAgICwgcXVldWUgPSBbXVxuICAgICwgZnJhbWVEdXJhdGlvbiA9IDEwMDAgLyA2MFxuXG4gIHJhZiA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgaWYocXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICB2YXIgX25vdyA9IG5vdygpXG4gICAgICAgICwgbmV4dCA9IE1hdGgubWF4KDAsIGZyYW1lRHVyYXRpb24gLSAoX25vdyAtIGxhc3QpKVxuICAgICAgbGFzdCA9IG5leHQgKyBfbm93XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY3AgPSBxdWV1ZS5zbGljZSgwKVxuICAgICAgICAvLyBDbGVhciBxdWV1ZSBoZXJlIHRvIHByZXZlbnRcbiAgICAgICAgLy8gY2FsbGJhY2tzIGZyb20gYXBwZW5kaW5nIGxpc3RlbmVyc1xuICAgICAgICAvLyB0byB0aGUgY3VycmVudCBmcmFtZSdzIHF1ZXVlXG4gICAgICAgIHF1ZXVlLmxlbmd0aCA9IDBcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGNwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYoIWNwW2ldLmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICBjcFtpXS5jYWxsYmFjayhsYXN0KVxuICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHRocm93IGUgfSwgMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIE1hdGgucm91bmQobmV4dCkpXG4gICAgfVxuICAgIHF1ZXVlLnB1c2goe1xuICAgICAgaGFuZGxlOiArK2lkLFxuICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgY2FuY2VsbGVkOiBmYWxzZVxuICAgIH0pXG4gICAgcmV0dXJuIGlkXG4gIH1cblxuICBjYWYgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmKHF1ZXVlW2ldLmhhbmRsZSA9PT0gaGFuZGxlKSB7XG4gICAgICAgIHF1ZXVlW2ldLmNhbmNlbGxlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmbikge1xuICAvLyBXcmFwIGluIGEgbmV3IGZ1bmN0aW9uIHRvIHByZXZlbnRcbiAgLy8gYGNhbmNlbGAgcG90ZW50aWFsbHkgYmVpbmcgYXNzaWduZWRcbiAgLy8gdG8gdGhlIG5hdGl2ZSByQUYgZnVuY3Rpb25cbiAgcmV0dXJuIHJhZi5jYWxsKHJvb3QsIGZuKVxufVxubW9kdWxlLmV4cG9ydHMuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gIGNhZi5hcHBseShyb290LCBhcmd1bWVudHMpXG59XG5tb2R1bGUuZXhwb3J0cy5wb2x5ZmlsbCA9IGZ1bmN0aW9uKCkge1xuICByb290LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHJhZlxuICByb290LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gY2FmXG59XG4iLCJpbXBvcnQgcmVhZHkgZnJvbSAnLi91dGlscy9yZWFkeSc7XG5cbmltcG9ydCBhZGRDbGFzcyBmcm9tICdkb20taGVscGVycy9jbGFzcy9hZGRDbGFzcyc7XG5pbXBvcnQgaGFzQ2xhc3MgZnJvbSAnZG9tLWhlbHBlcnMvY2xhc3MvaGFzQ2xhc3MnO1xuaW1wb3J0IHJlbW92ZUNsYXNzIGZyb20gJ2RvbS1oZWxwZXJzL2NsYXNzL3JlbW92ZUNsYXNzJztcblxuXG4vLyBIZXJvZXNcbnJlYWR5KCgpID0+IHtcblx0bGV0IGRyYXdlciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2RyYXdlcicpLFxuXHRcdGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2hlYWRlcicpLFxuXHRcdHRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2hlYWRlcl9fbmF2LXRvZ2dsZScpO1xuXG5cdGlmIChkcmF3ZXIgJiYgZHJhd2VyWzBdICYmIGhlYWRlciAmJiBoZWFkZXJbMF0gJiYgdG9nZ2xlICYmIHRvZ2dsZVswXSkge1xuXHRcdGRyYXdlciA9IGRyYXdlclswXTtcblx0XHRoZWFkZXIgPSBoZWFkZXJbMF07XG5cdFx0dG9nZ2xlID0gdG9nZ2xlWzBdO1xuXG5cdFx0dG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0aWYgKGhhc0NsYXNzKGRyYXdlciwgJ2RyYXdlci0tb3BlbicpKSB7XG5cdFx0XHRcdHJlbW92ZUNsYXNzKGhlYWRlciwgJ2hlYWRlci0tZHJhd2VyLW9wZW4nKTtcblx0XHRcdFx0cmVtb3ZlQ2xhc3MoZHJhd2VyLCAnZHJhd2VyLS1vcGVuJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRhZGRDbGFzcyhoZWFkZXIsICdoZWFkZXItLWRyYXdlci1vcGVuJyk7XG5cdFx0XHRcdGFkZENsYXNzKGRyYXdlciwgJ2RyYXdlci0tb3BlbicpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59KTtcbiIsImltcG9ydCByZWFkeSBmcm9tICcuL3V0aWxzL3JlYWR5JztcbmltcG9ydCB7IHNjcm9sbERpc3RhbmNlIH0gZnJvbSAnLi91dGlscy9zY3JvbGwtdG8nO1xuXG4vLyBIZXJvZXNcbnJlYWR5KCgpID0+IHtcblx0bGV0IGhlcm9lcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2hlcm8nKTtcblxuXHRmb3IgKGxldCBpID0gMDsgaSA8IGhlcm9lcy5sZW5ndGg7IGkrKykge1xuXHRcdGxldCBoZXJvID0gaGVyb2VzW2ldLFxuXHRcdFx0YXJyb3cgPSBoZXJvLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2hlcm9fX2Fycm93Jyk7XG5cblx0XHRpZiAoYXJyb3cgJiYgYXJyb3dbMF0pIHtcblx0XHRcdGFycm93ID0gYXJyb3dbMF07XG5cblx0XHRcdGFycm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHRcdGxldCByZWN0ID0gaGVyby5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHRcdFx0c2Nyb2xsRGlzdGFuY2UocmVjdC50b3AgKyByZWN0LmhlaWdodCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cbn0pO1xuIiwiaW1wb3J0ICcuL3V0aWxzL21vZGVybml6cic7XG5cbmltcG9ydCAnLi9kcmF3ZXInO1xuXG5pbXBvcnQgJy4vaGVybyc7XG4iLCIvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ3VzdG9tRXZlbnQvQ3VzdG9tRXZlbnRcbihmdW5jdGlvbiAoKSB7XG5cdGlmICh0eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gQ3VzdG9tRXZlbnQgKCBldmVudCwgcGFyYW1zICkge1xuXHRcdHBhcmFtcyA9IHBhcmFtcyB8fCB7IGJ1YmJsZXM6IGZhbHNlLCBjYW5jZWxhYmxlOiBmYWxzZSwgZGV0YWlsOiB1bmRlZmluZWQgfTtcblx0XHR2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoICdDdXN0b21FdmVudCcgKTtcblx0XHRldnQuaW5pdEN1c3RvbUV2ZW50KCBldmVudCwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlLCBwYXJhbXMuZGV0YWlsICk7XG5cdFx0cmV0dXJuIGV2dDtcblx0fVxuXG5cdEN1c3RvbUV2ZW50LnByb3RvdHlwZSA9IHdpbmRvdy5FdmVudC5wcm90b3R5cGU7XG5cblx0d2luZG93LkN1c3RvbUV2ZW50ID0gQ3VzdG9tRXZlbnQ7XG59KSgpO1xuIiwiLyoqXG4gKiBAb3ZlcnZpZXcgQnJvd3Nlcm5penJcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEltcG9ydCAoYW5kIGluaXRpYXRlKSBhcHAtd2lkZSB0ZXN0cy5cbiAqXG4gKiBAYXV0aG9yIGxqZFxuICovXG4vLyBTaGltIEhUTUw1XG5pbXBvcnQgJ2Jyb3dzZXJuaXpyL2xpYi9odG1sNXNoaXYnO1xuXG4vLyBNaXNjIHRlc3RcbmltcG9ydCAnYnJvd3Nlcm5penIvdGVzdC90b3VjaGV2ZW50cyc7XG5pbXBvcnQgJ2Jyb3dzZXJuaXpyL3Rlc3QvY3NzL2ZsZXhib3gnO1xuaW1wb3J0ICdicm93c2Vybml6ci90ZXN0L2Nzcy90cmFuc2l0aW9ucyc7XG5pbXBvcnQgJ2Jyb3dzZXJuaXpyL3Rlc3QvY3NzL3RyYW5zZm9ybXMzZCc7XG5pbXBvcnQgJ2Jyb3dzZXJuaXpyL3Rlc3QvY3NzL3Z3dW5pdCc7XG5cbi8vIEluaXRpYWxpemUgYW5kIGV4cG9ydFxuaW1wb3J0IE1vZGVybml6ciBmcm9tICdicm93c2Vybml6cic7XG5cbmV4cG9ydCBkZWZhdWx0IE1vZGVybml6cjtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlYWR5KGZuKSB7XG5cdGlmIChkb2N1bWVudC5hdHRhY2hFdmVudCA/IGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScgOiBkb2N1bWVudC5yZWFkeVN0YXRlICE9PSAnbG9hZGluZycpe1xuXHRcdGZuKCk7XG5cdH0gZWxzZSB7XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZuKTtcblx0fVxufVxuIiwiLyoqXG4gKiBAbmFtZSBrb2FsaXRpb24uaGVscGVyczpTY3JvbGxMaXN0ZW5lclxuICogQGRlc2NyaXB0aW9uXG4gKiBWaXJ0dWFsIHNjcm9sbCBsaXN0ZW5lcnMgZm9yIERPTSBlbGVtZW50cy4gQmFzZWQgb24gW1ZpcnR1YWxTY3JvbGxdKGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9kcm9qZGpvdS9iYXJ0ZWtkcm96ZHouY29tL21hc3Rlci9zdGF0aWMvc3JjL2ZyYW1ld29yay9WaXJ0dWFsU2Nyb2xsLmpzKVxuICovXG5cbmltcG9ydCByYWYgZnJvbSAncmFmJztcblxuY29uc3QgaGFzV2hlZWxFdmVudCA9ICdvbndoZWVsJyBpbiBkb2N1bWVudDtcbmNvbnN0IGhhc01vdXNlV2hlZWxFdmVudCA9ICdvbm1vdXNld2hlZWwnIGluIGRvY3VtZW50O1xuY29uc3QgaGFzVG91Y2ggPSAnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudDtcbmNvbnN0IGhhc1RvdWNoV2luID0gbmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMgJiYgbmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMgPiAxO1xuY29uc3QgaGFzUG9pbnRlciA9ICEhd2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkO1xuY29uc3QgaGFzS2V5RG93biA9ICdvbmtleWRvd24nIGluIGRvY3VtZW50O1xuXG5cblxuY29uc3QgREVGQVVMVFMgPSB7XG5cdGZwczogNjAsXG5cdHRpbWVvdXQ6IDIwMCxcblx0cGFzc2l2ZTogdHJ1ZVxufTtcblxuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjcm9sbExpc3RlbmVyIHtcblxuXHRzdGF0aWMgZ2V0U2Nyb2xsKCkge1xuXHRcdGxldCB7IHNjcm9sbFgsIHNjcm9sbFkgfSA9IHdpbmRvdztcblxuXHRcdGlmIChzY3JvbGxYID09PSB1bmRlZmluZWQgfHwgc2Nyb2xsWSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRzY3JvbGxYID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0IHx8IDA7XG5cdFx0XHRzY3JvbGxZID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCB8fCAwO1xuXHRcdH1cblxuXHRcdHJldHVybiB7XG5cdFx0XHRzY3JvbGxYLFxuXHRcdFx0c2Nyb2xsWVxuXHRcdH07XG5cdH1cblxuXHQvKipcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zXG5cdCAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBmcHMgLSBmcmVxdWVuY3kgLyB1cGRhdGVzIHBlciBzZWNvbmRcblx0ICogQHByb3BlcnR5IHtudW1iZXJ9IHRpbWVvdXQgLSBhbW91bnQgb2YgdGltZSBpbiBtcyB0byBhbGxvdyBmb3Igc2FtZSByZXN1bHQgYmVmb3JlIHR1cm5pbmcgb2ZmIGxpc3RlbmVyc1xuXHQgKi9cblx0Y29uc3RydWN0b3Iob3B0aW9ucykge1xuXHRcdHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRTLCBvcHRpb25zKTtcblx0XHR0aGlzLl9saXN0ZW5lcnMgPSBbXTtcblx0XHR0aGlzLl9pbnRlcm5hbExpc3RlbmVycyA9IFtdO1xuXHR9XG5cblx0LyoqXG5cdCAqIE5vdGlmeSBjb25zdW1lciBsaXN0ZW5lcnNcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtvYmplY3R9IGV2ZW50XG5cdCAqL1xuXHRfbm90aWZ5KGV2ZW50KSB7XG5cdFx0Y29uc3QgeyBfbGlzdGVuZXJzIH0gPSB0aGlzO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgX2xpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0X2xpc3RlbmVyc1tpXShldmVudCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIENvbnRpbm91c2x5IGxpc3RlbiBmb3Igc2Nyb2xsIHBvc2l0aW9uXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCAtIG9yaWdpbmFsIGV2ZW50IG9iamVjdFxuXHQgKi9cblx0X3N0YXJ0KGV2ZW50KSB7XG5cdFx0dGhpcy5fc3RvcCgpO1xuXHRcdGNvbnN0IHsgZnBzLCB0aW1lb3V0IH0gPSB0aGlzLm9wdGlvbnM7XG5cdFx0Y29uc3QgeyBzY3JvbGxYLCBzY3JvbGxZIH0gPSBTY3JvbGxMaXN0ZW5lci5nZXRTY3JvbGwoKTtcblxuXHRcdC8vIENhbGN1bGF0ZSBkZWx0YSBiYXNlZCBvbiBsYXN0IGV2ZW50IGlmIGF2YWlsYWJsZVxuXHRcdGxldCBkZWx0YVggPSAwLFxuXHRcdFx0ZGVsdGFZID0gMCxcblx0XHRcdGlzRmlyc3RFdmVudCA9IGZhbHNlO1xuXHRcdGlmICghdGhpcy5fbGFzdFNlZW4pIHtcblx0XHRcdGlzRmlyc3RFdmVudCA9IHRydWU7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc3QgeyBzY3JvbGxYOiBsYXN0U2VlblNjcm9sbFgsIHNjcm9sbFk6IGxhc3RTZWVuU2Nyb2xsWSB9ID0gdGhpcy5fbGFzdFNlZW47XG5cdFx0XHRkZWx0YVggPSBzY3JvbGxYIC0gKGxhc3RTZWVuU2Nyb2xsWCB8fCBzY3JvbGxYKTtcblx0XHRcdGRlbHRhWSA9IHNjcm9sbFkgLSAobGFzdFNlZW5TY3JvbGxZIHx8IHNjcm9sbFkpO1xuXHRcdH1cblxuXHRcdHRoaXMuX2xhc3RTZWVuID0ge1xuXHRcdFx0c2Nyb2xsWCxcblx0XHRcdHNjcm9sbFlcblx0XHR9O1xuXG5cdFx0Ly8gSWYgd2UncmUgbm90IG1vdmluZyBhbmQgdGhpcyBpc24ndCB0aGUgZmlyc3QgZXZlbnQsIGRvbid0IHRyaWdnZXIgZXZlbnRzLlxuXHRcdGlmICghaXNGaXJzdEV2ZW50ICYmIGRlbHRhWCA9PT0gMCAmJiBkZWx0YVkgPT09IDApIHtcblx0XHRcdHRoaXMuX3N0b3BUaW1lID0gdGhpcy5fc3RvcFRpbWUgfHwgRGF0ZS5ub3coKTtcblxuXHRcdC8vIEVsc2UsIHRyaWdnZXIgZXZlbnRzXG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX3N0b3BUaW1lID0gbnVsbDtcblxuXHRcdFx0Y29uc3QgaW50ZXJuYWxFdmVudCA9IHtcblx0XHRcdFx0eDogc2Nyb2xsWCxcblx0XHRcdFx0eTogc2Nyb2xsWSxcblx0XHRcdFx0ZGVsdGFYLFxuXHRcdFx0XHRkZWx0YVksXG5cdFx0XHRcdG9yaWdpbmFsRXZlbnQ6IGV2ZW50XG5cdFx0XHR9O1xuXHRcdFx0dGhpcy5fbm90aWZ5KGludGVybmFsRXZlbnQpO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGlmIHdlIGhhdmVuJ3QgdXBkYXRlZCBmb3IgdGhlIGR1cmF0aW9uIG9mIG91ciB0aW1lb3V0XG5cdFx0bGV0IGRvTG9vcCA9IHRydWU7XG5cdFx0aWYgKHRoaXMuX3N0b3BUaW1lICYmIERhdGUubm93KCkgLSB0aGlzLl9zdG9wVGltZSA+PSB0aW1lb3V0KSB7XG5cdFx0XHRkb0xvb3AgPSBmYWxzZTtcblx0XHRcdHRoaXMuX3N0b3BUaW1lID0gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBJZiB3ZSdyZSBzdGlsbCBtb3ZpbmcgLyB1cGRhdGluZywga2VlcCBsb29waW5nXG5cdFx0aWYgKGRvTG9vcCkge1xuXHRcdFx0dGhpcy5fc3RhcnRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSByYWYoKCkgPT4ge1xuXHRcdFx0XHR0aGlzLl9zdGFydChldmVudCk7XG5cdFx0XHR9KSwgMTAwMCAvIGZwcyk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN0b3AgY29udGlub3VzIGxpc3RlbmVyXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRfc3RvcCgpIHtcblx0XHRjbGVhclRpbWVvdXQodGhpcy5fc3RhcnRUaW1lcik7XG5cdFx0cmFmLmNhbmNlbCh0aGlzLl9hbmltYXRpb25GcmFtZSk7XG5cdH1cblxuXHQvKipcblx0ICogUmVnaXN0ZXIgaW50ZXJuYWwgbGlzdGVuZXJzXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBldmVudFxuXHQgKi9cblx0X2luaXRMaXN0ZW5lcnMoKSB7XG5cdFx0dGhpcy5fZGVzdHJveUxpc3RlbmVycygpO1xuXG5cdFx0dGhpcy5faW50ZXJuYWxMaXN0ZW5lcnMgPSBbXTtcblxuXHRcdHRoaXMuX2FkZExpc3RlbmVycygpO1xuXG5cdFx0dGhpcy5faXNJbml0aWFsaXplZCA9IHRydWU7XG5cdH1cblxuXHQvKipcblx0ICogQWRkIGludGVybmFsIGxpc3RlbmVycyB0byBhIHNpbmdsZSBlbGVtZW50XG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBldmVudFxuXHQgKi9cblx0X2FkZExpc3RlbmVycyhlbGVtZW50ID0gZG9jdW1lbnQpIHtcblx0XHRsZXQgeyBwYXNzaXZlIH0gPSB0aGlzLm9wdGlvbnM7XG5cblx0XHRsZXQgc3ludGhldGljTGlzdGVuZXIgPSBldmVudCA9PiB0aGlzLl9zdGFydChldmVudCk7XG5cdFx0ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzeW50aGV0aWNTY3JvbGwnLCBzeW50aGV0aWNMaXN0ZW5lciwgeyBwYXNzaXZlIH0pO1xuXHRcdHRoaXMuX2ludGVybmFsTGlzdGVuZXJzLnB1c2goe1xuXHRcdFx0ZWxlbWVudDogZWxlbWVudCxcblx0XHRcdHR5cGU6ICdzeW50aGV0aWMnLFxuXHRcdFx0bGlzdGVuZXI6IHN5bnRoZXRpY0xpc3RlbmVyXG5cdFx0fSk7XG5cblx0XHRsZXQgbG9hZExpc3RlbmVyID0gZXZlbnQgPT4gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHR0aGlzLl9zdGFydChldmVudCk7XG5cdFx0fSwgNTAwKTtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGxvYWRMaXN0ZW5lciwgeyBwYXNzaXZlIH0pO1xuXHRcdHRoaXMuX2ludGVybmFsTGlzdGVuZXJzLnB1c2goe1xuXHRcdFx0ZWxlbWVudDogd2luZG93LFxuXHRcdFx0dHlwZTogJ2xvYWQnLFxuXHRcdFx0bGlzdGVuZXI6IGxvYWRMaXN0ZW5lclxuXHRcdH0pO1xuXG5cdFx0bGV0IHNjcm9sbExpc3RlbmVyID0gZXZlbnQgPT4gdGhpcy5fc3RhcnQoZXZlbnQpO1xuXHRcdGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgc2Nyb2xsTGlzdGVuZXIsIHsgcGFzc2l2ZSB9KTtcblx0XHR0aGlzLl9pbnRlcm5hbExpc3RlbmVycy5wdXNoKHtcblx0XHRcdGVsZW1lbnQ6IGVsZW1lbnQsXG5cdFx0XHR0eXBlOiAnc2Nyb2xsJyxcblx0XHRcdGxpc3RlbmVyOiBzY3JvbGxMaXN0ZW5lclxuXHRcdH0pO1xuXG5cdFx0aWYgKGhhc1doZWVsRXZlbnQpIHtcblx0XHRcdGxldCB3aGVlbExpc3RlbmVyID0gZXZlbnQgPT4gdGhpcy5fc3RhcnQoZXZlbnQpO1xuXHRcdFx0ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIHdoZWVsTGlzdGVuZXIsIHsgcGFzc2l2ZSB9KTtcblx0XHRcdHRoaXMuX2ludGVybmFsTGlzdGVuZXJzLnB1c2goe1xuXHRcdFx0XHRlbGVtZW50OiBlbGVtZW50LFxuXHRcdFx0XHR0eXBlOiAnd2hlZWwnLFxuXHRcdFx0XHRsaXN0ZW5lcjogd2hlZWxMaXN0ZW5lclxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKGhhc01vdXNlV2hlZWxFdmVudCkge1xuXHRcdFx0bGV0IG1vdXNlV2hlZWxMaXN0ZW5lciA9IGV2ZW50ID0+IHRoaXMuX3N0YXJ0KGV2ZW50KTtcblx0XHRcdGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V3aGVlbCcsIG1vdXNlV2hlZWxMaXN0ZW5lciwgeyBwYXNzaXZlIH0pO1xuXHRcdFx0dGhpcy5faW50ZXJuYWxMaXN0ZW5lcnMucHVzaCh7XG5cdFx0XHRcdGVsZW1lbnQ6IGVsZW1lbnQsXG5cdFx0XHRcdHR5cGU6ICdtb3VzZXdoZWVsJyxcblx0XHRcdFx0bGlzdGVuZXI6IG1vdXNlV2hlZWxMaXN0ZW5lclxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKGhhc1RvdWNoKSB7XG5cdFx0XHRsZXQgdG91Y2hTdGFydExpc3RlbmVyID0gZXZlbnQgPT4gdGhpcy5fc3RhcnQoZXZlbnQpO1xuXHRcdFx0ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdG91Y2hTdGFydExpc3RlbmVyLCB7IHBhc3NpdmUgfSk7XG5cdFx0XHR0aGlzLl9pbnRlcm5hbExpc3RlbmVycy5wdXNoKHtcblx0XHRcdFx0ZWxlbWVudDogZWxlbWVudCxcblx0XHRcdFx0dHlwZTogJ3RvdWNoc3RhcnQnLFxuXHRcdFx0XHRsaXN0ZW5lcjogdG91Y2hTdGFydExpc3RlbmVyXG5cdFx0XHR9KTtcblxuXHRcdFx0bGV0IHRvdWNoTW92ZUxpc3RlbmVyID0gZXZlbnQgPT4gdGhpcy5fc3RhcnQoZXZlbnQpO1xuXHRcdFx0ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0b3VjaE1vdmVMaXN0ZW5lciwgeyBwYXNzaXZlIH0pO1xuXHRcdFx0dGhpcy5faW50ZXJuYWxMaXN0ZW5lcnMucHVzaCh7XG5cdFx0XHRcdGVsZW1lbnQ6IGVsZW1lbnQsXG5cdFx0XHRcdHR5cGU6ICd0b3VjaG1vdmUnLFxuXHRcdFx0XHRsaXN0ZW5lcjogdG91Y2hNb3ZlTGlzdGVuZXJcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmIChoYXNQb2ludGVyICYmIGhhc1RvdWNoV2luKSB7XG5cdFx0XHR0aGlzLl9ib2R5VG91Y2hBY3Rpb24gPSBkb2N1bWVudC5ib2R5LnN0eWxlLm1zVG91Y2hBY3Rpb247XG5cdFx0XHRkb2N1bWVudC5ib2R5LnN0eWxlLm1zVG91Y2hBY3Rpb24gPSAnbm9uZSc7XG5cblx0XHRcdGxldCB0b3VjaFN0YXJ0TGlzdGVuZXIgPSBldmVudCA9PiB0aGlzLl9zdGFydChldmVudCk7XG5cdFx0XHRlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ01TUG9pbnRlckRvd24nLCB0b3VjaFN0YXJ0TGlzdGVuZXIsIHRydWUpO1xuXHRcdFx0dGhpcy5faW50ZXJuYWxMaXN0ZW5lcnMucHVzaCh7XG5cdFx0XHRcdGVsZW1lbnQ6IGVsZW1lbnQsXG5cdFx0XHRcdHR5cGU6ICdNU1BvaW50ZXJEb3duJyxcblx0XHRcdFx0bGlzdGVuZXI6IHRvdWNoU3RhcnRMaXN0ZW5lcixcblx0XHRcdFx0dXNlQ2FwdHVyZTogdHJ1ZVxuXHRcdFx0fSk7XG5cblx0XHRcdGxldCB0b3VjaE1vdmVMaXN0ZW5lciA9IGV2ZW50ID0+IHRoaXMuX3N0YXJ0KGV2ZW50KTtcblx0XHRcdGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignTVNQb2ludGVyTW92ZScsIHRvdWNoTW92ZUxpc3RlbmVyLCB0cnVlKTtcblx0XHRcdHRoaXMuX2ludGVybmFsTGlzdGVuZXJzLnB1c2goe1xuXHRcdFx0XHRlbGVtZW50OiBlbGVtZW50LFxuXHRcdFx0XHR0eXBlOiAnTVNQb2ludGVyTW92ZScsXG5cdFx0XHRcdGxpc3RlbmVyOiB0b3VjaE1vdmVMaXN0ZW5lcixcblx0XHRcdFx0dXNlQ2FwdHVyZTogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKGhhc0tleURvd24pIHtcblx0XHRcdGxldCBrZXlEb3duTGlzdGVuZXIgPSBldmVudCA9PiB0aGlzLl9zdGFydChldmVudCk7XG5cdFx0XHRlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBrZXlEb3duTGlzdGVuZXIsIHsgcGFzc2l2ZSB9KTtcblx0XHRcdHRoaXMuX2ludGVybmFsTGlzdGVuZXJzLnB1c2goe1xuXHRcdFx0XHRlbGVtZW50OiBlbGVtZW50LFxuXHRcdFx0XHR0eXBlOiAna2V5ZG93bicsXG5cdFx0XHRcdGxpc3RlbmVyOiBrZXlEb3duTGlzdGVuZXJcblx0XHRcdH0pO1xuXHRcdH1cblxuXHR9XG5cblx0LyoqXG5cdCAqIERlcmVnaXN0ZXIgaW50ZXJuYWwgbGlzdGVuZXJzXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBldmVudFxuXHQgKi9cblx0X2Rlc3Ryb3lMaXN0ZW5lcnMoKSB7XG5cdFx0dGhpcy5faW50ZXJuYWxMaXN0ZW5lcnMuZm9yRWFjaChvYmogPT4gb2JqLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihvYmoudHlwZSwgb2JqLmxpc3RlbmVyLCBvYmoudXNlQ2FwdHVyZSkpO1xuXG5cdFx0dGhpcy5faXNJbml0aWFsaXplZCA9IGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEhvb2sgZm9yIGNvbnN1bWVyIHRvIHJlZ2lzdGVyIFZTIGxpc3RlbmVyXG5cdCAqIEBwdWJsaWNcblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gbGlzdGVuZXJcblx0ICovXG5cdG9uKGxpc3RlbmVyKSB7XG5cdFx0aWYgKCF0aGlzLl9pc0luaXRpYWxpemVkKSB7XG5cdFx0XHR0aGlzLl9pbml0TGlzdGVuZXJzKCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuX2xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBIb29rIGZvciBjb25zdW1lciB0byBkZXJlZ2lzdGVyIFZTIGxpc3RlbmVyXG5cdCAqIEBwdWJsaWNcblx0ICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG5cdCAqL1xuXHRvZmYoaW5kZXgpIHtcblx0XHRpZiAoaW5kZXgpIHtcblx0XHRcdHRoaXMuX2xpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLl9saXN0ZW5lcnMgPSBbXTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5fbGlzdGVuZXJzLmxlbmd0aCA8PSAwKSB7XG5cdFx0XHR0aGlzLl9kZXN0cm95TGlzdGVuZXJzKCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIERlc3Ryb3kgYWxsIGxpc3RlbmVyc1xuXHQgKiBAcHVibGljXG5cdCAqL1xuXHRkZXN0cm95KCkge1xuXHRcdHRoaXMub2ZmKCk7XG5cdH1cbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0ICcuL2N1c3RvbS1ldmVudC1wb2x5ZmlsbCc7XG5pbXBvcnQgU3ByaW5nIGZyb20gJy4vc3ByaW5nJztcbmltcG9ydCBTY3JvbGxMaXN0ZW5lciBmcm9tICcuL3Njcm9sbC1saXN0ZW5lcic7XG5cbi8qKlxuICogU2Nyb2xsIGFuaW1hdGlvbiBoZWxwZXJcbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IHNwcmluZyA9IG5ldyBTcHJpbmcoe1xuXHRjYWxsYmFjazogKHsgY3VycmVudCB9KSA9PiBzZXRTY3JvbGxUb3AoY3VycmVudCksXG5cdGFjY2VsZXJhdGlvbjogMC4wNSxcblx0bWFyZ2luOiAxXG59KTtcblxuXG4vKipcbiAqIFByZXZlbnQgc2Nyb2xsIGV2ZW50cyB3aGlsZSB3ZSdyZSBhbmltYXRpbmdcbiAqIEBwcml2YXRlXG4gKi9cbmxldCBsaXN0ZW5lcjtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG5cdGxpc3RlbmVyID0gbmV3IFNjcm9sbExpc3RlbmVyKHsgaWQ6ICdrb2Etc2Nyb2xsLXRvJywgcGFzc2l2ZTogZmFsc2UgfSk7XG5cdGxpc3RlbmVyLm9uKGV2ZW50ID0+IGlzQW5pbWF0aW5nU2Nyb2xsKCkgPT09IHRydWUgJiYgZXZlbnQub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpKTtcbn0pO1xuXG4vKipcbiAqIEdldCBzY3JvbGxUb3AgY3Jvc3MgYnJvd3NlclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZ2V0U2Nyb2xsVG9wKCkge1xuXHRyZXR1cm4gU2Nyb2xsTGlzdGVuZXIuZ2V0U2Nyb2xsKCkuc2Nyb2xsWTtcbn1cblxuLyoqXG4gKiBTZXQgc2Nyb2xsVG9wIGNyb3NzIGJyb3dzZXJcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge2ludGVnZXJ9IHB4XG4gKi9cbmZ1bmN0aW9uIHNldFNjcm9sbFRvcChweCkge1xuXHRkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID0gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPSBweDtcblxuXHQvLyBUaHJvdyBhIHN5bnRoZXRpYyBzY3JvbGwgZXZlbnQsIHdoaWNoIGluIHR1cm4gY2FuIGJlIGNhdWdodCBieSB0aGUgU2Nyb2xsTGlzdGVuZXIgY2xhc3Ncblx0Y29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3N5bnRoZXRpY1Njcm9sbCcsIHtcblx0XHRidWJibGVzOiB0cnVlLFxuXHRcdGNhbmNlbGFibGU6IGZhbHNlLFxuXHRcdGRldGFpbDogbnVsbCxcblx0XHR0eXBlOiAnc3ludGhldGljU2Nyb2xsJ1xuXHR9KTtcblx0ZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG59XG5cbi8qKlxuICogQW5pbWF0ZSBzY3JvbGxUb3AgdG8gYSBnaXZlbiBwaXhlbCB2YWx1ZVxuICogQHB1YmxpY1xuICogQHBhcmFtIHtpbnRlZ2VyfSB0YXJnZXRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2Nyb2xsVG8odGFyZ2V0KSB7XG5cdHNwcmluZ1xuXHRcdC5mb3JjZVN0YXRlKHtcblx0XHRcdGN1cnJlbnQ6IGdldFNjcm9sbFRvcCgpLFxuXHRcdFx0dGFyZ2V0OiBnZXRTY3JvbGxUb3AoKVxuXHRcdH0pXG5cdFx0LnNldFRhcmdldCh0YXJnZXQpO1xufVxuXG4vKipcbiAqIEFuaW1hdGUgc2Nyb2xsVG9wIGEgZ2l2ZW4gZGlzdGFuY2VcbiAqIEBwdWJsaWNcbiAqIEBwYXJhbSB7aW50ZWdlcn0gZGlzdGFuY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjcm9sbERpc3RhbmNlKGRpc3RhbmNlKSB7XG5cdHNjcm9sbFRvKGdldFNjcm9sbFRvcCgpICsgZGlzdGFuY2UpO1xufVxuXG4vKipcbiAqIEFuaW1hdGUgc2Nyb2xsVG9wIHRvIGdpdmVuIGVsZW1lbnRcbiAqIEBwdWJsaWNcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2Nyb2xsVG9FbGVtZW50KGVsZW1lbnQpIHtcblx0c2Nyb2xsVG8oZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3ApO1xufVxuXG4vKipcbiAqIEdldHRlciBmb3IgY2hlY2tpbmcgYW5pbWF0aW9uIHN0YXR1c1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBbmltYXRpbmdTY3JvbGwoKSB7XG5cdHJldHVybiAhIXNwcmluZy5faXNBbmltYXRpbmc7XG59XG4iLCJpbXBvcnQgcmFmIGZyb20gJ3JhZic7XG5cblxuXG4vKipcbiAqIERlZmF1bHQgc3RhdGVcbiAqL1xuY29uc3QgREVGQVVMVF9TVEFURSA9IHtcblx0Y3VycmVudDogMCxcblx0dGFyZ2V0OiAwLFxuXHR2ZWxvY2l0eTogMFxufTtcblxuLyoqXG4gKiBBYnN0cmFjdCBzcHJpbmcgYW5pbWF0aW9uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNwcmluZyB7XG5cblx0LyoqXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0Y29uc3RydWN0b3Ioc2V0dGluZ3MsIHN0YXRlKSB7XG5cdFx0dGhpcy5faW5pdChzZXR0aW5ncywgc3RhdGUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEluaXRcblx0ICogU2V0IGJhc2Ugc2V0dGluZ3MgZm9yIHNwcmluZy5cblx0ICogQHBhcmFtIHtvYmplY3R9IHNldHRpbmdzXG5cdCAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gQ2FsbGJhY2sgdG8gY2FsbCBlYWNoIHN0ZXBcblx0ICogQHByb3BlcnR5IHtudW1iZXJ9IGFjY2VsZXJhdGlvbiAtIFN0aWZmbmVzcyAvIGFjY2VsZXJhdGlvblxuXHQgKiBAcHJvcGVydHkge251bWJlcn0gZGFtcGVyIC0gRGFtcGVucyB2ZWxvY2l0eS4gc2hvdWxkIGJlIGJldHdlZW4gMCBhbmQgMS5cblx0ICogQHByb3BlcnR5IHtudW1iZXJ9IG1hcmdpbiAtIERldGVybWluZXMgdGFyZ2V0IGFjY3VyYWN5XG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBzdGF0ZVxuXHQgKiBAcHJvcGVydHkge251bWJlcn0gY3VycmVudCAtIEN1cnJlbnQgcG9zaXRpb25cblx0ICogQHByb3BlcnR5IHtudW1iZXJ9IHRhcmdldCAtIFRhcmdldCBwb3NpdGlvblxuXHQgKiBAcHJvcGVydHkge251bWJlcn0gdmVsb2NpdHkgLSBWZWxvY2l0eVxuXHQgKi9cblx0X2luaXQoeyBjYWxsYmFjaywgYWNjZWxlcmF0aW9uID0gMC4yLCBkYW1wZXIgPSAwLjg1LCBpZCwgbWFyZ2luID0gMC4wMDAxIH0gPSB7fSwgc3RhdGUgPSB7fSkge1xuXHRcdHRoaXMuX3NldHRpbmdzID0ge1xuXHRcdFx0YWNjZWxlcmF0aW9uLFxuXHRcdFx0Y2FsbGJhY2ssXG5cdFx0XHRkYW1wZXIsXG5cdFx0XHRpZCxcblx0XHRcdG1hcmdpblxuXHRcdH07XG5cblx0XHR0aGlzLl9zdGF0ZSA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU1RBVEUsIHN0YXRlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgc3RhdGUgYW5kIGxldCBjYWxsYmFja3Mga25vd1xuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0X3N0ZXAoKSB7XG5cdFx0Y29uc3QgeyBhY2NlbGVyYXRpb24sIGNhbGxiYWNrLCBkYW1wZXIsIG1hcmdpbiB9ID0gdGhpcy5fc2V0dGluZ3M7XG5cdFx0bGV0IHsgY3VycmVudCwgdGFyZ2V0LCB2ZWxvY2l0eSB9ID0gdGhpcy5fc3RhdGU7XG5cblx0XHQvLyBJZiB3ZSd2ZSBhbHJlYWR5IHJlYWNoZWQgdGhlIHRhcmdldCwgcmV0dXJuIHdpdGhvdXQgZG9pbmcgYW55dGhpbmdcblx0XHRpZiAoTWF0aC5hYnModGFyZ2V0IC0gY3VycmVudCkgPCBtYXJnaW4pIHtcblx0XHRcdHRoaXMuc3RvcCgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIERvIG1hdGggdG8gYW5pbWF0ZVxuXHRcdGxldCBkaXN0YW5jZSA9IHRhcmdldCAtIGN1cnJlbnQ7XG5cdFx0dmVsb2NpdHkgKj0gMSAtIGRhbXBlcjtcblx0XHR2ZWxvY2l0eSArPSBkaXN0YW5jZSAqIGFjY2VsZXJhdGlvbjtcblx0XHRjdXJyZW50ICs9IHZlbG9jaXR5O1xuXG5cdFx0Ly8gVXBkYXRlIGludGVybmFsIHN0YXRlXG5cdFx0dGhpcy5fc3RhdGUgPSB7XG5cdFx0XHRjdXJyZW50LFxuXHRcdFx0dGFyZ2V0LFxuXHRcdFx0dmVsb2NpdHlcblx0XHR9O1xuXG5cdFx0Ly8gQ2FsbCBjYWxsYmFjayBpZiBhdmFpbGFibGVcblx0XHRpZiAoY2FsbGJhY2spIHtcblx0XHRcdGNhbGxiYWNrKHsgLi4udGhpcy5fc3RhdGUgfSk7XG5cdFx0fVxuXG5cdFx0Ly8gQW5pbWF0aW9uIGxvb3AgLyBpdGVyYXRpb25cblx0XHR0aGlzLl9yYWYoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXF1ZXN0IGFuaW1hdGlvbiBmcmFtZVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0X3JhZigpIHtcblx0XHR0aGlzLl9pc0FuaW1hdGluZyA9IHRydWU7XG5cdFx0dGhpcy5fYW5pbWF0aW9uRnJhbWUgPSByYWYoKCkgPT4gdGhpcy5fc3RlcCgpKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBTdG9wIGFuaW1hdGlvblxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHRzdG9wKCkge1xuXHRcdGlmICh0aGlzLl9pc0FuaW1hdGluZykge1xuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXRIYW5kbGUpO1xuXHRcdFx0cmFmLmNhbmNlbCh0aGlzLl9hbmltYXRpb25GcmFtZSk7XG5cdFx0XHR0aGlzLl9pc0FuaW1hdGluZyA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBSZXNldCBTcHJpbmdcblx0ICogQHB1YmxpY1xuXHQgKi9cblx0cmVzZXQoc2V0dGluZ3MsIHN0YXRlKSB7XG5cdFx0dGhpcy5zdG9wKCk7XG5cblx0XHR0aGlzLl9pbml0KHtcblx0XHRcdC4uLnRoaXMuX3NldHRpbmdzLFxuXHRcdFx0Li4uc2V0dGluZ3Ncblx0XHR9LCBzdGF0ZSk7XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdC8qKlxuXHQgKiBTdG9wIGFsbCBhbmltYXRpb24gYW5kIGhhcmQgdXBkYXRlIGludGVybmFsIHN0YXRlXG5cdCAqIEBwdWJsaWNcblx0ICogQHBhcmFtIHtvYmplY3R9IHN0YXRlXG5cdCAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBjdXJyZW50IC0gY3VycmVudCBwb3NpdGlvblxuXHQgKiBAcHJvcGVydHkge251bWJlcn0gdGFyZ2V0IC0gdGFyZ2V0IHBvc2l0aW9uXG5cdCAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB2ZWxvY2l0eSAtIHZlbG9jaXR5XG5cdCAqL1xuXHRmb3JjZVN0YXRlKHN0YXRlKSB7XG5cdFx0dGhpcy5zdG9wKCk7XG5cdFx0dGhpcy5fc3RhdGUgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NUQVRFLCB0aGlzLl9zdGF0ZSwgc3RhdGUpO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHQvKipcblx0ICogU2V0IG5ldyB0YXJnZXQgYW5kIHN0YXJ0IGFuaW1hdGlvblxuXHQgKiBAcHVibGljXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRcblx0ICovXG5cdHNldFRhcmdldCh0YXJnZXQgPSAwKSB7XG5cdFx0aWYgKHRhcmdldCA9PT0gdGhpcy5fc3RhdGUudGFyZ2V0KSB7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cblx0XHR0aGlzLl9zdGF0ZSA9IHtcblx0XHRcdC4uLnRoaXMuX3N0YXRlLFxuXHRcdFx0dGFyZ2V0XG5cdFx0fTtcblxuXHRcdHRoaXMuc3RhcnQoKTtcblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIFN0YXJ0IHNwcmluZ1xuXHQgKiBAcHVibGljXG5cdCAqL1xuXHRzdGFydCgpIHtcblx0XHRpZiAoIXRoaXMuX2lzQW5pbWF0aW5nKSB7XG5cdFx0XHR0aGlzLl9yYWYoKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fVxufVxuIl19"}